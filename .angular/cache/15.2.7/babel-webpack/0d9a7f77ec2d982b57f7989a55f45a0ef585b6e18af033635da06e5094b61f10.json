{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/migue/Desktop/Argentina Programa/PortfolioFrontEnd/PortfolioFrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, HostListener, ViewEncapsulation, ChangeDetectionStrategy, ViewChild, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i2 from '@angular/forms';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nfunction TabsComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r3.color);\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    color: a0,\n    opacity: a1,\n    fontWeight: a2\n  };\n};\nfunction TabsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵlistener(\"click\", function TabsComponent_div_1_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const index_r2 = restoredCtx.index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onActivateTab(index_r2));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, TabsComponent_div_1_div_2_Template, 1, 2, \"div\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction3(3, _c0, tab_r1.active ? ctx_r0.color : \"inherit\", tab_r1.active ? 1 : 0.7, tab_r1.active ? 500 : \"inherit\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tab_r1.label, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", tab_r1.active);\n  }\n}\nconst _c1 = [\"*\"];\nconst _c2 = function (a2) {\n  return {\n    maxWidth: \"100%\",\n    width: \"100%\",\n    color: a2\n  };\n};\nfunction EditImageComponent_lib_cropper_wrapper_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"lib-cropper-wrapper\", 15);\n    i0.ɵɵlistener(\"croppUpdate\", function EditImageComponent_lib_cropper_wrapper_8_Template_lib_cropper_wrapper_croppUpdate_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onCroppUpdate($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"setSize\", ctx_r0.croppSize)(\"_imageSrc\", ctx_r0.imageSrc);\n  }\n}\nfunction EditImageComponent_ng_container_11_ng_container_1_option_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 34);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const formatItem_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", formatItem_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(formatItem_r9);\n  }\n}\nfunction EditImageComponent_ng_container_11_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 20)(2, \"p\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 21);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 22)(7, \"input\", 23);\n    i0.ɵɵlistener(\"change\", function EditImageComponent_ng_container_11_ng_container_1_Template_input_change_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.onChangeQuality());\n    })(\"ngModelChange\", function EditImageComponent_ng_container_11_ng_container_1_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.state.quality = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 24);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementStart(10, \"div\", 17)(11, \"input\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function EditImageComponent_ng_container_11_ng_container_1_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.state.maintainAspectRatio = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\", 26);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\", 27)(15, \"div\", 28)(16, \"label\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"input\", 29);\n    i0.ɵɵlistener(\"change\", function EditImageComponent_ng_container_11_ng_container_1_Template_input_change_18_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.onChangeSize(false));\n    })(\"ngModelChange\", function EditImageComponent_ng_container_11_ng_container_1_Template_input_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.state.maxWidth = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 28)(20, \"label\");\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"input\", 29);\n    i0.ɵɵlistener(\"change\", function EditImageComponent_ng_container_11_ng_container_1_Template_input_change_22_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.onChangeSize(true));\n    })(\"ngModelChange\", function EditImageComponent_ng_container_11_ng_container_1_Template_input_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.state.maxHeight = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"p\", 21);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 30)(26, \"div\", 31)(27, \"select\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function EditImageComponent_ng_container_11_ng_container_1_Template_select_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.state.format = $event);\n    })(\"change\", function EditImageComponent_ng_container_11_ng_container_1_Template_select_change_27_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.onChangeFormat());\n    });\n    i0.ɵɵtemplate(28, EditImageComponent_ng_container_11_ng_container_1_option_28_Template, 2, 2, \"option\", 33);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r6.labels[\"Quality\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.state.quality + \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"readonly\", ctx_r6.showCrop)(\"disabled\", ctx_r6.showCrop)(\"ngStyle\", i0.ɵɵpureFunction1(31, _c2, ctx_r6.color))(\"ngModel\", ctx_r6.state.quality);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.labels[\"Max dimensions\"], \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"color\", ctx_r6.color);\n    i0.ɵɵproperty(\"readonly\", ctx_r6.showCrop)(\"disabled\", ctx_r6.showCrop)(\"ngModel\", ctx_r6.state.maintainAspectRatio);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.labels[\"aspect-ratio\"]);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r6.labels[\"max-width(px)\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", ctx_r6.labels[\"max-width(px)\"]);\n    i0.ɵɵproperty(\"readonly\", ctx_r6.showCrop)(\"disabled\", ctx_r6.showCrop)(\"ngModel\", ctx_r6.state.maxWidth)(\"min\", 0)(\"max\", 2000);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r6.labels[\"max-height(px)\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", ctx_r6.labels[\"max-height(px)\"]);\n    i0.ɵɵproperty(\"readonly\", ctx_r6.showCrop)(\"disabled\", ctx_r6.showCrop)(\"ngModel\", ctx_r6.state.maxHeight)(\"min\", 0)(\"max\", 2000);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.labels[\"Format\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r6.showCrop)(\"ngModel\", ctx_r6.state.format);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.allFormats);\n  }\n}\nfunction EditImageComponent_ng_container_11_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 27)(2, \"div\", 35)(3, \"label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 36);\n    i0.ɵɵlistener(\"change\", function EditImageComponent_ng_container_11_ng_container_7_Template_input_change_5_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.onChangeCrop());\n    })(\"ngModelChange\", function EditImageComponent_ng_container_11_ng_container_7_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.state.cropWidth = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 35)(7, \"label\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"input\", 36);\n    i0.ɵɵlistener(\"change\", function EditImageComponent_ng_container_11_ng_container_7_Template_input_change_9_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r23.onChangeCrop());\n    })(\"ngModelChange\", function EditImageComponent_ng_container_11_ng_container_7_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.state.cropHeight = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"p\", 37)(11, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function EditImageComponent_ng_container_11_ng_container_7_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.onCrop());\n    });\n    i0.ɵɵelementStart(12, \"span\", 3);\n    i0.ɵɵtext(13, \" crop \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r7.labels[\"width(px)\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", ctx_r7.labels[\"width(px)\"]);\n    i0.ɵɵproperty(\"ngModel\", ctx_r7.state.cropWidth)(\"min\", 0)(\"max\", 2000);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r7.labels[\"height(px)\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", ctx_r7.labels[\"height(px)\"]);\n    i0.ɵɵproperty(\"ngModel\", ctx_r7.state.cropHeight)(\"min\", 0)(\"max\", 2000);\n  }\n}\nfunction EditImageComponent_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, EditImageComponent_ng_container_11_ng_container_1_Template, 29, 33, \"ng-container\", 10);\n    i0.ɵɵelementStart(2, \"div\", 16)(3, \"span\", 17)(4, \"input\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function EditImageComponent_ng_container_11_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.showCrop = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 19);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(7, EditImageComponent_ng_container_11_ng_container_7_Template, 14, 10, \"ng-container\", 10);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isMobile || ctx_r1.isMobile && !ctx_r1.showCrop);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"color\", ctx_r1.color);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.showCrop);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.labels[\"Crop\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showCrop);\n  }\n}\nfunction EditImageComponent_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"lib-basic-filters\", 39);\n    i0.ɵɵlistener(\"changeFilter\", function EditImageComponent_ng_container_12_Template_lib_basic_filters_changeFilter_1_listener($event) {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.onChangeFilters($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"filterState\", ctx_r2.state.basicFilters)(\"labels\", ctx_r2.labels)(\"color\", ctx_r2.color);\n  }\n}\nconst _c3 = function (a0, a1) {\n  return {\n    color: a0,\n    fontWeight: a1\n  };\n};\nfunction EditImageComponent_p_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(3, _c3, ctx_r3.calculateSize() > 120 ? \"#f44336\" : \"unset\", ctx_r3.calculateSize() > 120 ? \"500\" : \"unset\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" size: \", ctx_r3.calculateSize(), \"Kb \\xA0 \", ctx_r3.state.format, \" \");\n  }\n}\nconst _c4 = function () {\n  return [\"Basic\", \"Filters\"];\n};\nconst _c5 = [\"imagePicker\"];\nconst _c6 = function (a0, a1, a2, a3) {\n  return {\n    width: a0,\n    height: a1,\n    borderRadius: a2,\n    aspectRatio: a3\n  };\n};\nfunction NgpImagePickerComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function NgpImagePickerComponent_div_0_Template_button_click_2_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onUpload($event));\n    });\n    i0.ɵɵelementStart(3, \"span\", 5);\n    i0.ɵɵtext(4, \"add_a_photo\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"input\", 6, 7);\n    i0.ɵɵlistener(\"change\", function NgpImagePickerComponent_div_0_Template_input_change_5_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.handleFileSelect($event));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction4(3, _c6, ctx_r0.config.width, ctx_r0.config.height, ctx_r0.config.borderRadius, ctx_r0.config.aspectRatio));\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r0.labels[\"Upload a image\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"id\", \"filePicker-\" + ctx_r0.uuidFilePicker);\n  }\n}\nfunction NgpImagePickerComponent_div_1_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(3, _c3, ctx_r8.calculateSize() > 120 ? \"#f44336\" : \"unset\", ctx_r8.calculateSize() > 120 ? \"500\" : \"unset\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" size: \", ctx_r8.calculateSize(), \"Kb \\xA0 \", ctx_r8.state.format, \" \");\n  }\n}\nfunction NgpImagePickerComponent_div_1_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function NgpImagePickerComponent_div_1_button_7_Template_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.onUpload($event));\n    });\n    i0.ɵɵelementStart(1, \"span\", 5);\n    i0.ɵɵtext(2, \"add_a_photo\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r9.labels[\"Upload a image\"]);\n  }\n}\nfunction NgpImagePickerComponent_div_1_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function NgpImagePickerComponent_div_1_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.onOpenEditPanel());\n    });\n    i0.ɵɵelementStart(1, \"span\", 5);\n    i0.ɵɵtext(2, \"edit\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r10.labels[\"Open the editor panel\"]);\n  }\n}\nfunction NgpImagePickerComponent_div_1_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 19)(1, \"span\", 5);\n    i0.ɵɵtext(2, \"cloud_download\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r11.labels[\"Download the image\"]);\n    i0.ɵɵpropertyInterpolate(\"download\", ctx_r11.imageName);\n    i0.ɵɵproperty(\"href\", ctx_r11.imageSrc, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction NgpImagePickerComponent_div_1_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function NgpImagePickerComponent_div_1_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.onRemove());\n    });\n    i0.ɵɵelementStart(1, \"span\", 5);\n    i0.ɵɵtext(2, \"delete\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r12.labels[\"Remove\"]);\n  }\n}\nconst _c7 = function (a0, a1) {\n  return {\n    borderRadius: a0,\n    objectFit: a1\n  };\n};\nfunction NgpImagePickerComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 8);\n    i0.ɵɵelement(2, \"img\", 9);\n    i0.ɵɵelementStart(3, \"input\", 6, 7);\n    i0.ɵɵlistener(\"change\", function NgpImagePickerComponent_div_1_Template_input_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.handleFileSelect($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, NgpImagePickerComponent_div_1_p_5_Template, 2, 6, \"p\", 10);\n    i0.ɵɵelementStart(6, \"div\", 11);\n    i0.ɵɵtemplate(7, NgpImagePickerComponent_div_1_button_7_Template, 3, 1, \"button\", 12);\n    i0.ɵɵtemplate(8, NgpImagePickerComponent_div_1_button_8_Template, 3, 1, \"button\", 13);\n    i0.ɵɵtemplate(9, NgpImagePickerComponent_div_1_a_9_Template, 3, 3, \"a\", 14);\n    i0.ɵɵtemplate(10, NgpImagePickerComponent_div_1_button_10_Template, 3, 1, \"button\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction4(9, _c6, ctx_r1.config.width, ctx_r1.config.height, ctx_r1.config.borderRadius, ctx_r1.config.aspectRatio));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r1.imageSrc, i0.ɵɵsanitizeUrl)(\"ngStyle\", i0.ɵɵpureFunction2(14, _c7, ctx_r1.config.borderRadius, ctx_r1.config.objectFit));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", \"filePicker-\" + ctx_r1.uuidFilePicker);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.calculateSize());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.config.hideAddBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.config.hideEditBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.config.hideDownloadBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.config.hideDeleteBtn);\n  }\n}\nfunction NgpImagePickerComponent_lib_edit_image_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"lib-edit-image\", 21);\n    i0.ɵɵlistener(\"closeModal\", function NgpImagePickerComponent_lib_edit_image_2_Template_lib_edit_image_closeModal_0_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.onCloseEditPanel($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"imageSrc\", ctx_r2.imageSrc)(\"initialState\", ctx_r2.state)(\"labels\", ctx_r2.labels)(\"color\", ctx_r2.color);\n  }\n}\nconst MAX_BUFFER_UNDO_MEMORY = 25;\nlet rotate = 1;\nconst convertImageUsingCanvas = (datas, changeHeight = false, state, options) => {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (resolve, _) {\n      let img = document.createElement('img');\n      img.src = datas + '';\n      img.crossOrigin = 'Anonymous';\n      let quality = state.quality / 100;\n      let maintainRatio = state.maintainAspectRatio;\n      img.onload = () => {\n        var canvas = document.createElement('canvas');\n        let ctx = canvas.getContext('2d');\n        if (!ctx) return;\n        let ratio = img.width / img.height;\n        let width = state.maxWidth;\n        let height = state.maxHeight;\n        if (options?.getDimFromImage) {\n          width = img.width;\n          height = img.height;\n        }\n        if (maintainRatio) {\n          canvas.width = width;\n          canvas.height = width / ratio;\n          if (changeHeight) {\n            canvas.width = height * ratio;\n            canvas.height = height;\n          }\n        } else {\n          canvas.width = width;\n          canvas.height = height;\n        }\n        if (state.basicFilters) {\n          ctx.filter = processFilter(state.basicFilters);\n        }\n        // if (options?.rotate) {\n        //   canvas.width = height;\n        //   canvas.height = width;\n        //   if (options?.rotate === 90) {\n        //     ctx.rotate((90 * Math.PI) / 180);\n        //     ctx.translate(0, -canvas.width);\n        //   } else {\n        //     ctx.rotate((-90 * Math.PI) / 180);\n        //     ctx.translate(-canvas.height, 0);\n        //   }\n        //   ctx.drawImage(img, 0, 0);\n        // } else {\n        // }\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        let type = state.format;\n        var dataURI = canvas.toDataURL(`image/${type}`, quality);\n        resolve({\n          dataUri: dataURI,\n          width: canvas.width,\n          height: canvas.height\n        });\n      };\n    });\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }()).then(data => {\n    state.maxHeight = data.height;\n    state.maxWidth = data.width;\n    saveState(state, data.dataUri);\n    return data.dataUri;\n  });\n  function processFilter(data) {\n    return Object.keys(data).map(key => {\n      if (['blur'].includes(key)) {\n        return `${key}(${data[key]}px)`;\n      } else {\n        return `${key}(${data[key]})`;\n      }\n    }).join('');\n  }\n};\nconst dragElement = elemnt => {\n  if (!elemnt) return;\n  let pos1 = 0,\n    pos2 = 0,\n    pos3 = 0,\n    pos4 = 0;\n  if (document.getElementById(elemnt.id + '-header')) {\n    /* if present, the header is where you move the DIV from:*/\n    let elementRef = document.getElementById(elemnt?.id + '-header');\n    if (!elementRef) return;\n    elementRef.onmousedown = dragPressOn;\n    elementRef.ontouchstart = dragPressOn;\n  } else {\n    /* otherwise, move the DIV from anywhere inside the DIV:*/\n    elemnt.ontouchstart = dragPressOn;\n    elemnt.onmousedown = dragPressOn;\n  }\n  function dragPressOn(e) {\n    let popup = document.querySelector('#popup');\n    popup.style.overflowY = 'hidden';\n    e = e || window.event;\n    pos3 = e.clientX;\n    pos4 = e.clientY;\n    document.ontouchend = closeDragElement;\n    document.onmouseup = closeDragElement;\n    document.ontouchmove = elementDragTouch;\n    document.onmousemove = elementDragMouse;\n  }\n  function elementDragMouse(e) {\n    let holderImage = document.getElementById('image-full');\n    e = e || window.event;\n    pos1 = pos3 - e.clientX;\n    pos3 = e.clientX;\n    pos2 = pos4 - e.clientY;\n    pos4 = e.clientY;\n    let newTop = elemnt.offsetTop - pos2;\n    let newLeft = elemnt.offsetLeft - pos1;\n    let rectHolder = holderImage?.getBoundingClientRect();\n    let rectElemnt = elemnt.getBoundingClientRect();\n    // console.log('====================================');\n    // console.log(rectElemnt,rectHolder);\n    // console.log('====================================');\n    newTop = Math.max(newTop, rectHolder?.top);\n    newTop = Math.min(newTop, rectHolder?.bottom - rectElemnt.height);\n    newLeft = Math.max(newLeft, rectHolder?.left);\n    newLeft = Math.min(newLeft, rectHolder?.right - rectElemnt.width);\n    elemnt.style.top = newTop + 'px';\n    elemnt.style.left = newLeft + 'px';\n  }\n  function elementDragTouch(e) {\n    let holderImage = document.getElementById('image-full');\n    e = e || window.event;\n    if (e?.changedTouches?.length) {\n      pos1 = pos3 - e.changedTouches[0]?.clientX;\n      pos3 = e.changedTouches[0]?.clientX;\n    }\n    if (e?.changedTouches?.length) {\n      pos2 = pos4 - e.changedTouches[0]?.clientY;\n      pos4 = e.changedTouches[0]?.clientY;\n    }\n    let newTop = elemnt.offsetTop - pos2;\n    let newLeft = elemnt.offsetLeft - pos1;\n    let rectHolder = holderImage?.getBoundingClientRect();\n    let rectElemnt = elemnt.getBoundingClientRect();\n    // console.log('====================================');\n    // console.log(rectElemnt,rectHolder);\n    // console.log('====================================');\n    newTop = Math.max(newTop, rectHolder?.top);\n    newTop = Math.min(newTop, rectHolder?.bottom - rectElemnt.height);\n    newLeft = Math.max(newLeft, rectHolder?.left);\n    newLeft = Math.min(newLeft, rectHolder?.right - rectElemnt.width);\n    elemnt.style.top = newTop + 'px';\n    elemnt.style.left = newLeft + 'px';\n  }\n  function closeDragElement() {\n    /* stop moving when mouse button is released:*/\n    let popup = document.querySelector('#popup');\n    popup.style.overflowY = 'auto';\n    document.onmouseup = null;\n    document.onmousemove = null;\n    document.ontouchend = null;\n    document.ontouchmove = null;\n  }\n};\nconst saveState = (state, lastImage) => {\n  if (state.arrayCopiedImages.length <= MAX_BUFFER_UNDO_MEMORY) {\n    state.arrayCopiedImages.push({\n      lastImage: lastImage,\n      width: state.maxWidth,\n      height: state.maxHeight,\n      quality: state.quality,\n      format: state.format,\n      originImageSrc: state.originImageSrc,\n      basicFilters: state.basicFilters\n    });\n  } else {\n    state.arrayCopiedImages[state.arrayCopiedImages.length - 1] = {\n      lastImage: lastImage,\n      width: state.maxWidth,\n      height: state.maxHeight,\n      quality: state.quality,\n      format: state.format,\n      originImageSrc: state.originImageSrc,\n      basicFilters: state.basicFilters\n    };\n  }\n};\nvar Remove$3 = \"Quitar\";\nvar Quality$3 = \"Calidad\";\nvar Format$3 = \"Formato\";\nvar Crop$3 = \"Recortar\";\nvar Save$3 = \"Guardar\";\nvar Contrast$3 = \"Contraste\";\nvar Blur$3 = \"Blur\";\nvar Brightness$3 = \"Brillo\";\nvar Grayscale$3 = \"Scala de gris\";\nvar Saturate$2 = \"Saturación\";\nvar Sepia$3 = \"Sepia\";\nvar Rotate$1 = \"Rotar\";\nvar Undo$3 = \"Deshacer\";\nvar labelEs = {\n  \"Upload a image\": \"Suba una imagen\",\n  \"You must edit the image in order to resize it\": \"Debe editar la imagen para disminuir su tamaño\",\n  \"too large\": \"muy grande\",\n  \"Open the editor panel\": \"Abra el panel de edición\",\n  \"Download the image\": \"Descarge la imagen\",\n  \"Control Panel\": \"Panel de control\",\n  Remove: Remove$3,\n  Quality: Quality$3,\n  \"Max dimensions\": \"Dimensiones\",\n  \"aspect-ratio\": \"relación-aspecto\",\n  \"max-width(px)\": \"max. ancho\",\n  \"max-height(px)\": \"max. alto\",\n  Format: Format$3,\n  Crop: Crop$3,\n  \"width(px)\": \"ancho(px)\",\n  \"height(px)\": \"altura(px)\",\n  Save: Save$3,\n  Contrast: Contrast$3,\n  Blur: Blur$3,\n  Brightness: Brightness$3,\n  Grayscale: Grayscale$3,\n  Saturate: Saturate$2,\n  Sepia: Sepia$3,\n  Rotate: Rotate$1,\n  Undo: Undo$3\n};\nvar Quality$2 = \"Quality\";\nvar Format$2 = \"Format\";\nvar Crop$2 = \"Crop\";\nvar Remove$2 = \"Remove\";\nvar Save$2 = \"Save\";\nvar Contrast$2 = \"Contrast\";\nvar Blur$2 = \"Blur\";\nvar Brightness$2 = \"Brightness\";\nvar Grayscale$2 = \"Grayscale\";\nvar Saturate$1 = \"Saturate\";\nvar Sepia$2 = \"Sepia\";\nvar Rotate = \"Rotate\";\nvar Undo$2 = \"Undo\";\nvar labelEn = {\n  \"Upload a image\": \"Upload a image\",\n  \"You must edit the image in order to resize it\": \"You must edit the image in order to resize it\",\n  \"too large\": \"too large\",\n  \"Open the editor panel\": \"Open the editor panel\",\n  \"Download the image\": \"Download the image\",\n  \"Control Panel\": \"Control Panel\",\n  Quality: Quality$2,\n  \"Max dimensions\": \"Max dimensions\",\n  \"aspect-ratio\": \"aspect-ratio\",\n  \"max-width(px)\": \"max-width(px)\",\n  \"max-height(px)\": \"max-height(px)\",\n  Format: Format$2,\n  Crop: Crop$2,\n  \"width(px)\": \"width(px)\",\n  \"height(px)\": \"height(px)\",\n  Remove: Remove$2,\n  Save: Save$2,\n  Contrast: Contrast$2,\n  Blur: Blur$2,\n  Brightness: Brightness$2,\n  Grayscale: Grayscale$2,\n  Saturate: Saturate$1,\n  Sepia: Sepia$2,\n  Rotate: Rotate,\n  Undo: Undo$2\n};\nvar Remove$1 = \"Supprimer\";\nvar Quality$1 = \"Qualité\";\nvar Format$1 = \"Format\";\nvar Crop$1 = \"Recadrer\";\nvar Save$1 = \"Sauvez\";\nvar Contrast$1 = \"Contraste\";\nvar Blur$1 = \"Blur\";\nvar Brightness$1 = \"Luminosité\";\nvar Grayscale$1 = \"Grayscale\";\nvar Saturate = \"Saturer\";\nvar Sepia$1 = \"Seiche\";\nvar Undo$1 = \"Annuler\";\nvar labelFr = {\n  \"Upload a image\": \"Charger une image\",\n  \"You must edit the image in order to resize it\": \"Vous devez éditer l'image pour changer sa taille\",\n  \"too large\": \"Trop grande\",\n  \"Open the editor panel\": \"Ouvrir le panneau d'édition\",\n  \"Download the image\": \"Télécharger l'image\",\n  \"Control Panel\": \"Panneau de commande\",\n  Remove: Remove$1,\n  Quality: Quality$1,\n  \"Max dimensions\": \"Dimensions maximales\",\n  \"aspect-ratio\": \"rapport de forme\",\n  \"max-width(px)\": \"largeur max.\",\n  \"max-height(px)\": \"hauteur max\",\n  Format: Format$1,\n  Crop: Crop$1,\n  \"width(px)\": \"largeur(px)\",\n  \"height(px)\": \"hauteur(px)\",\n  Save: Save$1,\n  Contrast: Contrast$1,\n  Blur: Blur$1,\n  Brightness: Brightness$1,\n  Grayscale: Grayscale$1,\n  Saturate: Saturate,\n  Sepia: Sepia$1,\n  Undo: Undo$1\n};\nvar Quality = \"Qualität\";\nvar Format = \"Format\";\nvar Crop = \"Zuschneiden\";\nvar Remove = \"Entfernen\";\nvar Save = \"Speichern\";\nvar Contrast = \"Kontrast\";\nvar Blur = \"Blur\";\nvar Brightness = \"Helligkeit\";\nvar Grayscale = \"Graustufen\";\nvar Saturer = \"Sättigen\";\nvar Sepia = \"Tintenfisch\";\nvar Undo = \"Undo\";\nvar labelDe = {\n  \"Upload a image\": \"Bild hochladen\",\n  \"You must edit the image in order to resize it\": \"Sie müssen das Bild bearbeiten, um seine Größe zu ändern\",\n  \"too large\": \"zu groß\",\n  \"Open the editor panel\": \"Editor-Fenster öffnen\",\n  \"Download the image\": \"Bild herunterladen\",\n  \"Control Panel\": \"Bedienfeld\",\n  Quality: Quality,\n  \"Max dimensions\": \"Maximale Größe\",\n  \"aspect-ratio\": \"Seitenverhältnis\",\n  \"max-width(px)\": \"Max. Breite(px)\",\n  \"max-height(px)\": \"Max. Höhe(px)\",\n  Format: Format,\n  Crop: Crop,\n  \"width(px)\": \"Breite(px)\",\n  \"height(px)\": \"Höhe(px)\",\n  Remove: Remove,\n  Save: Save,\n  Contrast: Contrast,\n  Blur: Blur,\n  Brightness: Brightness,\n  Grayscale: Grayscale,\n  Saturer: Saturer,\n  Sepia: Sepia,\n  Undo: Undo\n};\nclass TabsComponent {\n  constructor() {\n    this.labels = [];\n    this.indexActivated = 0;\n    this.color = '';\n    this.indexActivatedChange = new EventEmitter();\n  }\n  set _labels(value) {\n    if (value?.length) {\n      this.labels = value.map(el => ({\n        active: false,\n        label: el\n      }));\n      this.labels[this.indexActivated].active = true;\n    }\n  }\n  set _indexActivated(index) {\n    this.indexActivated = index || 0;\n  }\n  onActivateTab(itemIndex) {\n    this.labels = this.labels.map((el, index) => {\n      el.active = itemIndex === index ? true : false;\n      return el;\n    });\n    this.indexActivated = itemIndex;\n    this.indexActivatedChange.next(itemIndex);\n  }\n  ngOnInit() {}\n}\nTabsComponent.ɵfac = function TabsComponent_Factory(t) {\n  return new (t || TabsComponent)();\n};\nTabsComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: TabsComponent,\n  selectors: [[\"lib-tabs\"]],\n  inputs: {\n    color: \"color\",\n    _labels: \"_labels\",\n    _indexActivated: \"_indexActivated\"\n  },\n  outputs: {\n    indexActivatedChange: \"indexActivatedChange\"\n  },\n  ngContentSelectors: _c1,\n  decls: 4,\n  vars: 1,\n  consts: [[1, \"header\"], [\"class\", \"itemlabel bottomLine\", 3, \"ngStyle\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"body\"], [1, \"itemlabel\", \"bottomLine\", 3, \"ngStyle\", \"click\"], [3, \"backgroundColor\", 4, \"ngIf\"]],\n  template: function TabsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, TabsComponent_div_1_Template, 3, 7, \"div\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵprojection(3);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.labels);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i1.NgStyle],\n  styles: [\".header[_ngcontent-%COMP%]{display:flex;padding:0 8px;box-sizing:border-box;justify-content:flex-start;align-items:center;overflow-x:auto;font-size:16px;border-bottom:1px solid #323232}.header[_ngcontent-%COMP%]   .itemlabel[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.5rem .65rem;min-height:48px;box-sizing:border-box;white-space:nowrap;text-transform:capitalize;cursor:pointer;opacity:.7}.header[_ngcontent-%COMP%]   .itemlabel.bottomLine[_ngcontent-%COMP%]{position:relative;opacity:1}.header[_ngcontent-%COMP%]   .itemlabel.bottomLine[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0;height:3px}.body[_ngcontent-%COMP%]{padding:16px 8px}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TabsComponent, [{\n    type: Component,\n    args: [{\n      selector: 'lib-tabs',\n      template: \"<div class=\\\"header\\\">\\n  <div\\n    (click)=\\\"onActivateTab(index)\\\"\\n    *ngFor=\\\"let tab of this.labels; let index = index\\\"\\n    class=\\\"itemlabel bottomLine\\\"\\n    [ngStyle]=\\\"{ color: tab.active ? color : 'inherit', opacity: tab.active ? 1 : 0.7, fontWeight: tab.active ? 500 : 'inherit' }\\\"\\n  >\\n    {{ tab.label }}\\n    <div *ngIf=\\\"tab.active\\\" [style.backgroundColor]=\\\"this.color\\\"></div>\\n  </div>\\n</div>\\n\\n<div class=\\\"body\\\">\\n  <ng-content></ng-content>\\n</div>\\n\",\n      styles: [\".header{display:flex;padding:0 8px;box-sizing:border-box;justify-content:flex-start;align-items:center;overflow-x:auto;font-size:16px;border-bottom:1px solid #323232}.header .itemlabel{display:flex;justify-content:center;align-items:center;padding:.5rem .65rem;min-height:48px;box-sizing:border-box;white-space:nowrap;text-transform:capitalize;cursor:pointer;opacity:.7}.header .itemlabel.bottomLine{position:relative;opacity:1}.header .itemlabel.bottomLine div{position:absolute;width:100%;bottom:0;height:3px}.body{padding:16px 8px}\\n\"]\n    }]\n  }], function () {\n    return [];\n  }, {\n    color: [{\n      type: Input\n    }],\n    _labels: [{\n      type: Input\n    }],\n    _indexActivated: [{\n      type: Input\n    }],\n    indexActivatedChange: [{\n      type: Output\n    }]\n  });\n})();\nclass BasicFiltersComponent {\n  constructor() {\n    this.color = '';\n    this.changeFilter = new EventEmitter();\n    this.state = {\n      contrast: 1,\n      blur: 0,\n      brightness: 1,\n      grayscale: 0,\n      invert: 0,\n      saturate: 1,\n      sepia: 0\n    };\n    this.debounce = (callback, delay) => {\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => {\n        callback();\n        clearTimeout(this.timeout);\n      }, delay);\n    };\n  }\n  set filterState(value) {\n    if (value) {\n      this.state = JSON.parse(JSON.stringify({\n        ...this.state,\n        ...value\n      }));\n    } else {\n      this.state = {\n        contrast: 1,\n        blur: 0,\n        brightness: 1,\n        grayscale: 0,\n        invert: 0,\n        saturate: 1,\n        sepia: 0\n      };\n    }\n  }\n  ngOnInit() {}\n  onChange() {\n    this.debounce(() => {\n      this.changeFilter.next(this.state);\n    }, 150);\n  }\n}\nBasicFiltersComponent.ɵfac = function BasicFiltersComponent_Factory(t) {\n  return new (t || BasicFiltersComponent)();\n};\nBasicFiltersComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: BasicFiltersComponent,\n  selectors: [[\"lib-basic-filters\"]],\n  inputs: {\n    color: \"color\",\n    labels: \"labels\",\n    filterState: \"filterState\"\n  },\n  outputs: {\n    changeFilter: \"changeFilter\"\n  },\n  decls: 47,\n  vars: 36,\n  consts: [[2, \"display\", \"flex\", \"width\", \"100%\", \"justify-content\", \"space-between\"], [1, \"item-panel\"], [2, \"flex-direction\", \"row\", \"box-sizing\", \"border-box\", \"display\", \"flex\", \"place-content\", \"flex-start\", \"align-items\", \"flex-start\"], [\"type\", \"range\", \"min\", \"0\", \"max\", \"5\", \"step\", \"0.01\", 1, \"input-range\", 3, \"ngStyle\", \"ngModel\", \"input\", \"ngModelChange\"], [\"type\", \"range\", \"min\", \"0\", \"max\", \"1\", \"step\", \"0.01\", 1, \"input-range\", 3, \"ngStyle\", \"ngModel\", \"input\", \"ngModelChange\"], [\"type\", \"range\", \"min\", \"0\", \"max\", \"10\", \"step\", \"0.01\", 1, \"input-range\", 3, \"ngStyle\", \"ngModel\", \"input\", \"ngModelChange\"], [\"type\", \"range\", \"min\", \"0\", \"max\", \"20\", \"step\", \"1\", 1, \"input-range\", 3, \"ngStyle\", \"ngModel\", \"input\", \"ngModelChange\"]],\n  template: function BasicFiltersComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"p\", 1);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"p\", 1);\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 2)(6, \"input\", 3);\n      i0.ɵɵlistener(\"input\", function BasicFiltersComponent_Template_input_input_6_listener() {\n        return ctx.onChange();\n      })(\"ngModelChange\", function BasicFiltersComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.state.contrast = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(7, \"br\");\n      i0.ɵɵelementStart(8, \"div\", 0)(9, \"p\", 1);\n      i0.ɵɵtext(10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"p\", 1);\n      i0.ɵɵtext(12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"div\", 2)(14, \"input\", 3);\n      i0.ɵɵlistener(\"input\", function BasicFiltersComponent_Template_input_input_14_listener() {\n        return ctx.onChange();\n      })(\"ngModelChange\", function BasicFiltersComponent_Template_input_ngModelChange_14_listener($event) {\n        return ctx.state.brightness = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(15, \"br\");\n      i0.ɵɵelementStart(16, \"div\", 0)(17, \"p\", 1);\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"p\", 1);\n      i0.ɵɵtext(20);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 2)(22, \"input\", 4);\n      i0.ɵɵlistener(\"input\", function BasicFiltersComponent_Template_input_input_22_listener() {\n        return ctx.onChange();\n      })(\"ngModelChange\", function BasicFiltersComponent_Template_input_ngModelChange_22_listener($event) {\n        return ctx.state.grayscale = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(23, \"br\");\n      i0.ɵɵelementStart(24, \"div\", 0)(25, \"p\", 1);\n      i0.ɵɵtext(26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"p\", 1);\n      i0.ɵɵtext(28);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 2)(30, \"input\", 5);\n      i0.ɵɵlistener(\"input\", function BasicFiltersComponent_Template_input_input_30_listener() {\n        return ctx.onChange();\n      })(\"ngModelChange\", function BasicFiltersComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.state.saturate = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(31, \"br\");\n      i0.ɵɵelementStart(32, \"div\", 0)(33, \"p\", 1);\n      i0.ɵɵtext(34);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"p\", 1);\n      i0.ɵɵtext(36);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(37, \"div\", 2)(38, \"input\", 4);\n      i0.ɵɵlistener(\"input\", function BasicFiltersComponent_Template_input_input_38_listener() {\n        return ctx.onChange();\n      })(\"ngModelChange\", function BasicFiltersComponent_Template_input_ngModelChange_38_listener($event) {\n        return ctx.state.sepia = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(39, \"br\");\n      i0.ɵɵelementStart(40, \"div\", 0)(41, \"p\", 1);\n      i0.ɵɵtext(42);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"p\", 1);\n      i0.ɵɵtext(44);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(45, \"div\", 2)(46, \"input\", 6);\n      i0.ɵɵlistener(\"input\", function BasicFiltersComponent_Template_input_input_46_listener() {\n        return ctx.onChange();\n      })(\"ngModelChange\", function BasicFiltersComponent_Template_input_ngModelChange_46_listener($event) {\n        return ctx.state.blur = $event;\n      });\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.labels[\"Contrast\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(((ctx.state == null ? null : ctx.state.contrast) || 0).toFixed(2));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(24, _c2, ctx.color))(\"ngModel\", ctx.state.contrast);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.labels[\"Brightness\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(((ctx.state == null ? null : ctx.state.brightness) || 0).toFixed(2));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(26, _c2, ctx.color))(\"ngModel\", ctx.state.brightness);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.labels[\"Grayscale\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(((ctx.state == null ? null : ctx.state.grayscale) || 0).toFixed(2));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(28, _c2, ctx.color))(\"ngModel\", ctx.state.grayscale);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.labels[\"Saturate\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(((ctx.state == null ? null : ctx.state.saturate) || 0).toFixed(2));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(30, _c2, ctx.color))(\"ngModel\", ctx.state.saturate);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.labels[\"Sepia\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(((ctx.state == null ? null : ctx.state.sepia) || 0).toFixed(2));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(32, _c2, ctx.color))(\"ngModel\", ctx.state.sepia);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.labels[\"Blur\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(((ctx.state == null ? null : ctx.state.blur) || 0).toFixed(2));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(34, _c2, ctx.color))(\"ngModel\", ctx.state.blur);\n    }\n  },\n  dependencies: [i1.NgStyle, i2.DefaultValueAccessor, i2.RangeValueAccessor, i2.NgControlStatus, i2.NgModel]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(BasicFiltersComponent, [{\n    type: Component,\n    args: [{\n      selector: 'lib-basic-filters',\n      template: \"<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Contrast'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.contrast || 0.0).toFixed(2) }}</p>\\n</div>\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.contrast\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"5\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Brightness'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.brightness || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.brightness\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"5\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Grayscale'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.grayscale || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.grayscale\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Saturate'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.saturate || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.saturate\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"10\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Sepia'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.sepia || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.sepia\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<!-- <br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Invert'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.invert || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.invert\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div> -->\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Blur'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (state?.blur || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.blur\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"20\\\"\\n    step=\\\"1\\\"\\n  />\\n</div>\\n\"\n    }]\n  }], function () {\n    return [];\n  }, {\n    color: [{\n      type: Input\n    }],\n    labels: [{\n      type: Input\n    }],\n    changeFilter: [{\n      type: Output\n    }],\n    filterState: [{\n      type: Input\n    }]\n  });\n})();\n\"use strict\";\n/**\n * POLYFILLS\n */\n// Request Animation Frame polyfill\n(function () {\n  let lastTime = 0;\n  let vendors = ['ms', 'moz', 'webkit', 'o'];\n  for (let x = 0; x < vendors.length && !window.requestAnimationFrame; x++) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n  if (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {\n    let currTime = new Date().getTime();\n    let timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    let id = window.setTimeout(function () {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n  if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n    clearTimeout(id);\n  };\n})();\n// CustomEvents polyfill\n(function () {\n  if (typeof window.CustomEvent === 'function') return false;\n  function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    let evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n})();\n// MouseEvents polyfill\n(function (window) {\n  try {\n    new CustomEvent('test');\n    return false; // No need to polyfill\n  } catch (e) {\n    // Need to polyfill - fall through\n  }\n  // Polyfills DOM4 CustomEvent\n  function MouseEvent(eventType, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false\n    };\n    let mouseEvent = document.createEvent('MouseEvent');\n    mouseEvent.initMouseEvent(eventType, params.bubbles, params.cancelable, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    return mouseEvent;\n  }\n  MouseEvent.prototype = Event.prototype;\n  window.MouseEvent = MouseEvent;\n})(window);\n\n/**\n * Handle component\n */\nclass Handle {\n  constructor(position, constraints, cursor, eventBus) {\n    var self = this;\n    this.position = position;\n    this.constraints = constraints;\n    this.cursor = cursor;\n    this.eventBus = eventBus;\n    // Create DOM element\n    this.el = document.createElement(\"div\");\n    this.el.className = \"croppr-handle\";\n    this.el.style.cursor = cursor;\n    // Attach initial listener\n    this.el.addEventListener(\"mousedown\", onMouseDown);\n    function onMouseDown(e) {\n      e.stopPropagation();\n      document.addEventListener(\"mouseup\", onMouseUp);\n      document.addEventListener(\"mousemove\", onMouseMove);\n      // Notify parent\n      self.eventBus.dispatchEvent(new CustomEvent(\"handlestart\", {\n        detail: {\n          handle: self\n        }\n      }));\n    }\n    function onMouseUp(e) {\n      e.stopPropagation();\n      document.removeEventListener(\"mouseup\", onMouseUp);\n      document.removeEventListener(\"mousemove\", onMouseMove);\n      // Notify parent\n      self.eventBus.dispatchEvent(new CustomEvent(\"handleend\", {\n        detail: {\n          handle: self\n        }\n      }));\n    }\n    function onMouseMove(e) {\n      e.stopPropagation();\n      // Notify parent\n      self.eventBus.dispatchEvent(new CustomEvent(\"handlemove\", {\n        detail: {\n          mouseX: e.clientX,\n          mouseY: e.clientY\n        }\n      }));\n    }\n  }\n}\n\n/**\n * Box component\n */\nclass Box {\n  constructor(x1, y1, x2, y2) {\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n  /**\n   * Sets the new dimensions of the box.\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  set(x1 = null, y1 = null, x2 = null, y2 = null) {\n    this.x1 = x1 == null ? this.x1 : x1;\n    this.y1 = y1 == null ? this.y1 : y1;\n    this.x2 = x2 == null ? this.x2 : x2;\n    this.y2 = y2 == null ? this.y2 : y2;\n    return this;\n  }\n  /**\n   * Calculates the width of the box.\n   * @returns {Number}\n   */\n  width() {\n    return Math.abs(this.x2 - this.x1);\n  }\n  /**\n   * Calculates the height of the box.\n   * @returns {Number}\n   */\n  height() {\n    return Math.abs(this.y2 - this.y1);\n  }\n  /**\n   * Resizes the box to a new size.\n   * @param {Number} newWidth\n   * @param {Number} newHeight\n   * @param {Array} [origin] The origin point to resize from.\n   *      Defaults to [0, 0] (top left).\n   */\n  resize(newWidth, newHeight, origin = [0, 0]) {\n    const fromX = this.x1 + this.width() * origin[0];\n    const fromY = this.y1 + this.height() * origin[1];\n    this.x1 = fromX - newWidth * origin[0];\n    this.y1 = fromY - newHeight * origin[1];\n    this.x2 = this.x1 + newWidth;\n    this.y2 = this.y1 + newHeight;\n    return this;\n  }\n  /**\n   * Scale the box by a factor.\n   * @param {Number} factor\n   * @param {Array} [origin] The origin point to resize from.\n   *      Defaults to [0, 0] (top left).\n   */\n  scale(factor, origin = [0, 0]) {\n    const newWidth = this.width() * factor;\n    const newHeight = this.height() * factor;\n    this.resize(newWidth, newHeight, origin);\n    return this;\n  }\n  /**\n   * Move the box to the specified coordinates.\n   */\n  move(x = null, y = null) {\n    let width = this.width();\n    let height = this.height();\n    x = x === null ? this.x1 : x;\n    y = y === null ? this.y1 : y;\n    this.x1 = x;\n    this.y1 = y;\n    this.x2 = x + width;\n    this.y2 = y + height;\n    return this;\n  }\n  /**\n   * Get relative x and y coordinates of a given point within the box.\n   * @param {Array} point The x and y ratio position within the box.\n   * @returns {Array} The x and y coordinates [x, y].\n   */\n  getRelativePoint(point = [0, 0]) {\n    const x = this.width() * point[0];\n    const y = this.height() * point[1];\n    return [x, y];\n  }\n  /**\n   * Get absolute x and y coordinates of a given point within the box.\n   * @param {Array} point The x and y ratio position within the box.\n   * @returns {Array} The x and y coordinates [x, y].\n   */\n  getAbsolutePoint(point = [0, 0]) {\n    const x = this.x1 + this.width() * point[0];\n    const y = this.y1 + this.height() * point[1];\n    return [x, y];\n  }\n  /**\n   * Constrain the box to a fixed ratio.\n   * @param {Number} ratio\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   * @param {String} [grow] The axis to grow to maintain the ratio.\n   *     Defaults to 'height'.\n   */\n  constrainToRatio(ratio, origin = [0, 0], grow = \"height\") {\n    if (ratio === null) {\n      return;\n    }\n    const width = this.width();\n    const height = this.height();\n    switch (grow) {\n      case \"height\":\n        // Grow height only\n        this.resize(this.width(), this.width() * ratio, origin);\n        break;\n      case \"width\":\n        // Grow width only\n        this.resize(this.height() * 1 / ratio, this.height(), origin);\n        break;\n      default:\n        // Default: Grow height only\n        this.resize(this.width(), this.width() * ratio, origin);\n    }\n    return this;\n  }\n  /**\n   * Constrain the box within a boundary.\n   * @param {Number} boundaryWidth\n   * @param {Number} boundaryHeight\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   */\n  constrainToBoundary(boundaryWidth, boundaryHeight, origin = [0, 0]) {\n    // Calculate the maximum sizes for each direction of growth\n    const [originX, originY] = this.getAbsolutePoint(origin);\n    const maxIfLeft = originX;\n    const maxIfTop = originY;\n    const maxIfRight = boundaryWidth - originX;\n    const maxIfBottom = boundaryHeight - originY;\n    // Express the direction of growth in terms of left, both,\n    // and right as -1, 0, and 1 respectively. Ditto for top/both/down.\n    const directionX = -2 * origin[0] + 1;\n    const directionY = -2 * origin[1] + 1;\n    // Determine the max size to use according to the direction of growth.\n    let [maxWidth, maxHeight] = [null, null];\n    switch (directionX) {\n      case -1:\n        maxWidth = maxIfLeft;\n        break;\n      case 0:\n        maxWidth = Math.min(maxIfLeft, maxIfRight) * 2;\n        break;\n      case +1:\n        maxWidth = maxIfRight;\n        break;\n    }\n    switch (directionY) {\n      case -1:\n        maxHeight = maxIfTop;\n        break;\n      case 0:\n        maxHeight = Math.min(maxIfTop, maxIfBottom) * 2;\n        break;\n      case +1:\n        maxHeight = maxIfBottom;\n        break;\n    }\n    // Resize if the box exceeds the calculated max width/height.\n    if (this.width() > maxWidth) {\n      const factor = maxWidth / this.width();\n      this.scale(factor, origin);\n    }\n    if (this.height() > maxHeight) {\n      const factor = maxHeight / this.height();\n      this.scale(factor, origin);\n    }\n    return this;\n  }\n  /**\n   * Constrain the box to a maximum/minimum size.\n   * @param {Number} [maxWidth]\n   * @param {Number} [maxHeight]\n   * @param {Number} [minWidth]\n   * @param {Number} [minHeight]\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   * @param {Number} [ratio] Ratio to maintain.\n   */\n  constrainToSize(maxWidth = null, maxHeight = null, minWidth = null, minHeight = null, origin = [0, 0], ratio = null) {\n    // Calculate new max/min widths & heights that constrains to the ratio\n    if (ratio) {\n      if (ratio > 1) {\n        maxWidth = maxHeight * 1 / ratio;\n        minHeight = minHeight * ratio;\n      } else if (ratio < 1) {\n        maxHeight = maxWidth * ratio;\n        minWidth = minHeight * 1 / ratio;\n      }\n    }\n    if (maxWidth && this.width() > maxWidth) {\n      const newWidth = maxWidth,\n        newHeight = ratio === null ? this.height() : maxHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n    if (maxHeight && this.height() > maxHeight) {\n      const newWidth = ratio === null ? this.width() : maxWidth,\n        newHeight = maxHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n    if (minWidth && this.width() < minWidth) {\n      const newWidth = minWidth,\n        newHeight = ratio === null ? this.height() : minHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n    if (minHeight && this.height() < minHeight) {\n      const newWidth = ratio === null ? this.width() : minWidth,\n        newHeight = minHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n    return this;\n  }\n}\n\n/**\n * Croppr Touch\n * Enables support for touch devices by translating touch events to\n * mouse events.\n */\n/**\n * Binds an element's touch events to be simulated as mouse events.\n * @param {Element} element\n */\nfunction enableTouch(element) {\n  element.addEventListener('touchstart', simulateMouseEvent);\n  element.addEventListener('touchend', simulateMouseEvent);\n  element.addEventListener('touchmove', simulateMouseEvent);\n}\n/**\n * Translates a touch event to a mouse event.\n * @param {Event} e\n */\nfunction simulateMouseEvent(e) {\n  e.preventDefault();\n  const touch = e.changedTouches[0];\n  const eventMap = {\n    touchstart: 'mousedown',\n    touchmove: 'mousemove',\n    touchend: 'mouseup'\n  };\n  touch.target.dispatchEvent(new MouseEvent(eventMap[e.type], {\n    bubbles: true,\n    cancelable: true,\n    view: window,\n    clientX: touch.clientX,\n    clientY: touch.clientY,\n    screenX: touch.screenX,\n    screenY: touch.screenY\n  }));\n}\n\n/**\n * CropprCore\n * Here lies the main logic.\n */\n/**\n * Define a list of handles to create.\n *\n * @property {Array} position - The x and y ratio position of the handle within\n *      the crop region. Accepts a value between 0 to 1 in the order of [X, Y].\n * @property {Array} constraints - Define the side of the crop region that is to\n *      be affected by this handle. Accepts a value of 0 or 1 in the order of\n *      [TOP, RIGHT, BOTTOM, LEFT].\n * @property {String} cursor - The CSS cursor of this handle.\n */\nconst HANDLES = [{\n  position: [0.0, 0.0],\n  constraints: [1, 0, 0, 1],\n  cursor: 'nw-resize'\n}, {\n  position: [0.5, 0.0],\n  constraints: [1, 0, 0, 0],\n  cursor: 'n-resize'\n}, {\n  position: [1.0, 0.0],\n  constraints: [1, 1, 0, 0],\n  cursor: 'ne-resize'\n}, {\n  position: [1.0, 0.5],\n  constraints: [0, 1, 0, 0],\n  cursor: 'e-resize'\n}, {\n  position: [1.0, 1.0],\n  constraints: [0, 1, 1, 0],\n  cursor: 'se-resize'\n}, {\n  position: [0.5, 1.0],\n  constraints: [0, 0, 1, 0],\n  cursor: 's-resize'\n}, {\n  position: [0.0, 1.0],\n  constraints: [0, 0, 1, 1],\n  cursor: 'sw-resize'\n}, {\n  position: [0.0, 0.5],\n  constraints: [0, 0, 0, 1],\n  cursor: 'w-resize'\n}];\n/**\n * Core class for Croppr containing most of its functional logic.\n */\nclass CropprCore {\n  constructor(element, options, deferred = false) {\n    this.regionEl = null;\n    // console.log(\"🚀 ~ file: core.ts ~ line 51 ~ CropprCore ~ constructor ~ element\", element)\n    // Parse options\n    this.options = CropprCore.parseOptions(options || {});\n    // Get target img element\n    if (!element.nodeName) {\n      element = document.querySelector(element);\n      // console.log(\"🚀 ~ file: core.ts ~ line 58 ~ CropprCore ~ constructor ~ element\", element)\n      if (element == null) {\n        throw 'Unable to find element.';\n      }\n    }\n    if (!element.getAttribute('src')) {\n      throw 'Image src not provided.';\n    }\n    // Define internal props\n    this._initialized = false;\n    this._restore = {\n      parent: element.parentNode,\n      element: element\n    };\n    // Wait until image is loaded before proceeding\n    if (!deferred) {\n      if (element.width === 0 || element.height === 0) {\n        element.onload = () => {\n          this.initialize(element);\n        };\n      } else {\n        this.initialize(element);\n      }\n    }\n  }\n  /**\n   * Initialize the Croppr instance\n   */\n  initialize(element) {\n    // Create DOM elements\n    this.createDOM(element);\n    // Process option values\n    this.options.convertToPixels(this.cropperEl);\n    // Listen for events from children\n    this.attachHandlerEvents();\n    this.attachRegionEvents();\n    this.attachOverlayEvents();\n    // Bootstrap this cropper instance\n    this.box = this.initializeBox(this.options);\n    this.redraw();\n    // Set the initalized flag to true and call the callback\n    this._initialized = true;\n    if (this.options.onInitialize !== null) {\n      this.options.onInitialize(this);\n    }\n  }\n  /**\n   * Create Croppr's DOM elements\n   */\n  createDOM(targetEl) {\n    // Create main container and use it as the main event listeners\n    this.containerEl = document.createElement('div');\n    this.containerEl.className = 'croppr-container';\n    this.eventBus = this.containerEl;\n    enableTouch(this.containerEl);\n    // Create cropper element\n    this.cropperEl = document.createElement('div');\n    this.cropperEl.className = 'croppr';\n    // Create image element\n    this.imageEl = document.createElement('img');\n    this.imageEl.setAttribute('src', targetEl.getAttribute('src'));\n    this.imageEl.setAttribute('alt', targetEl.getAttribute('alt'));\n    this.imageEl.className = 'croppr-image';\n    // Create clipped image element\n    this.imageClippedEl = this.imageEl.cloneNode();\n    this.imageClippedEl.className = 'croppr-imageClipped';\n    // Create region box element\n    this.regionEl = document.createElement('div');\n    this.regionEl.innerHTML = new Array(9).fill(1).map(() => `<div style=\"border: 1px dashed #fafafa\"></div>`).join('');\n    this.regionEl.className = 'croppr-region';\n    // Create overlay element\n    this.overlayEl = document.createElement('div');\n    this.overlayEl.className = 'croppr-overlay';\n    // Create handles element\n    let handleContainerEl = document.createElement('div');\n    handleContainerEl.className = 'croppr-handleContainer';\n    this.handles = [];\n    for (let i = 0; i < HANDLES.length; i++) {\n      const handle = new Handle(HANDLES[i].position, HANDLES[i].constraints, HANDLES[i].cursor, this.eventBus);\n      this.handles.push(handle);\n      handleContainerEl.appendChild(handle.el);\n    }\n    // And then we piece it all together!\n    this.cropperEl.appendChild(this.imageEl);\n    this.cropperEl.appendChild(this.imageClippedEl);\n    this.cropperEl.appendChild(this.regionEl);\n    this.cropperEl.appendChild(this.overlayEl);\n    this.cropperEl.appendChild(handleContainerEl);\n    this.containerEl.appendChild(this.cropperEl);\n    // And then finally insert it into the document\n    targetEl.parentElement.replaceChild(this.containerEl, targetEl);\n  }\n  /**\n   * Changes the image src.\n   * @param {String} src\n   */\n  setImage(src) {\n    // Add onload listener to reinitialize box\n    this.imageEl.onload = () => {\n      this.box = this.initializeBox(this.options);\n      this.redraw();\n    };\n    // Change image source\n    this.imageEl.src = src;\n    this.imageClippedEl.src = src;\n    return this;\n  }\n  /**\n   * Destroy the Croppr instance and replace with the original element.\n   */\n  destroy() {\n    this._restore.parent.replaceChild(this._restore.element, this.containerEl);\n  }\n  /**\n   * Create a new box region with a set of options.\n   * @param {Object} opts The options.\n   * @returns {Box}\n   */\n  initializeBox(opts) {\n    // Create initial box\n    const width = opts.startSize.width;\n    const height = opts.startSize.height;\n    let box = new Box(0, 0, width, height);\n    // console.log(\"🚀 ~ file: core.ts ~ line 202 ~ CropprCore ~ initializeBox ~ box\", box)\n    // Maintain ratio\n    box.constrainToRatio(opts.aspectRatio, [0.5, 0.5]);\n    // Maintain minimum/maximum size\n    const min = opts.minSize;\n    const max = opts.maxSize;\n    box.constrainToSize(max.width, max.height, min.width, min.height, [0.5, 0.5], opts.aspectRatio);\n    // Constrain to boundary\n    const parentWidth = this.cropperEl.offsetWidth;\n    const parentHeight = this.cropperEl.offsetHeight;\n    box.constrainToBoundary(parentWidth, parentHeight, [0.5, 0.5]);\n    // // Move to center\n    const x = this.cropperEl.offsetWidth / 2 - box.width() / 2;\n    const y = this.cropperEl.offsetHeight / 2 - box.height() / 2;\n    // console.log(\"🚀 ~ file: core.ts ~ line 219 ~ CropprCore ~ initializeBox ~ this.cropperEl\", this.cropperEl.offsetWidth)\n    // console.log(\"🚀 ~ file: core.ts ~ line 223 ~ CropprCore ~ initializeBox ~ x, y\", x, y)\n    box.move(x, y);\n    return box;\n  }\n  /**\n   * Draw visuals (border, handles, etc) for the current box.\n   */\n  redraw() {\n    // Round positional values to prevent subpixel coordinates, which can\n    // result in element that is rendered blurly\n    const width = Math.round(this.box.width()),\n      height = Math.round(this.box.height()),\n      x1 = Math.round(this.box.x1),\n      y1 = Math.round(this.box.y1),\n      x2 = Math.round(this.box.x2),\n      y2 = Math.round(this.box.y2);\n    window.requestAnimationFrame(() => {\n      // Update region element\n      if (!this.regionEl) return;\n      this.regionEl.style.transform = `translate(${x1}px, ${y1}px)`;\n      this.regionEl.style.width = width + 'px';\n      this.regionEl.style.height = height + 'px';\n      // Update clipped image element\n      this.imageClippedEl.style.clip = `rect(${y1}px, ${x2}px, ${y2}px, ${x1}px)`;\n      // Determine which handle to bring forward. The following code\n      // calculates the quadrant the box is in using bitwise operators.\n      // Reference: https://stackoverflow.com/questions/9718059\n      const center = this.box.getAbsolutePoint([0.5, 0.5]);\n      const xSign = center[0] - this.cropperEl.offsetWidth / 2 >> 31;\n      const ySign = center[1] - this.cropperEl.offsetHeight / 2 >> 31;\n      const quadrant = (xSign ^ ySign) + ySign + ySign + 4;\n      // The following equation calculates which handle index to bring\n      // forward. The equation is derived using algebra (if youre curious)\n      const foregroundHandleIndex = -2 * quadrant + 8;\n      // Update handle positions\n      for (let i = 0; i < this.handles.length; i++) {\n        let handle = this.handles[i];\n        // Calculate handle position\n        const handleWidth = handle.el.offsetWidth;\n        const handleHeight = handle.el.offsetHeight;\n        const left = x1 + width * handle.position[0] - handleWidth / 2;\n        const top = y1 + height * handle.position[1] - handleHeight / 2;\n        // Apply new position. The positional values are rounded to\n        // prevent subpixel positions which can result in a blurry element\n        handle.el.style.transform = `translate(${Math.round(left)}px, ${Math.round(top)}px)`;\n        handle.el.style.zIndex = foregroundHandleIndex == i ? 5 : 4;\n      }\n    });\n  }\n  /**\n   * Attach listeners for events emitted by the handles.\n   * Enables resizing of the region element.\n   */\n  attachHandlerEvents() {\n    const eventBus = this.eventBus;\n    eventBus.addEventListener('handlestart', this.onHandleMoveStart.bind(this));\n    eventBus.addEventListener('handlemove', this.onHandleMoveMoving.bind(this));\n    eventBus.addEventListener('handleend', this.onHandleMoveEnd.bind(this));\n  }\n  /**\n   * Attach event listeners for the crop region element.\n   * Enables dragging/moving of the region element.\n   */\n  attachRegionEvents() {\n    const eventBus = this.eventBus;\n    const self = this;\n    if (!this.regionEl) return;\n    this.regionEl.addEventListener('mousedown', onMouseDown);\n    eventBus.addEventListener('regionstart', this.onRegionMoveStart.bind(this));\n    eventBus.addEventListener('regionmove', this.onRegionMoveMoving.bind(this));\n    eventBus.addEventListener('regionend', this.onRegionMoveEnd.bind(this));\n    function onMouseDown(e) {\n      e.stopPropagation();\n      document.addEventListener('mouseup', onMouseUp);\n      document.addEventListener('mousemove', onMouseMove);\n      // Notify parent\n      eventBus.dispatchEvent(new CustomEvent('regionstart', {\n        detail: {\n          mouseX: e.clientX,\n          mouseY: e.clientY\n        }\n      }));\n    }\n    function onMouseMove(e) {\n      e.stopPropagation();\n      // Notify parent\n      eventBus.dispatchEvent(new CustomEvent('regionmove', {\n        detail: {\n          mouseX: e.clientX,\n          mouseY: e.clientY\n        }\n      }));\n    }\n    function onMouseUp(e) {\n      e.stopPropagation();\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('mousemove', onMouseMove);\n      // Notify parent\n      eventBus.dispatchEvent(new CustomEvent('regionend', {\n        detail: {\n          mouseX: e.clientX,\n          mouseY: e.clientY\n        }\n      }));\n    }\n  }\n  /**\n   * Attach event listeners for the overlay element.\n   * Enables the creation of a new selection by dragging an empty area.\n   */\n  attachOverlayEvents() {\n    const SOUTHEAST_HANDLE_IDX = 4;\n    const self = this;\n    let tmpBox = null;\n    this.overlayEl.addEventListener('mousedown', onMouseDown);\n    function onMouseDown(e) {\n      e.stopPropagation();\n      document.addEventListener('mouseup', onMouseUp);\n      document.addEventListener('mousemove', onMouseMove);\n      // Calculate mouse's position in relative to the container\n      const container = self.cropperEl.getBoundingClientRect();\n      const mouseX = e.clientX - container.left;\n      const mouseY = e.clientY - container.top;\n      // Create new box at mouse position\n      tmpBox = self.box;\n      self.box = new Box(mouseX, mouseY, mouseX + 1, mouseY + 1);\n      // Activate the bottom right handle\n      self.eventBus.dispatchEvent(new CustomEvent('handlestart', {\n        detail: {\n          handle: self.handles[SOUTHEAST_HANDLE_IDX]\n        }\n      }));\n    }\n    function onMouseMove(e) {\n      e.stopPropagation();\n      self.eventBus.dispatchEvent(new CustomEvent('handlemove', {\n        detail: {\n          mouseX: e.clientX,\n          mouseY: e.clientY\n        }\n      }));\n    }\n    function onMouseUp(e) {\n      e.stopPropagation();\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('mousemove', onMouseMove);\n      // If the new box has no width and height, it suggests that\n      // the user had just clicked on an empty area and did not drag\n      // a new box (ie. an accidental click). In this scenario, we\n      // simply replace it with the previous box.\n      if (self.box.width() === 1 && self.box.height() === 1) {\n        self.box = tmpBox;\n        return;\n      }\n      self.eventBus.dispatchEvent(new CustomEvent('handleend', {\n        detail: {\n          mouseX: e.clientX,\n          mouseY: e.clientY\n        }\n      }));\n    }\n  }\n  /**\n   * EVENT HANDLER\n   * Executes when user begins dragging a handle.\n   */\n  onHandleMoveStart(e) {\n    let handle = e.detail.handle;\n    // The origin point is the point where the box is scaled from.\n    // This is usually the opposite side/corner of the active handle.\n    const originPoint = [1 - handle.position[0], 1 - handle.position[1]];\n    let [originX, originY] = this.box.getAbsolutePoint(originPoint);\n    this.activeHandle = {\n      handle,\n      originPoint,\n      originX,\n      originY\n    };\n    // Trigger callback\n    if (this.options.onCropStart !== null) {\n      this.options.onCropStart(this.getValue());\n    }\n  }\n  /**\n   * EVENT HANDLER\n   * Executes on handle move. Main logic to manage the movement of handles.\n   */\n  onHandleMoveMoving(e) {\n    let {\n      mouseX,\n      mouseY\n    } = e.detail;\n    // Calculate mouse's position in relative to the container\n    let container = this.cropperEl.getBoundingClientRect();\n    mouseX = mouseX - container.left;\n    mouseY = mouseY - container.top;\n    // Ensure mouse is within the boundaries\n    if (mouseX < 0) {\n      mouseX = 0;\n    } else if (mouseX > container.width) {\n      mouseX = container.width;\n    }\n    if (mouseY < 0) {\n      mouseY = 0;\n    } else if (mouseY > container.height) {\n      mouseY = container.height;\n    }\n    // Bootstrap helper variables\n    let origin = this.activeHandle.originPoint.slice();\n    const originX = this.activeHandle.originX;\n    const originY = this.activeHandle.originY;\n    const handle = this.activeHandle.handle;\n    const TOP_MOVABLE = handle.constraints[0] === 1;\n    const RIGHT_MOVABLE = handle.constraints[1] === 1;\n    const BOTTOM_MOVABLE = handle.constraints[2] === 1;\n    const LEFT_MOVABLE = handle.constraints[3] === 1;\n    const MULTI_AXIS = (LEFT_MOVABLE || RIGHT_MOVABLE) && (TOP_MOVABLE || BOTTOM_MOVABLE);\n    // Apply movement to respective sides according to the handle's\n    // constraint values.\n    let x1 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x1;\n    let x2 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x2;\n    let y1 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y1;\n    let y2 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y2;\n    x1 = LEFT_MOVABLE ? mouseX : x1;\n    x2 = RIGHT_MOVABLE ? mouseX : x2;\n    y1 = TOP_MOVABLE ? mouseY : y1;\n    y2 = BOTTOM_MOVABLE ? mouseY : y2;\n    // Check if the user dragged past the origin point. If it did,\n    // we set the flipped flag to true.\n    let [isFlippedX, isFlippedY] = [false, false];\n    if (LEFT_MOVABLE || RIGHT_MOVABLE) {\n      isFlippedX = LEFT_MOVABLE ? mouseX > originX : mouseX < originX;\n    }\n    if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n      isFlippedY = TOP_MOVABLE ? mouseY > originY : mouseY < originY;\n    }\n    // If it is flipped, we swap the coordinates and flip the origin point.\n    if (isFlippedX) {\n      const tmp = x1;\n      x1 = x2;\n      x2 = tmp; // Swap x1 and x2\n      origin[0] = 1 - origin[0]; // Flip origin x point\n    }\n\n    if (isFlippedY) {\n      const tmp = y1;\n      y1 = y2;\n      y2 = tmp; // Swap y1 and y2\n      origin[1] = 1 - origin[1]; // Flip origin y point\n    }\n    // Create new box object\n    let box = new Box(x1, y1, x2, y2);\n    // Maintain aspect ratio\n    if (this.options.aspectRatio) {\n      const ratio = this.options.aspectRatio;\n      let isVerticalMovement = false;\n      if (MULTI_AXIS) {\n        isVerticalMovement = mouseY > box.y1 + ratio * box.width() || mouseY < box.y2 - ratio * box.width();\n      } else if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n        isVerticalMovement = true;\n      }\n      const ratioMode = isVerticalMovement ? 'width' : 'height';\n      box.constrainToRatio(ratio, origin, ratioMode);\n    }\n    // Maintain minimum/maximum size\n    const min = this.options.minSize;\n    const max = this.options.maxSize;\n    box.constrainToSize(max.width, max.height, min.width, min.height, origin, this.options.aspectRatio);\n    // Constrain to boundary\n    const parentWidth = this.cropperEl.offsetWidth;\n    const parentHeight = this.cropperEl.offsetHeight;\n    box.constrainToBoundary(parentWidth, parentHeight, origin);\n    // Finally, update the visuals (border, handles, clipped image, etc)\n    this.box = box;\n    this.redraw();\n    // Trigger callback\n    if (this.options.onCropMove !== null) {\n      this.options.onCropMove(this.getValue());\n    }\n  }\n  /**\n   * EVENT HANDLER\n   * Executes on handle move end.\n   */\n  onHandleMoveEnd(e) {\n    // Trigger callback\n    if (this.options.onCropEnd !== null) {\n      this.options.onCropEnd(this.getValue());\n    }\n  }\n  /**\n   * EVENT HANDLER\n   * Executes when user starts moving the crop region.\n   */\n  onRegionMoveStart(e) {\n    let {\n      mouseX,\n      mouseY\n    } = e.detail;\n    // Calculate mouse's position in relative to the container\n    let container = this.cropperEl.getBoundingClientRect();\n    mouseX = mouseX - container.left;\n    mouseY = mouseY - container.top;\n    this.currentMove = {\n      offsetX: mouseX - this.box.x1,\n      offsetY: mouseY - this.box.y1\n    };\n    // Trigger callback\n    if (this.options.onCropStart !== null) {\n      this.options.onCropStart(this.getValue());\n    }\n  }\n  /**\n   * EVENT HANDLER\n   * Executes when user moves the crop region.\n   */\n  onRegionMoveMoving(e) {\n    let {\n      mouseX,\n      mouseY\n    } = e.detail;\n    let {\n      offsetX,\n      offsetY\n    } = this.currentMove;\n    // Calculate mouse's position in relative to the container\n    let container = this.cropperEl.getBoundingClientRect();\n    mouseX = mouseX - container.left;\n    mouseY = mouseY - container.top;\n    this.box.move(mouseX - offsetX, mouseY - offsetY);\n    // Ensure box is within the boundaries\n    if (this.box.x1 < 0) {\n      this.box.move(0, null);\n    }\n    if (this.box.x2 > container.width) {\n      this.box.move(container.width - this.box.width(), null);\n    }\n    if (this.box.y1 < 0) {\n      this.box.move(null, 0);\n    }\n    if (this.box.y2 > container.height) {\n      this.box.move(null, container.height - this.box.height());\n    }\n    // Update visuals\n    this.redraw();\n    // Trigger callback\n    if (this.options.onCropMove !== null) {\n      this.options.onCropMove(this.getValue());\n    }\n  }\n  /**\n   * EVENT HANDLER\n   * Executes when user stops moving the crop region (mouse up).\n   */\n  onRegionMoveEnd(e) {\n    // Trigger callback\n    if (this.options.onCropEnd !== null) {\n      this.options.onCropEnd(this.getValue());\n    }\n  }\n  /**\n   * Calculate the value of the crop region.\n   */\n  getValue(mode = null) {\n    if (mode === null) {\n      mode = this.options.returnMode;\n    }\n    if (mode == 'real') {\n      const actualWidth = this.imageEl.naturalWidth;\n      const actualHeight = this.imageEl.naturalHeight;\n      const {\n        width: elementWidth,\n        height: elementHeight\n      } = this.imageEl.getBoundingClientRect();\n      const factorX = actualWidth / elementWidth;\n      const factorY = actualHeight / elementHeight;\n      return {\n        x: Math.round(this.box.x1 * factorX),\n        y: Math.round(this.box.y1 * factorY),\n        width: Math.round(this.box.width() * factorX),\n        height: Math.round(this.box.height() * factorY)\n      };\n    } else if (mode == 'ratio') {\n      const {\n        width: elementWidth,\n        height: elementHeight\n      } = this.imageEl.getBoundingClientRect();\n      return {\n        x: round(this.box.x1 / elementWidth, 3),\n        y: round(this.box.y1 / elementHeight, 3),\n        width: round(this.box.width() / elementWidth, 3),\n        height: round(this.box.height() / elementHeight, 3)\n      };\n    } else if (mode == 'raw') {\n      return {\n        x: Math.round(this.box.x1),\n        y: Math.round(this.box.y1),\n        width: Math.round(this.box.width()),\n        height: Math.round(this.box.height())\n      };\n    }\n  }\n  /**\n   * Parse user options and set default values.\n   */\n  static parseOptions(opts) {\n    const defaults = {\n      aspectRatio: null,\n      maxSize: {\n        width: null,\n        height: null\n      },\n      minSize: {\n        width: null,\n        height: null\n      },\n      startSize: {\n        width: 100,\n        height: 100,\n        unit: '%'\n      },\n      returnMode: 'real',\n      onInitialize: null,\n      onCropStart: null,\n      onCropMove: null,\n      onCropEnd: null\n    };\n    // Parse aspect ratio\n    let aspectRatio = null;\n    if (opts.aspectRatio !== undefined) {\n      if (typeof opts.aspectRatio === 'number') {\n        aspectRatio = opts.aspectRatio;\n      } else if (opts.aspectRatio instanceof Array) {\n        aspectRatio = opts.aspectRatio[1] / opts.aspectRatio[0];\n      }\n    }\n    // Parse max width/height\n    let maxSize = null;\n    if (opts.maxSize !== undefined && opts.maxSize !== null) {\n      maxSize = {\n        width: opts.maxSize[0] || null,\n        height: opts.maxSize[1] || null,\n        unit: opts.maxSize[2] || 'px'\n      };\n    }\n    // Parse min width/height\n    let minSize = null;\n    if (opts.minSize !== undefined && opts.minSize !== null) {\n      minSize = {\n        width: opts.minSize[0] || null,\n        height: opts.minSize[1] || null,\n        unit: opts.minSize[2] || 'px'\n      };\n    }\n    // Parse start size\n    let startSize = null;\n    if (opts.startSize !== undefined && opts.startSize !== null) {\n      startSize = {\n        width: opts.startSize[0] || null,\n        height: opts.startSize[1] || null,\n        unit: opts.startSize[2] || '%'\n      };\n    }\n    // Parse callbacks\n    let onInitialize = null;\n    if (typeof opts.onInitialize === 'function') {\n      onInitialize = opts.onInitialize;\n    }\n    let onCropStart = null;\n    if (typeof opts.onCropStart === 'function') {\n      onCropStart = opts.onCropStart;\n    }\n    let onCropEnd = null;\n    if (typeof opts.onCropEnd === 'function') {\n      onCropEnd = opts.onCropEnd;\n    }\n    let onCropMove = null;\n    if (typeof opts.onUpdate === 'function') {\n      // DEPRECATED: onUpdate is deprecated to create a more uniform\n      // callback API, such as: onCropStart, onCropMove, onCropEnd\n      console.warn('Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead.');\n      onCropMove = opts.onUpdate;\n    }\n    if (typeof opts.onCropMove === 'function') {\n      onCropMove = opts.onCropMove;\n    }\n    // Parse returnMode value\n    let returnMode = null;\n    if (opts.returnMode !== undefined) {\n      const s = opts.returnMode.toLowerCase();\n      if (['real', 'ratio', 'raw'].indexOf(s) === -1) {\n        throw 'Invalid return mode.';\n      }\n      returnMode = s;\n    }\n    // Create function to convert % values to pixels\n    const convertToPixels = function (container) {\n      const width = container.offsetWidth;\n      const height = container.offsetHeight;\n      // Convert sizes\n      const sizeKeys = ['maxSize', 'minSize', 'startSize'];\n      for (let i = 0; i < sizeKeys.length; i++) {\n        const key = sizeKeys[i];\n        if (this[key] !== null) {\n          if (this[key].unit == '%') {\n            if (this[key].width !== null) {\n              this[key].width = this[key].width / 100 * width;\n            }\n            if (this[key].height !== null) {\n              this[key].height = this[key].height / 100 * height;\n            }\n          }\n          delete this[key].unit;\n        }\n      }\n    };\n    const defaultValue = (v, d) => v !== null ? v : d;\n    return {\n      aspectRatio: defaultValue(aspectRatio, defaults.aspectRatio),\n      maxSize: defaultValue(maxSize, defaults.maxSize),\n      minSize: defaultValue(minSize, defaults.minSize),\n      startSize: defaultValue(startSize, defaults.startSize),\n      returnMode: defaultValue(returnMode, defaults.returnMode),\n      onInitialize: defaultValue(onInitialize, defaults.onInitialize),\n      onCropStart: defaultValue(onCropStart, defaults.onCropStart),\n      onCropMove: defaultValue(onCropMove, defaults.onCropMove),\n      onCropEnd: defaultValue(onCropEnd, defaults.onCropEnd),\n      convertToPixels: convertToPixels\n    };\n  }\n}\n/**\n * HELPER FUNCTIONS\n */\nfunction round(value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\n/**\n * Croppr.js\n * https://github.com/jamesssooi/Croppr.js\n *\n * A JavaScript image cropper that's lightweight, awesome, and has\n * zero dependencies.\n *\n * (C) 2017 James Ooi. Released under the MIT License.\n */\n/**\n * This class is a wrapper for CropprCore that merely implements the main\n * interfaces for the Croppr instance. Look into CropprCore for all the\n * main logic.\n */\nclass Croppr extends CropprCore {\n  /**\n   * @constructor\n   * Calls the CropprCore's constructor.\n   */\n  constructor(element, options, _deferred = false) {\n    super(element, options, _deferred);\n  }\n  /**\n   * Gets the value of the crop region.\n   * @param {String} [mode] Which mode of calculation to use: 'real', 'ratio' or\n   *      'raw'.\n   */\n  getValue(mode) {\n    return super.getValue(mode);\n  }\n  /**\n   * Changes the image src.\n   * @param {String} src\n   */\n  setImage(src) {\n    return super.setImage(src);\n  }\n  /**\n   * Destroys the Croppr instance\n   */\n  destroy() {\n    return super.destroy();\n  }\n  /**\n   * Moves the crop region to a specified coordinate.\n   * @param {Number} x\n   * @param {Number} y\n   */\n  moveTo(x, y) {\n    this.box.move(x, y);\n    this.redraw();\n    // Call the callback\n    if (this.options.onCropEnd !== null) {\n      this.options.onCropEnd(this.getValue());\n    }\n    return this;\n  }\n  /**\n   * Resizes the crop region to a specified width and height.\n   * @param {Number} width\n   * @param {Number} height\n   * @param {Array} origin The origin point to resize from.\n   *      Defaults to [0.5, 0.5] (center).\n   */\n  resizeTo(width, height, origin = [0.5, 0.5]) {\n    this.box.resize(width, height, origin);\n    //////////////////////////////////////////////////////////////////\n    const parentWidth = this.cropperEl.offsetWidth;\n    const parentHeight = this.cropperEl.offsetHeight;\n    this.box.constrainToBoundary(parentWidth, parentHeight, [0.5, 0.5]);\n    ///////////////////////////////////////////////////////////////////\n    this.redraw();\n    // Call the callback\n    if (this.options.onCropEnd !== null) {\n      this.options.onCropEnd(this.getValue());\n    }\n    return this;\n  }\n  /**\n   * Scale the crop region by a factor.\n   * @param {Number} factor\n   * @param {Array} origin The origin point to resize from.\n   *      Defaults to [0.5, 0.5] (center).\n   */\n  scaleBy(factor, origin = [0.5, 0.5]) {\n    this.box.scale(factor, origin);\n    this.redraw();\n    // Call the callback\n    if (this.options.onCropEnd !== null) {\n      this.options.onCropEnd(this.getValue());\n    }\n    return this;\n  }\n  /**\n   * Resets the crop region to the initial settings.\n   */\n  reset(newOptions) {\n    if (newOptions) {\n      this.options = {\n        ...this.options,\n        newOptions\n      };\n    }\n    this.box = this.initializeBox(this.options);\n    // console.log('🚀 ~ file: croppr.ts ~ line 110 ~ Croppr ~ reset ~ this.box', this.box);\n    this.redraw();\n    // Call the callback\n    if (this.options.onCropEnd !== null) {\n      this.options.onCropEnd(this.getValue());\n    }\n    return this;\n  }\n  enableVisibility(state) {\n    let croppContainer = document.querySelector(\".croppr-container\");\n    if (!croppContainer) throw new Error(\"THere is not any croppr\");\n    if (state) {\n      croppContainer.style.display = \"block\";\n    } else {\n      croppContainer.style.display = \"none\";\n    }\n  }\n}\nclass CropperWrapperComponent {\n  constructor() {\n    this.imageSrc = '';\n    this.croppr = null;\n    this.croppSize = {\n      width: 150,\n      height: 150\n    };\n    this.croppUpdate = new EventEmitter();\n  }\n  onKeyDown() {\n    if (!this.croppr) return;\n    this.croppr.options.aspectRatio = 1.0;\n  }\n  onKeyUp() {\n    if (!this.croppr) return;\n    this.croppr.options.aspectRatio = null;\n  }\n  set _imageSrc(value) {\n    this.imageSrc = value;\n  }\n  set setSize(value) {\n    this.croppSize = value;\n    if (this.croppr) this.croppr.resizeTo(this.croppSize.width, this.croppSize.height);\n  }\n  ngOnInit() {}\n  ngAfterViewInit() {\n    this.croppr = new Croppr('#croppr', {\n      minSize: [32, 32, 'px'],\n      startSize: [this.croppSize.width, this.croppSize.height, 'px'],\n      onInitialize: data => {\n        this.croppUpdate.emit(data.getValue());\n      },\n      onCropEnd: data => {\n        this.croppUpdate.emit(data);\n      }\n    });\n  }\n  ngOnDestroy() {\n    if (!this.croppr) return;\n    this.croppr.destroy();\n  }\n}\nCropperWrapperComponent.ɵfac = function CropperWrapperComponent_Factory(t) {\n  return new (t || CropperWrapperComponent)();\n};\nCropperWrapperComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: CropperWrapperComponent,\n  selectors: [[\"lib-cropper-wrapper\"]],\n  hostBindings: function CropperWrapperComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"keydown.Control\", function CropperWrapperComponent_keydown_Control_HostBindingHandler($event) {\n        return ctx.onKeyDown($event);\n      }, false, i0.ɵɵresolveDocument)(\"keyup.Control\", function CropperWrapperComponent_keyup_Control_HostBindingHandler($event) {\n        return ctx.onKeyUp($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  inputs: {\n    _imageSrc: \"_imageSrc\",\n    setSize: \"setSize\"\n  },\n  outputs: {\n    croppUpdate: \"croppUpdate\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[\"id\", \"image-full\", \"id\", \"croppr\", 3, \"src\"]],\n  template: function CropperWrapperComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"img\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"src\", ctx.imageSrc, i0.ɵɵsanitizeUrl);\n    }\n  }\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CropperWrapperComponent, [{\n    type: Component,\n    args: [{\n      selector: 'lib-cropper-wrapper',\n      template: \"<img id=\\\"image-full\\\" [src]=\\\"this.imageSrc\\\" id=\\\"croppr\\\" />\\n\"\n    }]\n  }], function () {\n    return [];\n  }, {\n    onKeyDown: [{\n      type: HostListener,\n      args: ['document:keydown.Control', ['$event']]\n    }],\n    onKeyUp: [{\n      type: HostListener,\n      args: ['document:keyup.Control', ['$event']]\n    }],\n    _imageSrc: [{\n      type: Input\n    }],\n    setSize: [{\n      type: Input\n    }],\n    croppUpdate: [{\n      type: Output\n    }]\n  });\n})();\n\n// const Croppr = require('../../services/croppr-service')\nclass EditImageComponent {\n  constructor(chRef) {\n    this.chRef = chRef;\n    this.imageSrc = '';\n    this.color = '';\n    this.controlPanelIndex = 0;\n    this.showCrop = false;\n    this.observer = null;\n    this.allFormats = ['webp', 'jpeg', 'png'];\n    this.initialState = {};\n    this.state = {\n      quality: 92,\n      maxHeight: 1000,\n      maxWidth: 1000,\n      cropHeight: 150,\n      cropWidth: 150,\n      maintainAspectRatio: true,\n      format: 'jpeg',\n      arrayCopiedImages: [],\n      originImageSrc: ''\n    };\n    this.croppSize = {\n      width: 150,\n      height: 150\n    };\n    this.isMobile = false;\n    this.closeModal = new EventEmitter();\n  }\n  ngOnInit() {\n    this.state = JSON.parse(JSON.stringify({\n      ...this.state,\n      ...this.initialState\n    }));\n    this.isMobile = window.innerWidth < 800;\n  }\n  onCloseEditPanel(saveChanges = false) {\n    if (this.observer instanceof ResizeObserver) {\n      let imageCroperElRef = document.getElementById('image-croper');\n      let imageFullElRef = document.getElementById('image-full');\n      this.observer.unobserve(imageCroperElRef);\n      this.observer.unobserve(imageFullElRef);\n    }\n    this.showCrop = false;\n    if (saveChanges) this.closeModal.next({\n      state: this.state,\n      imageSrc: this.imageSrc\n    });else this.closeModal.next(null);\n  }\n  onControlPanelIndexChange(idex) {\n    this.controlPanelIndex = idex;\n  }\n  calculateSize() {\n    if (this.imageSrc && this.imageSrc.length) {\n      return Math.ceil(3 / 4 * this.imageSrc.length / 1024);\n    } else {\n      return \"\";\n    }\n  }\n  onChangeSize(changeHeight = false) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.imageSrc = yield convertImageUsingCanvas(_this.state.originImageSrc, changeHeight, _this.state);\n        _this.chRef.markForCheck();\n      } catch (error) {\n        console.error('🚀 ~ file: edit-image.component.ts ~ line 76 ~ EditImageComponent ~ onChangeSize ~ error', error);\n        _this.chRef.markForCheck();\n      }\n    })();\n  }\n  onChangeQuality() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this2.imageSrc = yield convertImageUsingCanvas(_this2.state.originImageSrc, false, _this2.state);\n        _this2.chRef.markForCheck();\n      } catch (error) {\n        console.error('🚀 ~ file: edit-image.component.ts ~ line 86 ~ EditImageComponent ~ onChangeQuality ~ error', error);\n        _this2.chRef.markForCheck();\n      }\n    })();\n  }\n  onChangeFormat() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this3.imageSrc = yield convertImageUsingCanvas(_this3.state.originImageSrc, false, _this3.state);\n        _this3.chRef.markForCheck();\n      } catch (error) {\n        console.error('🚀 ~ file: edit-image.component.ts ~ line 98 ~ EditImageComponent ~ onChangeFormat ~ error', error);\n        _this3.chRef.markForCheck();\n      }\n    })();\n  }\n  onRestore() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (_this4.state.arrayCopiedImages.length > 1) {\n          _this4.state.arrayCopiedImages.pop();\n          let newValue = _this4.state.arrayCopiedImages[_this4.state.arrayCopiedImages.length - 1];\n          _this4.state = {\n            ..._this4.state,\n            maxHeight: newValue.height,\n            maxWidth: newValue.width,\n            quality: newValue.quality,\n            format: newValue.format,\n            originImageSrc: newValue.originImageSrc,\n            basicFilters: newValue.basicFilters\n          };\n          _this4.imageSrc = newValue.lastImage;\n          _this4.chRef.markForCheck();\n        }\n      } catch (e) {\n        console.error('🚀 ~ file: edit-image.component.ts ~ line 126 ~ EditImageComponent ~ onRestore ~ e', e);\n      }\n    })();\n  }\n  onCroppUpdate(data) {\n    this.croppState = data;\n    this.state.cropHeight = data.height;\n    this.state.cropWidth = data.width;\n  }\n  onChangeCrop() {\n    this.croppSize = {\n      width: this.state.cropWidth,\n      height: this.state.cropHeight\n    };\n  }\n  onCrop() {\n    // const dataHolderRect = document.querySelector('.croppr-container').getBoundingClientRect();\n    const canvas = document.createElement('canvas');\n    return new Promise((resolve, reject) => {\n      let ctx = canvas.getContext('2d');\n      let image = new Image();\n      image.src = this.imageSrc;\n      image.onload = () => {\n        // let ratio = image.height / dataHolderRect.height;\n        let newWidth = this.croppState?.width;\n        let newHeight = this.croppState?.height;\n        canvas.height = newHeight;\n        canvas.width = newWidth;\n        ctx.drawImage(image, Math.abs(this.croppState?.x || 0), Math.abs(this.croppState?.y || 0), this.croppState?.width || 0, this.croppState?.height || 0, 0, 0, this.croppState?.width || 0, this.croppState?.height || 0);\n        return resolve(canvas.toDataURL(`image/${this.state.format}`, this.state.quality));\n      };\n      image.onerror = e => {\n        reject(e);\n      };\n    }).then(dataUri => {\n      this.imageSrc = dataUri;\n      this.showCrop = false;\n      this.state.maxWidth = canvas.width;\n      this.state.maxHeight = canvas.height;\n      this.state.originImageSrc = dataUri;\n      this.state.cropHeight = 150;\n      this.state.cropWidth = 150;\n      saveState(this.state, dataUri);\n      this.croppSize = {\n        width: 150,\n        height: 150\n      };\n      this.chRef.markForCheck();\n    }).catch(e => {\n      console.error(e);\n    });\n  }\n  onChangeFilters(data) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (!_this5.state.basicFilters) {\n          _this5.state.basicFilters = data;\n        } else {\n          _this5.state.basicFilters = {\n            ..._this5.state.basicFilters,\n            ...data\n          };\n        }\n        _this5.imageSrc = yield convertImageUsingCanvas(_this5.state.originImageSrc, false, _this5.state);\n        _this5.chRef.markForCheck();\n      } catch (e) {\n        console.error('🚀 ~ file: edit-image.component.ts ~ line 250 ~ EditImageComponent ~ onChangeFilters ~ e', e);\n      }\n    })();\n  }\n}\nEditImageComponent.ɵfac = function EditImageComponent_Factory(t) {\n  return new (t || EditImageComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\nEditImageComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: EditImageComponent,\n  selectors: [[\"lib-edit-image\"]],\n  inputs: {\n    labels: \"labels\",\n    imageSrc: \"imageSrc\",\n    color: \"color\",\n    initialState: \"initialState\"\n  },\n  outputs: {\n    closeModal: \"closeModal\"\n  },\n  decls: 20,\n  vars: 13,\n  consts: [[\"id\", \"popup\", 1, \"popup\"], [2, \"flex-direction\", \"row\", \"box-sizing\", \"border-box\", \"display\", \"flex\", \"place-content\", \"center flex-end\", \"align-items\", \"center\", \"padding\", \"0px 16px\"], [1, \"icon-btn\", 3, \"click\"], [1, \"material-icons\"], [1, \"image-container\"], [1, \"image-holder-full\"], [\"id\", \"image-full\", 3, \"src\"], [3, \"setSize\", \"_imageSrc\", \"croppUpdate\", 4, \"ngIf\"], [1, \"control-panel\"], [3, \"color\", \"_labels\", \"indexActivatedChange\"], [4, \"ngIf\"], [1, \"icon-btn\", 2, \"position\", \"absolute\", \"right\", \"10px\", \"top\", \"30px\", 3, \"title\", \"disabled\", \"click\"], [2, \"flex-direction\", \"row\", \"box-sizing\", \"border-box\", \"display\", \"flex\", \"place-content\", \"center space-between\", \"align-items\", \"center\", \"margin-top\", \"8px\"], [1, \"save-btn\", 3, \"click\"], [\"class\", \"caption image-caption\", 3, \"ngStyle\", 4, \"ngIf\"], [3, \"setSize\", \"_imageSrc\", \"croppUpdate\"], [2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"margin-bottom\", \"8px\"], [2, \"display\", \"flex\", \"align-items\", \"center\"], [\"type\", \"checkbox\", 2, \"margin-bottom\", \"3px\", 3, \"ngModel\", \"ngModelChange\"], [1, \"item-panel\", 2, \"margin-left\", \"4px\"], [2, \"display\", \"flex\", \"width\", \"100%\", \"justify-content\", \"space-between\"], [1, \"item-panel\"], [2, \"flex-direction\", \"row\", \"box-sizing\", \"border-box\", \"display\", \"flex\", \"place-content\", \"flex-start\", \"align-items\", \"flex-start\"], [\"type\", \"range\", \"min\", \"1\", \"max\", \"100\", \"value\", \"50\", 1, \"input-range\", 3, \"readonly\", \"disabled\", \"ngStyle\", \"ngModel\", \"change\", \"ngModelChange\"], [1, \"item-panel\", 2, \"display\", \"flex\", \"width\", \"100%\", \"justify-content\", \"space-between\"], [\"type\", \"checkbox\", 3, \"readonly\", \"disabled\", \"ngModel\", \"ngModelChange\"], [1, \"caption\"], [2, \"margin-top\", \"8px !important\", \"flex-flow\", \"row wrap\", \"box-sizing\", \"border-box\", \"display\", \"flex\", \"place-content\", \"flex-start space-between\", \"align-items\", \"flex-start\"], [1, \"form-field\", 2, \"max-width\", \"48%\", \"width\", \"48%\"], [\"type\", \"number\", 3, \"readonly\", \"disabled\", \"placeholder\", \"ngModel\", \"min\", \"max\", \"change\", \"ngModelChange\"], [2, \"margin-top\", \"8px !important\", \"flex-direction\", \"row\", \"box-sizing\", \"border-box\", \"display\", \"flex\", \"place-content\", \"flex-start\", \"align-items\", \"flex-start\"], [1, \"form-field\", 2, \"width\", \"100%\"], [3, \"disabled\", \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"form-field\", 2, \"max-width\", \"48%\", \"width\", \"48%\", \"margin-bottom\", \"8px\"], [\"type\", \"number\", 3, \"placeholder\", \"ngModel\", \"min\", \"max\", \"change\", \"ngModelChange\"], [2, \"margin-bottom\", \"4px !important\"], [\"title\", \"Cut the image\", 1, \"icon-btn\", 3, \"click\"], [3, \"filterState\", \"labels\", \"color\", \"changeFilter\"], [1, \"caption\", \"image-caption\", 3, \"ngStyle\"]],\n  template: function EditImageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function EditImageComponent_Template_button_click_2_listener() {\n        return ctx.onCloseEditPanel(false);\n      });\n      i0.ɵɵelementStart(3, \"span\", 3);\n      i0.ɵɵtext(4, \"clear\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5);\n      i0.ɵɵelement(7, \"img\", 6);\n      i0.ɵɵtemplate(8, EditImageComponent_lib_cropper_wrapper_8_Template, 1, 2, \"lib-cropper-wrapper\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 8)(10, \"lib-tabs\", 9);\n      i0.ɵɵlistener(\"indexActivatedChange\", function EditImageComponent_Template_lib_tabs_indexActivatedChange_10_listener($event) {\n        return ctx.onControlPanelIndexChange($event);\n      });\n      i0.ɵɵtemplate(11, EditImageComponent_ng_container_11_Template, 8, 6, \"ng-container\", 10);\n      i0.ɵɵtemplate(12, EditImageComponent_ng_container_12_Template, 2, 3, \"ng-container\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function EditImageComponent_Template_button_click_13_listener() {\n        return ctx.onRestore();\n      });\n      i0.ɵɵelementStart(14, \"span\", 3);\n      i0.ɵɵtext(15, \" refresh \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 12)(17, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function EditImageComponent_Template_button_click_17_listener() {\n        return ctx.onCloseEditPanel(true);\n      });\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(19, EditImageComponent_p_19_Template, 2, 6, \"p\", 14);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵstyleProp(\"display\", ctx.showCrop ? \"none\" : \"\");\n      i0.ɵɵproperty(\"src\", ctx.imageSrc, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showCrop);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"color\", ctx.color)(\"_labels\", i0.ɵɵpureFunction0(12, _c4));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.controlPanelIndex == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.controlPanelIndex == 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"title\", ctx.labels[\"Undo\"]);\n      i0.ɵɵproperty(\"disabled\", ctx.state.arrayCopiedImages.length <= 1);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.labels[\"Save\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.calculateSize());\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i1.NgStyle, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.RangeValueAccessor, i2.CheckboxControlValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.MinValidator, i2.MaxValidator, i2.NgModel, TabsComponent, BasicFiltersComponent, CropperWrapperComponent],\n  styles: [\".popup[_ngcontent-%COMP%]{width:100vw;max-height:100%;height:100%;overflow:auto;position:fixed;top:0;left:0;background-color:#000c;z-index:1000;padding:24px 16px;color:#fff;box-sizing:border-box;animation-name:show;animation-duration:.4s}.popup[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:50px;width:100%;flex-flow:row wrap;box-sizing:border-box;display:flex;place-content:flex-start center;align-items:flex-start}.popup[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-holder-full[_ngcontent-%COMP%]{height:auto;width:auto;position:relative;display:contents}.popup[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#fff}.popup[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle;max-height:650px;max-width:100%;object-fit:cover;object-position:center}@media (max-width: 1024px){.popup[_ngcontent-%COMP%]{background-color:#000000d9;padding:8px}.popup[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%}}@media (max-width: 599px){.popup[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0}}.popup[_ngcontent-%COMP%]   .control-panel[_ngcontent-%COMP%]{color:#fff;background-color:#000000eb;margin:0 16px;padding:16px;width:18rem;border-radius:8px;flex-direction:column;box-sizing:border-box;display:flex;place-content:stretch flex-start;align-items:stretch;max-width:100%;position:relative}@media (max-width: 599px){.popup[_ngcontent-%COMP%]   .control-panel[_ngcontent-%COMP%]{margin:8px 0;width:100%}}.popup[_ngcontent-%COMP%]   .control-panel[_ngcontent-%COMP%]   .title-panel[_ngcontent-%COMP%]{padding:0 4px;font-size:17px;font-weight:500;margin-bottom:16px!important}.popup[_ngcontent-%COMP%]   .control-panel[_ngcontent-%COMP%]   .item-panel[_ngcontent-%COMP%]{padding:0;font-size:14px;font-weight:500}.image-croper[_ngcontent-%COMP%]{position:absolute;width:180px;height:180px;min-height:64px;min-width:64px;border:2.5px solid #fafafa;box-sizing:border-box;resize:both;overflow:auto;opacity:0;border-radius:4px;overflow:hidden;z-index:10}.image-croper[_ngcontent-%COMP%]   #image-croper-header[_ngcontent-%COMP%]{padding:0;cursor:move;z-index:9;background-color:transparent;color:#fff;height:100%;display:grid;gap:0px;grid-template-columns:repeat(3,1fr);width:100%;box-sizing:border-box;position:absolute;top:50%;transform:translateY(-50%);opacity:.8}.image-croper[_ngcontent-%COMP%]   #image-croper-header[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#fff}.input-range[_ngcontent-%COMP%]{margin-bottom:16px;margin-top:4px}input[type=checkbox][_ngcontent-%COMP%]{cursor:pointer}.form-field[_ngcontent-%COMP%]{margin-bottom:16px}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;opacity:.92;margin-bottom:4px;display:block}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:34px;width:100%;box-sizing:border-box;border-radius:4px;border:none;padding:2px 8px;outline:none}.form-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:34px;width:100%;box-sizing:border-box;border-radius:4px;border:none;padding:2px 8px;outline:none;background-color:#fff}.save-btn[_ngcontent-%COMP%]{padding:0 8px;height:34px;box-sizing:border-box;background-color:#fff;color:#000;border:none;border-radius:4px;cursor:pointer}.save-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(EditImageComponent, [{\n    type: Component,\n    args: [{\n      selector: 'lib-edit-image',\n      template: \"<div id=\\\"popup\\\" class=\\\"popup\\\">\\n  <div\\n    style=\\\"\\n      flex-direction: row;\\n      box-sizing: border-box;\\n      display: flex;\\n      place-content: center flex-end;\\n      align-items: center;\\n      padding: 0px 16px;\\n    \\\"\\n  >\\n    <button class=\\\"icon-btn\\\" (click)=\\\"onCloseEditPanel(false)\\\">\\n      <span class=\\\"material-icons\\\">clear</span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"image-container\\\">\\n    <div class=\\\"image-holder-full\\\">\\n      <img id=\\\"image-full\\\" [src]=\\\"this.imageSrc\\\" [style.display]=\\\"showCrop ? 'none' : ''\\\" />\\n\\n      <lib-cropper-wrapper\\n        [setSize]=\\\"this.croppSize\\\"\\n        (croppUpdate)=\\\"onCroppUpdate($event)\\\"\\n        [_imageSrc]=\\\"this.imageSrc\\\"\\n        *ngIf=\\\"showCrop\\\"\\n      ></lib-cropper-wrapper>\\n    </div>\\n\\n    <div class=\\\"control-panel\\\">\\n      <lib-tabs [color]=\\\"this.color\\\" [_labels]=\\\"['Basic', 'Filters']\\\" (indexActivatedChange)=\\\"onControlPanelIndexChange($event)\\\">\\n        <ng-container *ngIf=\\\"controlPanelIndex == 0\\\">\\n          <ng-container *ngIf=\\\"!isMobile || (isMobile && !showCrop)\\\">\\n            <div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n              <p class=\\\"item-panel\\\">{{ labels['Quality'] }}</p>\\n              <p class=\\\"item-panel\\\">{{ this.state.quality + '%' }}</p>\\n            </div>\\n\\n            <div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n              <input\\n                [readonly]=\\\"showCrop\\\"\\n                [disabled]=\\\"showCrop\\\"\\n                class=\\\"input-range\\\"\\n                (change)=\\\"onChangeQuality()\\\"\\n                [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n                [(ngModel)]=\\\"this.state.quality\\\"\\n                type=\\\"range\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                value=\\\"50\\\"\\n              />\\n            </div>\\n\\n            <div class=\\\"item-panel\\\" style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n              {{ labels['Max dimensions'] }}\\n              <div style=\\\"display: flex; align-items: center\\\">\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  type=\\\"checkbox\\\"\\n                  [(ngModel)]=\\\"this.state.maintainAspectRatio\\\"\\n                  [style.color]=\\\"color\\\"\\n                />\\n                <span class=\\\"caption\\\">{{ labels['aspect-ratio'] }}</span>\\n              </div>\\n            </div>\\n\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-flow: row wrap;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start space-between;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%\\\">\\n                <label>{{ labels['max-width(px)'] }}</label>\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  (change)=\\\"onChangeSize(false)\\\"\\n                  placeholder=\\\"{{ labels['max-width(px)'] }}\\\"\\n                  [(ngModel)]=\\\"this.state.maxWidth\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%\\\">\\n                <label>{{ labels['max-height(px)'] }}</label>\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  (change)=\\\"onChangeSize(true)\\\"\\n                  placeholder=\\\"{{ labels['max-height(px)'] }}\\\"\\n                  [(ngModel)]=\\\"this.state.maxHeight\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n            </div>\\n\\n            <p class=\\\"item-panel\\\">{{ labels['Format'] }}</p>\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-direction: row;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"width: 100%\\\">\\n                <select [disabled]=\\\"showCrop\\\" [(ngModel)]=\\\"this.state.format\\\" (change)=\\\"onChangeFormat()\\\">\\n                  <option *ngFor=\\\"let formatItem of allFormats\\\" [value]=\\\"formatItem\\\">{{ formatItem }}</option>\\n                </select>\\n              </div>\\n            </div>\\n          </ng-container>\\n          <!-- <p class=\\\"item-panel\\\">{{ labels['Rotate'] }}</p>\\n\\n          <div\\n            style=\\\"\\n              margin-top: 8px !important;\\n              flex-direction: row;\\n              box-sizing: border-box;\\n              display: flex;\\n              place-content: flex-start;\\n              align-items: flex-start;\\n            \\\"\\n          >\\n            <button [disabled]=\\\"showCrop\\\" class=\\\"icon-btn\\\" style=\\\"padding-left: 0px\\\" (click)=\\\"onRotate(90)\\\">\\n              <span class=\\\"material-icons\\\"> rotate_left </span>\\n            </button>\\n            <button [disabled]=\\\"showCrop\\\" class=\\\"icon-btn\\\" (click)=\\\"onRestore()\\\" (click)=\\\"onRotate(-90)\\\">\\n              <span class=\\\"material-icons\\\"> rotate_right </span>\\n            </button>\\n          </div>\\n\\n          <hr />\\n          <br /> -->\\n\\n          <div style=\\\"display: flex; justify-content: space-between; margin-bottom: 8px\\\">\\n            <span style=\\\"display: flex; align-items: center\\\">\\n              <input type=\\\"checkbox\\\" [(ngModel)]=\\\"showCrop\\\" [style.color]=\\\"color\\\" style=\\\"margin-bottom: 3px\\\" />\\n              <span class=\\\"item-panel\\\" style=\\\"margin-left: 4px\\\">{{ labels['Crop'] }}</span>\\n            </span>\\n          </div>\\n\\n          <ng-container *ngIf=\\\"showCrop\\\">\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-flow: row wrap;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start space-between;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%; margin-bottom: 8px\\\">\\n                <label>{{ labels['width(px)'] }}</label>\\n                <input\\n                  (change)=\\\"onChangeCrop()\\\"\\n                  placeholder=\\\"{{ labels['width(px)'] }}\\\"\\n                  [(ngModel)]=\\\"state.cropWidth\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%; margin-bottom: 8px\\\">\\n                <label>{{ labels['height(px)'] }}</label>\\n                <input\\n                  (change)=\\\"onChangeCrop()\\\"\\n                  placeholder=\\\"{{ labels['height(px)'] }}\\\"\\n                  [(ngModel)]=\\\"state.cropHeight\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n            </div>\\n\\n            <p style=\\\"margin-bottom: 4px !important\\\">\\n              <button title=\\\"Cut the image\\\" class=\\\"icon-btn\\\" (click)=\\\"onCrop()\\\">\\n                <span class=\\\"material-icons\\\"> crop </span>\\n              </button>\\n            </p>\\n          </ng-container>\\n        </ng-container>\\n        <ng-container *ngIf=\\\"controlPanelIndex == 1\\\">\\n          <lib-basic-filters\\n            [filterState]=\\\"this.state.basicFilters\\\"\\n            (changeFilter)=\\\"onChangeFilters($event)\\\"\\n            [labels]=\\\"this.labels\\\"\\n            [color]=\\\"this.color\\\"\\n          ></lib-basic-filters>\\n        </ng-container>\\n      </lib-tabs>\\n\\n      <button\\n        title=\\\"{{ labels['Undo'] }}\\\"\\n        [disabled]=\\\"this.state.arrayCopiedImages.length <= 1\\\"\\n        style=\\\"position: absolute; right: 10px; top: 30px\\\"\\n        class=\\\"icon-btn\\\"\\n        (click)=\\\"onRestore()\\\"\\n      >\\n        <span class=\\\"material-icons\\\"> refresh </span>\\n      </button>\\n      <div\\n        style=\\\"\\n          flex-direction: row;\\n          box-sizing: border-box;\\n          display: flex;\\n          place-content: center space-between;\\n          align-items: center;\\n          margin-top: 8px;\\n        \\\"\\n      >\\n        <button class=\\\"save-btn\\\" (click)=\\\"onCloseEditPanel(true)\\\">{{ labels['Save'] }}</button>\\n\\n        <p\\n          *ngIf=\\\"this.calculateSize()\\\"\\n          class=\\\"caption image-caption\\\"\\n          [ngStyle]=\\\"{\\n            color: this.calculateSize() > 120 ? '#f44336' : 'unset',\\n            fontWeight: this.calculateSize() > 120 ? '500' : 'unset'\\n          }\\\"\\n        >\\n          size: {{ this.calculateSize() }}Kb &nbsp; {{ this.state.format }}\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\",\n      styles: [\".popup{width:100vw;max-height:100%;height:100%;overflow:auto;position:fixed;top:0;left:0;background-color:#000c;z-index:1000;padding:24px 16px;color:#fff;box-sizing:border-box;animation-name:show;animation-duration:.4s}.popup .image-container{margin-top:50px;margin-bottom:50px;width:100%;flex-flow:row wrap;box-sizing:border-box;display:flex;place-content:flex-start center;align-items:flex-start}.popup .image-container .image-holder-full{height:auto;width:auto;position:relative;display:contents}.popup .material-icons{color:#fff}.popup img{vertical-align:middle;max-height:650px;max-width:100%;object-fit:cover;object-position:center}@media (max-width: 1024px){.popup{background-color:#000000d9;padding:8px}.popup img{max-height:100%;max-width:100%}}@media (max-width: 599px){.popup img{margin:0}}.popup .control-panel{color:#fff;background-color:#000000eb;margin:0 16px;padding:16px;width:18rem;border-radius:8px;flex-direction:column;box-sizing:border-box;display:flex;place-content:stretch flex-start;align-items:stretch;max-width:100%;position:relative}@media (max-width: 599px){.popup .control-panel{margin:8px 0;width:100%}}.popup .control-panel .title-panel{padding:0 4px;font-size:17px;font-weight:500;margin-bottom:16px!important}.popup .control-panel .item-panel{padding:0;font-size:14px;font-weight:500}.image-croper{position:absolute;width:180px;height:180px;min-height:64px;min-width:64px;border:2.5px solid #fafafa;box-sizing:border-box;resize:both;overflow:auto;opacity:0;border-radius:4px;overflow:hidden;z-index:10}.image-croper #image-croper-header{padding:0;cursor:move;z-index:9;background-color:transparent;color:#fff;height:100%;display:grid;gap:0px;grid-template-columns:repeat(3,1fr);width:100%;box-sizing:border-box;position:absolute;top:50%;transform:translateY(-50%);opacity:.8}.image-croper #image-croper-header .material-icons{color:#fff}.input-range{margin-bottom:16px;margin-top:4px}input[type=checkbox]{cursor:pointer}.form-field{margin-bottom:16px}.form-field label{font-size:12px;opacity:.92;margin-bottom:4px;display:block}.form-field input{height:34px;width:100%;box-sizing:border-box;border-radius:4px;border:none;padding:2px 8px;outline:none}.form-field select{height:34px;width:100%;box-sizing:border-box;border-radius:4px;border:none;padding:2px 8px;outline:none;background-color:#fff}.save-btn{padding:0 8px;height:34px;box-sizing:border-box;background-color:#fff;color:#000;border:none;border-radius:4px;cursor:pointer}.save-btn:active{transform:scale(.95)}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }];\n  }, {\n    labels: [{\n      type: Input\n    }],\n    imageSrc: [{\n      type: Input\n    }],\n    color: [{\n      type: Input\n    }],\n    initialState: [{\n      type: Input\n    }],\n    closeModal: [{\n      type: Output\n    }]\n  });\n})();\nclass NgpImagePickerComponent {\n  constructor(chRef) {\n    this.chRef = chRef;\n    this.config = {\n      language: 'en',\n      objectFit: 'cover',\n      hideDeleteBtn: false,\n      hideDownloadBtn: false,\n      hideEditBtn: false,\n      hideAddBtn: false\n    };\n    this.state = {\n      quality: 92,\n      maxHeight: 1000,\n      maxWidth: 1000,\n      cropHeight: 150,\n      cropWidth: 150,\n      maintainAspectRatio: true,\n      format: 'jpeg',\n      arrayCopiedImages: [],\n      originImageSrc: ''\n    };\n    this.loadImage = false;\n    this.fileType = '';\n    this.urlImage = '';\n    this.uuidFilePicker = Date.now().toString(20);\n    this.showEditPanel = false;\n    this.imageName = 'download';\n    this.labels = labelEn;\n    this.arrayCopiedImages = [];\n    this.color = '#1e88e5';\n    this.imagePicker = null;\n    this.$imageChanged = new EventEmitter();\n    this.$imageOriginal = new EventEmitter();\n  }\n  set _imageSrc(value) {\n    if (value) {\n      this.parseToBase64(value).then(dataUri => {\n        this.imageSrc = dataUri;\n        this.state.originImageSrc = value;\n        this.state.arrayCopiedImages.push({\n          lastImage: dataUri,\n          width: this.state.maxWidth,\n          height: this.state.maxHeight,\n          quality: this.state.quality,\n          format: this.state.format,\n          originImageSrc: value\n        });\n        this.$imageOriginal.next(this.state.originImageSrc);\n        this.loadImage = true;\n        this.chRef.markForCheck();\n      }).catch(e => {\n        console.error('!!!!ERROR: ', e);\n      });\n    } else {\n      this.imageSrc = null;\n      this.state.originImageSrc = null;\n      this.loadImage = false;\n      this.state.arrayCopiedImages = [];\n      this.$imageOriginal.next(null);\n      this.state = {\n        ...this.state,\n        format: 'jpeg',\n        maxHeight: 1000,\n        maxWidth: 1000,\n        cropHeight: 150,\n        cropWidth: 150,\n        maintainAspectRatio: true\n      };\n      this.showEditPanel = false;\n      this.chRef.markForCheck();\n    }\n  }\n  set _config(value) {\n    this.processConfig(value);\n  }\n  ngOnInit() {\n    this.appendLinkIconsToHead();\n  }\n  appendLinkIconsToHead() {\n    let head = document.head;\n    let linkIcons = head.querySelector('#ngp-image-picker-icons-id');\n    if (linkIcons) return;\n    let link = document.createElement('link');\n    link.href = 'https://fonts.googleapis.com/icon?family=Material+Icons';\n    link.rel = 'stylesheet';\n    link.id = 'ngp-image-picker-icons-id';\n    head.appendChild(link);\n  }\n  onUpload(event) {\n    event.preventDefault();\n    this.imagePicker?.nativeElement.click();\n  }\n  handleFileSelect(evt) {\n    const files = evt.target?.files;\n    if (files) {\n      const file = files[0];\n      this.imageName = file.name.split('.')[0];\n      this.fileType = file.type;\n      if (!this.fileType.includes('image')) return;\n      this.urlImage = `data:${file.type};base64,`;\n      if (file) {\n        this.state.format = this.fileType.split('image/')[1];\n        const reader = new FileReader();\n        reader.onload = this.handleReaderLoaded.bind(this);\n        reader.readAsBinaryString(file);\n      }\n    }\n  }\n  handleReaderLoaded(readerEvt) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      const binaryString = readerEvt.target.result;\n      const base64textString = btoa(binaryString);\n      _this6.state.originImageSrc = _this6.urlImage + base64textString;\n      if (_this6.config.compressInitial) {\n        _this6.state = {\n          ..._this6.state,\n          quality: Math.min(_this6.config.compressInitial || 92, 100),\n          maintainAspectRatio: true,\n          format: 'jpeg'\n        };\n        _this6.imageSrc = yield convertImageUsingCanvas(_this6.urlImage + base64textString, false, _this6.state, {\n          getDimFromImage: true\n        });\n      } else {\n        _this6.imageSrc = _this6.urlImage + base64textString;\n        let img = document.createElement('img');\n        img.src = _this6.imageSrc;\n        img.onload = () => {\n          _this6.state.arrayCopiedImages = [];\n          _this6.state.maxHeight = img.height;\n          _this6.state.maxWidth = img.width;\n          _this6.state.arrayCopiedImages.push({\n            lastImage: _this6.imageSrc,\n            width: img.width,\n            height: img.height,\n            quality: _this6.state.quality,\n            format: _this6.state.format,\n            originImageSrc: _this6.state.originImageSrc\n          });\n        };\n      }\n      _this6.$imageChanged.next(_this6.imageSrc);\n      _this6.loadImage = true;\n      _this6.chRef.markForCheck();\n    })();\n  }\n  onOpenEditPanel() {\n    this.showEditPanel = true;\n  }\n  onCloseEditPanel(data) {\n    if (data) {\n      this.state = data.state;\n      this.imageSrc = data.imageSrc;\n      this.$imageChanged.next(this.imageSrc);\n    }\n    this.showEditPanel = false;\n  }\n  parseToBase64(imageUrl) {\n    let types = imageUrl.split('.');\n    let type = types[types.length - 1];\n    if (type && (type == 'png' || type == 'jpeg' || type == 'webp')) {\n      type = type;\n    } else {\n      type = 'jpeg';\n    }\n    this.state = {\n      ...this.state,\n      format: type\n    };\n    return new Promise((resolve, reject) => {\n      let img = new window.Image();\n      img.crossOrigin = \"Anonymous\";\n      this.state = {\n        ...this.state,\n        maxHeight: img.height,\n        maxWidth: img.width\n      };\n      img.onload = e => {\n        let canvas = document.createElement('canvas');\n        let ctx = canvas.getContext('2d');\n        if (!ctx) return;\n        let ratio = 1.0;\n        canvas.width = img.width * ratio;\n        canvas.height = img.height * ratio;\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        let dataURI = canvas.toDataURL(`image/${type}`, this.state.quality);\n        return resolve({\n          dataUri: dataURI,\n          width: canvas.width,\n          height: canvas.height\n        });\n      };\n      img.onerror = e => {\n        return reject(e.message || `Error loading the src = ${imageUrl}`);\n      };\n      img.src = imageUrl;\n    }).then(data => {\n      this.state = {\n        ...this.state,\n        maxHeight: data.height,\n        maxWidth: data.width\n      };\n      return data.dataUri;\n    });\n  }\n  processConfig(value) {\n    if (value && value.constructor == Object) {\n      this.config = {\n        ...this.config,\n        ...value\n      };\n      if (value.language != undefined) {\n        if (value.language == 'en') {\n          this.labels = {\n            ...labelEn\n          };\n        }\n        if (value.language == 'es') {\n          this.labels = {\n            ...labelEs\n          };\n        }\n        if (value.language == 'fr') {\n          this.labels = {\n            ...labelFr\n          };\n        }\n        if (value.language == 'de') {\n          this.labels = {\n            ...labelDe\n          };\n        }\n      }\n    }\n  }\n  calculateSize() {\n    if (this.imageSrc && this.imageSrc.length) {\n      return Math.ceil(3 / 4 * this.imageSrc.length / 1024);\n    } else {\n      return 0;\n    }\n  }\n  ////////////////////////////////////////////////\n  onRemove() {\n    this.imageSrc = null;\n    this.loadImage = false;\n    this.$imageOriginal.next(null);\n    this.$imageChanged.next(null);\n    this.state = {\n      ...this.state,\n      originImageSrc: '',\n      format: 'jpeg',\n      maxHeight: 1000,\n      maxWidth: 1000,\n      cropHeight: 150,\n      cropWidth: 150,\n      maintainAspectRatio: true,\n      arrayCopiedImages: [],\n      basicFilters: undefined,\n      quality: 92\n    };\n    this.showEditPanel = false;\n  }\n}\nNgpImagePickerComponent.ɵfac = function NgpImagePickerComponent_Factory(t) {\n  return new (t || NgpImagePickerComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\nNgpImagePickerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NgpImagePickerComponent,\n  selectors: [[\"ngp-image-picker\"]],\n  viewQuery: function NgpImagePickerComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c5, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imagePicker = _t.first);\n    }\n  },\n  inputs: {\n    color: \"color\",\n    _imageSrc: \"_imageSrc\",\n    _config: \"_config\"\n  },\n  outputs: {\n    $imageChanged: \"$imageChanged\",\n    $imageOriginal: \"$imageOriginal\"\n  },\n  decls: 3,\n  vars: 3,\n  consts: [[\"class\", \"place-image\", 4, \"ngIf\"], [3, \"imageSrc\", \"initialState\", \"labels\", \"color\", \"closeModal\", 4, \"ngIf\"], [1, \"place-image\"], [1, \"image-holder\", 3, \"ngStyle\"], [1, \"icon-btn\", \"image-upload-btn\", 3, \"title\", \"click\"], [1, \"material-icons\"], [\"type\", \"file\", 2, \"display\", \"none\", 3, \"id\", \"change\"], [\"imagePicker\", \"\"], [1, \"image-holder-loaded\", 3, \"ngStyle\"], [\"alt\", \"image-loaded\", 3, \"src\", \"ngStyle\"], [\"class\", \"caption image-caption\", 3, \"ngStyle\", 4, \"ngIf\"], [1, \"editing-bar-btn\", 2, \"flex-direction\", \"row\", \"box-sizing\", \"border-box\", \"display\", \"flex\", \"place-content\", \"flex-start\", \"align-items\", \"flex-start\"], [\"class\", \"icon-btn\", \"id\", \"upload-img\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"class\", \"icon-btn\", \"id\", \"edit-img\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"id\", \"download-img\", 3, \"title\", \"href\", \"download\", 4, \"ngIf\"], [\"class\", \"icon-btn\", \"id\", \"delete-img\", 3, \"title\", \"click\", 4, \"ngIf\"], [1, \"caption\", \"image-caption\", 3, \"ngStyle\"], [\"id\", \"upload-img\", 1, \"icon-btn\", 3, \"title\", \"click\"], [\"id\", \"edit-img\", 1, \"icon-btn\", 3, \"title\", \"click\"], [\"id\", \"download-img\", 3, \"title\", \"href\", \"download\"], [\"id\", \"delete-img\", 1, \"icon-btn\", 3, \"title\", \"click\"], [3, \"imageSrc\", \"initialState\", \"labels\", \"color\", \"closeModal\"]],\n  template: function NgpImagePickerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, NgpImagePickerComponent_div_0_Template, 7, 8, \"div\", 0);\n      i0.ɵɵtemplate(1, NgpImagePickerComponent_div_1_Template, 11, 17, \"div\", 0);\n      i0.ɵɵtemplate(2, NgpImagePickerComponent_lib_edit_image_2_Template, 1, 4, \"lib-edit-image\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.loadImage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loadImage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showEditPanel);\n    }\n  },\n  dependencies: [i1.NgIf, i1.NgStyle, EditImageComponent],\n  styles: [\"ngp-image-picker p{margin:0!important;padding:0!important}ngp-image-picker .place-image{flex-direction:column;box-sizing:border-box;display:flex;place-content:flex-start;align-items:flex-start}ngp-image-picker .place-image .image-holder{flex-direction:column;display:flex;place-content:center;align-items:center;position:relative;border-radius:16px;max-width:100%!important;box-sizing:border-box;border:2px rgba(0,0,0,.3) solid;background-color:#fcfcfc}@media (max-width: 599px){ngp-image-picker .place-image .image-holder{max-width:100%!important;max-height:250px!important}}ngp-image-picker .place-image .image-holder .image-upload-btn{transition:all .5s ease;position:relative;opacity:.85;width:50px;height:50px;color:#424242}ngp-image-picker .place-image .image-holder .image-upload-btn .material-icons{font-size:50px;width:50px;height:50px;line-height:50px;color:#424242}@media (max-width: 599px){ngp-image-picker .place-image .image-holder .image-upload-btn{opacity:1;width:30px;height:30px}ngp-image-picker .place-image .image-holder .image-upload-btn .material-icons{font-size:30px;width:30px;height:30px;line-height:30px}}ngp-image-picker .place-image .image-holder:hover .image-upload-btn{opacity:1;transition:all .5s ease}ngp-image-picker .place-image .image-holder-loaded{flex-direction:column;display:flex;place-content:center;align-items:center;position:relative;max-width:100%!important;border-radius:4px;box-sizing:border-box;padding:2px}ngp-image-picker .place-image .image-holder-loaded .image-caption{position:absolute;right:0;bottom:-22px}ngp-image-picker .place-image .image-holder-loaded img{height:100%;max-height:100%;width:100%;max-width:100%;object-position:center;background:black}@media (max-width: 599px){ngp-image-picker .place-image .image-holder-loaded{max-height:195px!important}}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn{transition:all .5s ease;position:relative;opacity:.85;width:50px;height:50px;color:#424242}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn .material-icons{font-size:50px;width:50px;height:50px;line-height:50px;color:#424242}@media (max-width: 599px){ngp-image-picker .place-image .image-holder-loaded .image-upload-btn{opacity:1;width:30px;height:30px}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn .material-icons{font-size:30px;width:30px;height:30px;line-height:30px}}ngp-image-picker .place-image .image-holder-loaded:hover .image-upload-btn{opacity:1;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn{margin-top:2px}ngp-image-picker .place-image .editing-bar-btn .material-icons-button{height:20px;line-height:20px;width:24px}ngp-image-picker .place-image .editing-bar-btn .material-icons{line-height:20px!important;font-size:20px!important;width:20px!important;height:20px!important}ngp-image-picker .place-image .editing-bar-btn button{margin:4px;color:#424242;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn button:hover{transition:all .25s ease-in}ngp-image-picker .place-image .editing-bar-btn a{margin:4px;color:#424242;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn a:hover{transition:all .25s ease-in}@keyframes show{0%{top:-100vh;opacity:0}to{top:0;opacity:1}}ngp-image-picker .btn{padding:4px 8px;border-radius:4px;cursor:pointer}ngp-image-picker .btn .material-icons{color:#000000d1}ngp-image-picker .icon-btn{display:flex;justify-content:center;align-items:center;border:none;background-color:inherit;border-radius:50%;cursor:pointer}ngp-image-picker .icon-btn :active{transform:scale(.95)}ngp-image-picker .caption{font-size:11px;margin-top:2px!important;margin-bottom:0!important}ngp-image-picker button[disabled]{filter:brightness(.5);cursor:not-allowed}ngp-image-picker .croppr-container *{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}ngp-image-picker .croppr-container img{vertical-align:middle;max-width:100%;max-height:650px;object-fit:cover;object-position:center}ngp-image-picker .croppr{position:relative;display:inline-block}ngp-image-picker .croppr-overlay{background:rgba(0,0,0,.5);position:absolute;inset:0;z-index:1;cursor:crosshair}ngp-image-picker .croppr-region{border:1px dashed rgba(0,0,0,.5);position:absolute;z-index:3;cursor:move;top:0;display:grid;gap:0px;grid-template-columns:repeat(3,1fr)}ngp-image-picker .croppr-imageClipped{position:absolute;inset:0;z-index:2;pointer-events:none}ngp-image-picker .croppr-handle{border:1px solid #ccc;background-color:#fafafa;width:14px;height:14px;position:absolute;z-index:4;top:0;border-radius:50%}\\n\"],\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgpImagePickerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngp-image-picker',\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div *ngIf=\\\"!loadImage\\\" class=\\\"place-image\\\">\\n  <div\\n    class=\\\"image-holder\\\"\\n    [ngStyle]=\\\"{\\n      width: this.config.width,\\n      height: this.config.height,\\n      borderRadius: this.config.borderRadius,\\n      aspectRatio: this.config.aspectRatio\\n    }\\\"\\n  >\\n    <button title=\\\"{{ labels['Upload a image'] }}\\\" class=\\\"icon-btn image-upload-btn\\\" (click)=\\\"onUpload($event)\\\">\\n      <!--  <span class=\\\"material-icons\\\">add_a_photo</mat-icon> -->\\n      <span class=\\\"material-icons\\\">add_a_photo</span>\\n    </button>\\n\\n    <input #imagePicker type=\\\"file\\\" style=\\\"display: none\\\" [id]=\\\"'filePicker-' + this.uuidFilePicker\\\" (change)=\\\"handleFileSelect($event)\\\" />\\n  </div>\\n</div>\\n<div *ngIf=\\\"loadImage\\\" class=\\\"place-image\\\">\\n  <div\\n    class=\\\"image-holder-loaded\\\"\\n    [ngStyle]=\\\"{\\n      width: this.config.width,\\n      height: this.config.height,\\n      borderRadius: this.config.borderRadius,\\n      aspectRatio: this.config.aspectRatio\\n    }\\\"\\n  >\\n    <img\\n      [src]=\\\"this.imageSrc\\\"\\n      alt=\\\"image-loaded\\\"\\n      [ngStyle]=\\\"{ borderRadius: this.config.borderRadius, objectFit: this.config.objectFit }\\\"\\n    />\\n    <input #imagePicker type=\\\"file\\\" style=\\\"display: none\\\" [id]=\\\"'filePicker-' + this.uuidFilePicker\\\" (change)=\\\"handleFileSelect($event)\\\" />\\n  </div>\\n  <p\\n    *ngIf=\\\"this.calculateSize()\\\"\\n    class=\\\"caption image-caption\\\"\\n    [ngStyle]=\\\"{\\n      color: this.calculateSize() > 120 ? '#f44336' : 'unset',\\n      fontWeight: this.calculateSize() > 120 ? '500' : 'unset'\\n    }\\\"\\n  >\\n    size: {{ this.calculateSize() }}Kb &nbsp; {{ this.state.format }}\\n  </p>\\n\\n  <div\\n    style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\"\\n    class=\\\"editing-bar-btn\\\"\\n  >\\n    <button\\n      class=\\\"icon-btn\\\"\\n      id=\\\"upload-img\\\"\\n      *ngIf=\\\"!this.config.hideAddBtn\\\"\\n      title=\\\"{{ labels['Upload a image'] }}\\\"\\n      (click)=\\\"onUpload($event)\\\"\\n    >\\n      <span class=\\\"material-icons\\\">add_a_photo</span>\\n    </button>\\n    <button\\n      class=\\\"icon-btn\\\"\\n      id=\\\"edit-img\\\"\\n      *ngIf=\\\"!this.config.hideEditBtn\\\"\\n      title=\\\"{{ labels['Open the editor panel'] }}\\\"\\n      (click)=\\\"onOpenEditPanel()\\\"\\n    >\\n      <span class=\\\"material-icons\\\">edit</span>\\n    </button>\\n    <a\\n      id=\\\"download-img\\\"\\n      *ngIf=\\\"!this.config.hideDownloadBtn\\\"\\n      title=\\\"{{ labels['Download the image'] }}\\\"\\n      [href]=\\\"this.imageSrc\\\"\\n      download=\\\"{{ imageName }}\\\"\\n    >\\n      <span class=\\\"material-icons\\\">cloud_download</span>\\n    </a>\\n    <button class=\\\"icon-btn\\\" id=\\\"delete-img\\\" *ngIf=\\\"!this.config.hideDeleteBtn\\\" title=\\\"{{ labels['Remove'] }}\\\" (click)=\\\"onRemove()\\\">\\n      <span class=\\\"material-icons\\\">delete</span>\\n    </button>\\n  </div>\\n</div>\\n\\n<lib-edit-image\\n  *ngIf=\\\"showEditPanel\\\"\\n  [imageSrc]=\\\"this.imageSrc\\\"\\n  [initialState]=\\\"this.state\\\"\\n  [labels]=\\\"this.labels\\\"\\n  [color]=\\\"this.color\\\"\\n  (closeModal)=\\\"this.onCloseEditPanel($event)\\\"\\n></lib-edit-image>\\n\",\n      styles: [\"ngp-image-picker p{margin:0!important;padding:0!important}ngp-image-picker .place-image{flex-direction:column;box-sizing:border-box;display:flex;place-content:flex-start;align-items:flex-start}ngp-image-picker .place-image .image-holder{flex-direction:column;display:flex;place-content:center;align-items:center;position:relative;border-radius:16px;max-width:100%!important;box-sizing:border-box;border:2px rgba(0,0,0,.3) solid;background-color:#fcfcfc}@media (max-width: 599px){ngp-image-picker .place-image .image-holder{max-width:100%!important;max-height:250px!important}}ngp-image-picker .place-image .image-holder .image-upload-btn{transition:all .5s ease;position:relative;opacity:.85;width:50px;height:50px;color:#424242}ngp-image-picker .place-image .image-holder .image-upload-btn .material-icons{font-size:50px;width:50px;height:50px;line-height:50px;color:#424242}@media (max-width: 599px){ngp-image-picker .place-image .image-holder .image-upload-btn{opacity:1;width:30px;height:30px}ngp-image-picker .place-image .image-holder .image-upload-btn .material-icons{font-size:30px;width:30px;height:30px;line-height:30px}}ngp-image-picker .place-image .image-holder:hover .image-upload-btn{opacity:1;transition:all .5s ease}ngp-image-picker .place-image .image-holder-loaded{flex-direction:column;display:flex;place-content:center;align-items:center;position:relative;max-width:100%!important;border-radius:4px;box-sizing:border-box;padding:2px}ngp-image-picker .place-image .image-holder-loaded .image-caption{position:absolute;right:0;bottom:-22px}ngp-image-picker .place-image .image-holder-loaded img{height:100%;max-height:100%;width:100%;max-width:100%;object-position:center;background:black}@media (max-width: 599px){ngp-image-picker .place-image .image-holder-loaded{max-height:195px!important}}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn{transition:all .5s ease;position:relative;opacity:.85;width:50px;height:50px;color:#424242}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn .material-icons{font-size:50px;width:50px;height:50px;line-height:50px;color:#424242}@media (max-width: 599px){ngp-image-picker .place-image .image-holder-loaded .image-upload-btn{opacity:1;width:30px;height:30px}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn .material-icons{font-size:30px;width:30px;height:30px;line-height:30px}}ngp-image-picker .place-image .image-holder-loaded:hover .image-upload-btn{opacity:1;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn{margin-top:2px}ngp-image-picker .place-image .editing-bar-btn .material-icons-button{height:20px;line-height:20px;width:24px}ngp-image-picker .place-image .editing-bar-btn .material-icons{line-height:20px!important;font-size:20px!important;width:20px!important;height:20px!important}ngp-image-picker .place-image .editing-bar-btn button{margin:4px;color:#424242;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn button:hover{transition:all .25s ease-in}ngp-image-picker .place-image .editing-bar-btn a{margin:4px;color:#424242;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn a:hover{transition:all .25s ease-in}@keyframes show{0%{top:-100vh;opacity:0}to{top:0;opacity:1}}ngp-image-picker .btn{padding:4px 8px;border-radius:4px;cursor:pointer}ngp-image-picker .btn .material-icons{color:#000000d1}ngp-image-picker .icon-btn{display:flex;justify-content:center;align-items:center;border:none;background-color:inherit;border-radius:50%;cursor:pointer}ngp-image-picker .icon-btn :active{transform:scale(.95)}ngp-image-picker .caption{font-size:11px;margin-top:2px!important;margin-bottom:0!important}ngp-image-picker button[disabled]{filter:brightness(.5);cursor:not-allowed}ngp-image-picker .croppr-container *{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}ngp-image-picker .croppr-container img{vertical-align:middle;max-width:100%;max-height:650px;object-fit:cover;object-position:center}ngp-image-picker .croppr{position:relative;display:inline-block}ngp-image-picker .croppr-overlay{background:rgba(0,0,0,.5);position:absolute;inset:0;z-index:1;cursor:crosshair}ngp-image-picker .croppr-region{border:1px dashed rgba(0,0,0,.5);position:absolute;z-index:3;cursor:move;top:0;display:grid;gap:0px;grid-template-columns:repeat(3,1fr)}ngp-image-picker .croppr-imageClipped{position:absolute;inset:0;z-index:2;pointer-events:none}ngp-image-picker .croppr-handle{border:1px solid #ccc;background-color:#fafafa;width:14px;height:14px;position:absolute;z-index:4;top:0;border-radius:50%}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }];\n  }, {\n    color: [{\n      type: Input\n    }],\n    _imageSrc: [{\n      type: Input\n    }],\n    _config: [{\n      type: Input\n    }],\n    imagePicker: [{\n      type: ViewChild,\n      args: ['imagePicker', {\n        static: false\n      }]\n    }],\n    $imageChanged: [{\n      type: Output\n    }],\n    $imageOriginal: [{\n      type: Output\n    }]\n  });\n})();\nclass NgpImagePickerModule {}\nNgpImagePickerModule.ɵfac = function NgpImagePickerModule_Factory(t) {\n  return new (t || NgpImagePickerModule)();\n};\nNgpImagePickerModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NgpImagePickerModule\n});\nNgpImagePickerModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgpImagePickerModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [NgpImagePickerComponent, TabsComponent, EditImageComponent, BasicFiltersComponent, CropperWrapperComponent],\n      imports: [CommonModule, FormsModule, ReactiveFormsModule],\n      exports: [NgpImagePickerComponent],\n      providers: []\n    }]\n  }], null, null);\n})();\n\n/*\n * Public API Surface of ngp-image-picker\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NgpImagePickerComponent, NgpImagePickerModule };\n//# sourceMappingURL=ngp-image-picker.mjs.map","map":{"version":3,"names":["i0","EventEmitter","Component","Input","Output","HostListener","ViewEncapsulation","ChangeDetectionStrategy","ViewChild","NgModule","i1","CommonModule","i2","FormsModule","ReactiveFormsModule","MAX_BUFFER_UNDO_MEMORY","rotate","convertImageUsingCanvas","datas","changeHeight","state","options","Promise","resolve","_","img","document","createElement","src","crossOrigin","quality","maintainRatio","maintainAspectRatio","onload","canvas","ctx","getContext","ratio","width","height","maxWidth","maxHeight","getDimFromImage","basicFilters","filter","processFilter","drawImage","type","format","dataURI","toDataURL","dataUri","then","data","saveState","Object","keys","map","key","includes","join","dragElement","elemnt","pos1","pos2","pos3","pos4","getElementById","id","elementRef","onmousedown","dragPressOn","ontouchstart","e","popup","querySelector","style","overflowY","window","event","clientX","clientY","ontouchend","closeDragElement","onmouseup","ontouchmove","elementDragTouch","onmousemove","elementDragMouse","holderImage","newTop","offsetTop","newLeft","offsetLeft","rectHolder","getBoundingClientRect","rectElemnt","Math","max","top","min","bottom","left","right","changedTouches","length","lastImage","arrayCopiedImages","push","originImageSrc","Remove$3","Quality$3","Format$3","Crop$3","Save$3","Contrast$3","Blur$3","Brightness$3","Grayscale$3","Saturate$2","Sepia$3","Rotate$1","Undo$3","labelEs","Remove","Quality","Format","Crop","Save","Contrast","Blur","Brightness","Grayscale","Saturate","Sepia","Rotate","Undo","Quality$2","Format$2","Crop$2","Remove$2","Save$2","Contrast$2","Blur$2","Brightness$2","Grayscale$2","Saturate$1","Sepia$2","Undo$2","labelEn","Remove$1","Quality$1","Format$1","Crop$1","Save$1","Contrast$1","Blur$1","Brightness$1","Grayscale$1","Sepia$1","Undo$1","labelFr","Saturer","labelDe","TabsComponent","constructor","labels","indexActivated","color","indexActivatedChange","_labels","value","el","active","label","_indexActivated","index","onActivateTab","itemIndex","next","ngOnInit","ɵfac","ɵcmp","NgForOf","NgIf","NgStyle","args","selector","template","styles","BasicFiltersComponent","changeFilter","contrast","blur","brightness","grayscale","invert","saturate","sepia","debounce","callback","delay","clearTimeout","timeout","setTimeout","filterState","JSON","parse","stringify","onChange","DefaultValueAccessor","RangeValueAccessor","NgControlStatus","NgModel","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","element","currTime","Date","getTime","timeToCall","CustomEvent","params","bubbles","cancelable","detail","undefined","evt","createEvent","initCustomEvent","prototype","Event","MouseEvent","eventType","mouseEvent","initMouseEvent","Handle","position","constraints","cursor","eventBus","self","className","addEventListener","onMouseDown","stopPropagation","onMouseUp","onMouseMove","dispatchEvent","handle","removeEventListener","mouseX","mouseY","Box","x1","y1","x2","y2","set","abs","resize","newWidth","newHeight","origin","fromX","fromY","scale","factor","move","y","getRelativePoint","point","getAbsolutePoint","constrainToRatio","grow","constrainToBoundary","boundaryWidth","boundaryHeight","originX","originY","maxIfLeft","maxIfTop","maxIfRight","maxIfBottom","directionX","directionY","constrainToSize","minWidth","minHeight","enableTouch","simulateMouseEvent","preventDefault","touch","eventMap","touchstart","touchmove","touchend","target","view","screenX","screenY","HANDLES","CropprCore","deferred","regionEl","parseOptions","nodeName","getAttribute","_initialized","_restore","parent","parentNode","initialize","createDOM","convertToPixels","cropperEl","attachHandlerEvents","attachRegionEvents","attachOverlayEvents","box","initializeBox","redraw","onInitialize","targetEl","containerEl","imageEl","setAttribute","imageClippedEl","cloneNode","innerHTML","Array","fill","overlayEl","handleContainerEl","handles","i","appendChild","parentElement","replaceChild","setImage","destroy","opts","startSize","aspectRatio","minSize","maxSize","parentWidth","offsetWidth","parentHeight","offsetHeight","round","transform","clip","center","xSign","ySign","quadrant","foregroundHandleIndex","handleWidth","handleHeight","zIndex","onHandleMoveStart","bind","onHandleMoveMoving","onHandleMoveEnd","onRegionMoveStart","onRegionMoveMoving","onRegionMoveEnd","SOUTHEAST_HANDLE_IDX","tmpBox","container","originPoint","activeHandle","onCropStart","getValue","slice","TOP_MOVABLE","RIGHT_MOVABLE","BOTTOM_MOVABLE","LEFT_MOVABLE","MULTI_AXIS","isFlippedX","isFlippedY","tmp","isVerticalMovement","ratioMode","onCropMove","onCropEnd","currentMove","offsetX","offsetY","mode","returnMode","actualWidth","naturalWidth","actualHeight","naturalHeight","elementWidth","elementHeight","factorX","factorY","defaults","unit","onUpdate","console","warn","s","toLowerCase","indexOf","sizeKeys","defaultValue","v","d","decimals","Number","Croppr","_deferred","moveTo","resizeTo","scaleBy","reset","newOptions","enableVisibility","croppContainer","Error","display","CropperWrapperComponent","imageSrc","croppr","croppSize","croppUpdate","onKeyDown","onKeyUp","_imageSrc","setSize","ngAfterViewInit","emit","ngOnDestroy","EditImageComponent","chRef","controlPanelIndex","showCrop","observer","allFormats","initialState","cropHeight","cropWidth","isMobile","closeModal","innerWidth","onCloseEditPanel","saveChanges","ResizeObserver","imageCroperElRef","imageFullElRef","unobserve","onControlPanelIndexChange","idex","calculateSize","ceil","onChangeSize","markForCheck","error","onChangeQuality","onChangeFormat","onRestore","pop","newValue","onCroppUpdate","croppState","onChangeCrop","onCrop","reject","image","Image","onerror","catch","onChangeFilters","ChangeDetectorRef","NgSelectOption","ɵNgSelectMultipleOption","NumberValueAccessor","CheckboxControlValueAccessor","SelectControlValueAccessor","MinValidator","MaxValidator","NgpImagePickerComponent","config","language","objectFit","hideDeleteBtn","hideDownloadBtn","hideEditBtn","hideAddBtn","loadImage","fileType","urlImage","uuidFilePicker","now","toString","showEditPanel","imageName","imagePicker","$imageChanged","$imageOriginal","parseToBase64","_config","processConfig","appendLinkIconsToHead","head","linkIcons","link","href","rel","onUpload","nativeElement","click","handleFileSelect","files","file","name","split","reader","FileReader","handleReaderLoaded","readAsBinaryString","readerEvt","binaryString","result","base64textString","btoa","compressInitial","onOpenEditPanel","imageUrl","types","message","onRemove","encapsulation","None","changeDetection","OnPush","static","NgpImagePickerModule","ɵmod","ɵinj","declarations","imports","exports","providers"],"sources":["C:/Users/migue/Desktop/Argentina Programa/PortfolioFrontEnd/PortfolioFrontEnd/node_modules/ngp-image-picker/fesm2020/ngp-image-picker.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, HostListener, ViewEncapsulation, ChangeDetectionStrategy, ViewChild, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i2 from '@angular/forms';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nconst MAX_BUFFER_UNDO_MEMORY = 25;\nlet rotate = 1;\nconst convertImageUsingCanvas = (datas, changeHeight = false, state, options) => {\n    return new Promise(async (resolve, _) => {\n        let img = document.createElement('img');\n        img.src = datas + '';\n        img.crossOrigin = 'Anonymous';\n        let quality = state.quality / 100;\n        let maintainRatio = state.maintainAspectRatio;\n        img.onload = () => {\n            var canvas = document.createElement('canvas');\n            let ctx = canvas.getContext('2d');\n            if (!ctx)\n                return;\n            let ratio = img.width / img.height;\n            let width = state.maxWidth;\n            let height = state.maxHeight;\n            if (options?.getDimFromImage) {\n                width = img.width;\n                height = img.height;\n            }\n            if (maintainRatio) {\n                canvas.width = width;\n                canvas.height = width / ratio;\n                if (changeHeight) {\n                    canvas.width = height * ratio;\n                    canvas.height = height;\n                }\n            }\n            else {\n                canvas.width = width;\n                canvas.height = height;\n            }\n            if (state.basicFilters) {\n                ctx.filter = processFilter(state.basicFilters);\n            }\n            // if (options?.rotate) {\n            //   canvas.width = height;\n            //   canvas.height = width;\n            //   if (options?.rotate === 90) {\n            //     ctx.rotate((90 * Math.PI) / 180);\n            //     ctx.translate(0, -canvas.width);\n            //   } else {\n            //     ctx.rotate((-90 * Math.PI) / 180);\n            //     ctx.translate(-canvas.height, 0);\n            //   }\n            //   ctx.drawImage(img, 0, 0);\n            // } else {\n            // }\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n            let type = state.format;\n            var dataURI = canvas.toDataURL(`image/${type}`, quality);\n            resolve({\n                dataUri: dataURI,\n                width: canvas.width,\n                height: canvas.height,\n            });\n        };\n    }).then((data) => {\n        state.maxHeight = data.height;\n        state.maxWidth = data.width;\n        saveState(state, data.dataUri);\n        return data.dataUri;\n    });\n    function processFilter(data) {\n        return Object.keys(data)\n            .map((key) => {\n            if (['blur'].includes(key)) {\n                return `${key}(${data[key]}px)`;\n            }\n            else {\n                return `${key}(${data[key]})`;\n            }\n        })\n            .join('');\n    }\n};\nconst dragElement = (elemnt) => {\n    if (!elemnt)\n        return;\n    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n    if (document.getElementById(elemnt.id + '-header')) {\n        /* if present, the header is where you move the DIV from:*/\n        let elementRef = document.getElementById(elemnt?.id + '-header');\n        if (!elementRef)\n            return;\n        elementRef.onmousedown = dragPressOn;\n        elementRef.ontouchstart = dragPressOn;\n    }\n    else {\n        /* otherwise, move the DIV from anywhere inside the DIV:*/\n        elemnt.ontouchstart = dragPressOn;\n        elemnt.onmousedown = dragPressOn;\n    }\n    function dragPressOn(e) {\n        let popup = document.querySelector('#popup');\n        popup.style.overflowY = 'hidden';\n        e = e || window.event;\n        pos3 = e.clientX;\n        pos4 = e.clientY;\n        document.ontouchend = closeDragElement;\n        document.onmouseup = closeDragElement;\n        document.ontouchmove = elementDragTouch;\n        document.onmousemove = elementDragMouse;\n    }\n    function elementDragMouse(e) {\n        let holderImage = document.getElementById('image-full');\n        e = e || window.event;\n        pos1 = pos3 - e.clientX;\n        pos3 = e.clientX;\n        pos2 = pos4 - e.clientY;\n        pos4 = e.clientY;\n        let newTop = elemnt.offsetTop - pos2;\n        let newLeft = elemnt.offsetLeft - pos1;\n        let rectHolder = holderImage?.getBoundingClientRect();\n        let rectElemnt = elemnt.getBoundingClientRect();\n        // console.log('====================================');\n        // console.log(rectElemnt,rectHolder);\n        // console.log('====================================');\n        newTop = Math.max(newTop, rectHolder?.top);\n        newTop = Math.min(newTop, rectHolder?.bottom - rectElemnt.height);\n        newLeft = Math.max(newLeft, rectHolder?.left);\n        newLeft = Math.min(newLeft, rectHolder?.right - rectElemnt.width);\n        elemnt.style.top = newTop + 'px';\n        elemnt.style.left = newLeft + 'px';\n    }\n    function elementDragTouch(e) {\n        let holderImage = document.getElementById('image-full');\n        e = e || window.event;\n        if (e?.changedTouches?.length) {\n            pos1 = pos3 - e.changedTouches[0]?.clientX;\n            pos3 = e.changedTouches[0]?.clientX;\n        }\n        if (e?.changedTouches?.length) {\n            pos2 = pos4 - e.changedTouches[0]?.clientY;\n            pos4 = e.changedTouches[0]?.clientY;\n        }\n        let newTop = elemnt.offsetTop - pos2;\n        let newLeft = elemnt.offsetLeft - pos1;\n        let rectHolder = holderImage?.getBoundingClientRect();\n        let rectElemnt = elemnt.getBoundingClientRect();\n        // console.log('====================================');\n        // console.log(rectElemnt,rectHolder);\n        // console.log('====================================');\n        newTop = Math.max(newTop, rectHolder?.top);\n        newTop = Math.min(newTop, rectHolder?.bottom - rectElemnt.height);\n        newLeft = Math.max(newLeft, rectHolder?.left);\n        newLeft = Math.min(newLeft, rectHolder?.right - rectElemnt.width);\n        elemnt.style.top = newTop + 'px';\n        elemnt.style.left = newLeft + 'px';\n    }\n    function closeDragElement() {\n        /* stop moving when mouse button is released:*/\n        let popup = document.querySelector('#popup');\n        popup.style.overflowY = 'auto';\n        document.onmouseup = null;\n        document.onmousemove = null;\n        document.ontouchend = null;\n        document.ontouchmove = null;\n    }\n};\nconst saveState = (state, lastImage) => {\n    if (state.arrayCopiedImages.length <= MAX_BUFFER_UNDO_MEMORY) {\n        state.arrayCopiedImages.push({\n            lastImage: lastImage,\n            width: state.maxWidth,\n            height: state.maxHeight,\n            quality: state.quality,\n            format: state.format,\n            originImageSrc: state.originImageSrc,\n            basicFilters: state.basicFilters,\n        });\n    }\n    else {\n        state.arrayCopiedImages[state.arrayCopiedImages.length - 1] = {\n            lastImage: lastImage,\n            width: state.maxWidth,\n            height: state.maxHeight,\n            quality: state.quality,\n            format: state.format,\n            originImageSrc: state.originImageSrc,\n            basicFilters: state.basicFilters,\n        };\n    }\n};\n\nvar Remove$3 = \"Quitar\";\nvar Quality$3 = \"Calidad\";\nvar Format$3 = \"Formato\";\nvar Crop$3 = \"Recortar\";\nvar Save$3 = \"Guardar\";\nvar Contrast$3 = \"Contraste\";\nvar Blur$3 = \"Blur\";\nvar Brightness$3 = \"Brillo\";\nvar Grayscale$3 = \"Scala de gris\";\nvar Saturate$2 = \"Saturación\";\nvar Sepia$3 = \"Sepia\";\nvar Rotate$1 = \"Rotar\";\nvar Undo$3 = \"Deshacer\";\nvar labelEs = {\n\t\"Upload a image\": \"Suba una imagen\",\n\t\"You must edit the image in order to resize it\": \"Debe editar la imagen para disminuir su tamaño\",\n\t\"too large\": \"muy grande\",\n\t\"Open the editor panel\": \"Abra el panel de edición\",\n\t\"Download the image\": \"Descarge la imagen\",\n\t\"Control Panel\": \"Panel de control\",\n\tRemove: Remove$3,\n\tQuality: Quality$3,\n\t\"Max dimensions\": \"Dimensiones\",\n\t\"aspect-ratio\": \"relación-aspecto\",\n\t\"max-width(px)\": \"max. ancho\",\n\t\"max-height(px)\": \"max. alto\",\n\tFormat: Format$3,\n\tCrop: Crop$3,\n\t\"width(px)\": \"ancho(px)\",\n\t\"height(px)\": \"altura(px)\",\n\tSave: Save$3,\n\tContrast: Contrast$3,\n\tBlur: Blur$3,\n\tBrightness: Brightness$3,\n\tGrayscale: Grayscale$3,\n\tSaturate: Saturate$2,\n\tSepia: Sepia$3,\n\tRotate: Rotate$1,\n\tUndo: Undo$3\n};\n\nvar Quality$2 = \"Quality\";\nvar Format$2 = \"Format\";\nvar Crop$2 = \"Crop\";\nvar Remove$2 = \"Remove\";\nvar Save$2 = \"Save\";\nvar Contrast$2 = \"Contrast\";\nvar Blur$2 = \"Blur\";\nvar Brightness$2 = \"Brightness\";\nvar Grayscale$2 = \"Grayscale\";\nvar Saturate$1 = \"Saturate\";\nvar Sepia$2 = \"Sepia\";\nvar Rotate = \"Rotate\";\nvar Undo$2 = \"Undo\";\nvar labelEn = {\n\t\"Upload a image\": \"Upload a image\",\n\t\"You must edit the image in order to resize it\": \"You must edit the image in order to resize it\",\n\t\"too large\": \"too large\",\n\t\"Open the editor panel\": \"Open the editor panel\",\n\t\"Download the image\": \"Download the image\",\n\t\"Control Panel\": \"Control Panel\",\n\tQuality: Quality$2,\n\t\"Max dimensions\": \"Max dimensions\",\n\t\"aspect-ratio\": \"aspect-ratio\",\n\t\"max-width(px)\": \"max-width(px)\",\n\t\"max-height(px)\": \"max-height(px)\",\n\tFormat: Format$2,\n\tCrop: Crop$2,\n\t\"width(px)\": \"width(px)\",\n\t\"height(px)\": \"height(px)\",\n\tRemove: Remove$2,\n\tSave: Save$2,\n\tContrast: Contrast$2,\n\tBlur: Blur$2,\n\tBrightness: Brightness$2,\n\tGrayscale: Grayscale$2,\n\tSaturate: Saturate$1,\n\tSepia: Sepia$2,\n\tRotate: Rotate,\n\tUndo: Undo$2\n};\n\nvar Remove$1 = \"Supprimer\";\nvar Quality$1 = \"Qualité\";\nvar Format$1 = \"Format\";\nvar Crop$1 = \"Recadrer\";\nvar Save$1 = \"Sauvez\";\nvar Contrast$1 = \"Contraste\";\nvar Blur$1 = \"Blur\";\nvar Brightness$1 = \"Luminosité\";\nvar Grayscale$1 = \"Grayscale\";\nvar Saturate = \"Saturer\";\nvar Sepia$1 = \"Seiche\";\nvar Undo$1 = \"Annuler\";\nvar labelFr = {\n\t\"Upload a image\": \"Charger une image\",\n\t\"You must edit the image in order to resize it\": \"Vous devez éditer l'image pour changer sa taille\",\n\t\"too large\": \"Trop grande\",\n\t\"Open the editor panel\": \"Ouvrir le panneau d'édition\",\n\t\"Download the image\": \"Télécharger l'image\",\n\t\"Control Panel\": \"Panneau de commande\",\n\tRemove: Remove$1,\n\tQuality: Quality$1,\n\t\"Max dimensions\": \"Dimensions maximales\",\n\t\"aspect-ratio\": \"rapport de forme\",\n\t\"max-width(px)\": \"largeur max.\",\n\t\"max-height(px)\": \"hauteur max\",\n\tFormat: Format$1,\n\tCrop: Crop$1,\n\t\"width(px)\": \"largeur(px)\",\n\t\"height(px)\": \"hauteur(px)\",\n\tSave: Save$1,\n\tContrast: Contrast$1,\n\tBlur: Blur$1,\n\tBrightness: Brightness$1,\n\tGrayscale: Grayscale$1,\n\tSaturate: Saturate,\n\tSepia: Sepia$1,\n\tUndo: Undo$1\n};\n\nvar Quality = \"Qualität\";\nvar Format = \"Format\";\nvar Crop = \"Zuschneiden\";\nvar Remove = \"Entfernen\";\nvar Save = \"Speichern\";\nvar Contrast = \"Kontrast\";\nvar Blur = \"Blur\";\nvar Brightness = \"Helligkeit\";\nvar Grayscale = \"Graustufen\";\nvar Saturer = \"Sättigen\";\nvar Sepia = \"Tintenfisch\";\nvar Undo = \"Undo\";\nvar labelDe = {\n\t\"Upload a image\": \"Bild hochladen\",\n\t\"You must edit the image in order to resize it\": \"Sie müssen das Bild bearbeiten, um seine Größe zu ändern\",\n\t\"too large\": \"zu groß\",\n\t\"Open the editor panel\": \"Editor-Fenster öffnen\",\n\t\"Download the image\": \"Bild herunterladen\",\n\t\"Control Panel\": \"Bedienfeld\",\n\tQuality: Quality,\n\t\"Max dimensions\": \"Maximale Größe\",\n\t\"aspect-ratio\": \"Seitenverhältnis\",\n\t\"max-width(px)\": \"Max. Breite(px)\",\n\t\"max-height(px)\": \"Max. Höhe(px)\",\n\tFormat: Format,\n\tCrop: Crop,\n\t\"width(px)\": \"Breite(px)\",\n\t\"height(px)\": \"Höhe(px)\",\n\tRemove: Remove,\n\tSave: Save,\n\tContrast: Contrast,\n\tBlur: Blur,\n\tBrightness: Brightness,\n\tGrayscale: Grayscale,\n\tSaturer: Saturer,\n\tSepia: Sepia,\n\tUndo: Undo\n};\n\nclass TabsComponent {\n    constructor() {\n        this.labels = [];\n        this.indexActivated = 0;\n        this.color = '';\n        this.indexActivatedChange = new EventEmitter();\n    }\n    set _labels(value) {\n        if (value?.length) {\n            this.labels = value.map((el) => ({ active: false, label: el }));\n            this.labels[this.indexActivated].active = true;\n        }\n    }\n    set _indexActivated(index) {\n        this.indexActivated = index || 0;\n    }\n    onActivateTab(itemIndex) {\n        this.labels = this.labels.map((el, index) => {\n            el.active = itemIndex === index ? true : false;\n            return el;\n        });\n        this.indexActivated = itemIndex;\n        this.indexActivatedChange.next(itemIndex);\n    }\n    ngOnInit() { }\n}\nTabsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: TabsComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nTabsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"15.0.4\", type: TabsComponent, selector: \"lib-tabs\", inputs: { color: \"color\", _labels: \"_labels\", _indexActivated: \"_indexActivated\" }, outputs: { indexActivatedChange: \"indexActivatedChange\" }, ngImport: i0, template: \"<div class=\\\"header\\\">\\n  <div\\n    (click)=\\\"onActivateTab(index)\\\"\\n    *ngFor=\\\"let tab of this.labels; let index = index\\\"\\n    class=\\\"itemlabel bottomLine\\\"\\n    [ngStyle]=\\\"{ color: tab.active ? color : 'inherit', opacity: tab.active ? 1 : 0.7, fontWeight: tab.active ? 500 : 'inherit' }\\\"\\n  >\\n    {{ tab.label }}\\n    <div *ngIf=\\\"tab.active\\\" [style.backgroundColor]=\\\"this.color\\\"></div>\\n  </div>\\n</div>\\n\\n<div class=\\\"body\\\">\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\".header{display:flex;padding:0 8px;box-sizing:border-box;justify-content:flex-start;align-items:center;overflow-x:auto;font-size:16px;border-bottom:1px solid #323232}.header .itemlabel{display:flex;justify-content:center;align-items:center;padding:.5rem .65rem;min-height:48px;box-sizing:border-box;white-space:nowrap;text-transform:capitalize;cursor:pointer;opacity:.7}.header .itemlabel.bottomLine{position:relative;opacity:1}.header .itemlabel.bottomLine div{position:absolute;width:100%;bottom:0;height:3px}.body{padding:16px 8px}\\n\"], dependencies: [{ kind: \"directive\", type: i1.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i1.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i1.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: TabsComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'lib-tabs', template: \"<div class=\\\"header\\\">\\n  <div\\n    (click)=\\\"onActivateTab(index)\\\"\\n    *ngFor=\\\"let tab of this.labels; let index = index\\\"\\n    class=\\\"itemlabel bottomLine\\\"\\n    [ngStyle]=\\\"{ color: tab.active ? color : 'inherit', opacity: tab.active ? 1 : 0.7, fontWeight: tab.active ? 500 : 'inherit' }\\\"\\n  >\\n    {{ tab.label }}\\n    <div *ngIf=\\\"tab.active\\\" [style.backgroundColor]=\\\"this.color\\\"></div>\\n  </div>\\n</div>\\n\\n<div class=\\\"body\\\">\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\".header{display:flex;padding:0 8px;box-sizing:border-box;justify-content:flex-start;align-items:center;overflow-x:auto;font-size:16px;border-bottom:1px solid #323232}.header .itemlabel{display:flex;justify-content:center;align-items:center;padding:.5rem .65rem;min-height:48px;box-sizing:border-box;white-space:nowrap;text-transform:capitalize;cursor:pointer;opacity:.7}.header .itemlabel.bottomLine{position:relative;opacity:1}.header .itemlabel.bottomLine div{position:absolute;width:100%;bottom:0;height:3px}.body{padding:16px 8px}\\n\"] }]\n        }], ctorParameters: function () { return []; }, propDecorators: { color: [{\n                type: Input\n            }], _labels: [{\n                type: Input\n            }], _indexActivated: [{\n                type: Input\n            }], indexActivatedChange: [{\n                type: Output\n            }] } });\n\nclass BasicFiltersComponent {\n    constructor() {\n        this.color = '';\n        this.changeFilter = new EventEmitter();\n        this.state = {\n            contrast: 1,\n            blur: 0,\n            brightness: 1,\n            grayscale: 0,\n            invert: 0,\n            saturate: 1,\n            sepia: 0,\n        };\n        this.debounce = (callback, delay) => {\n            clearTimeout(this.timeout);\n            this.timeout = setTimeout(() => {\n                callback();\n                clearTimeout(this.timeout);\n            }, delay);\n        };\n    }\n    set filterState(value) {\n        if (value) {\n            this.state = JSON.parse(JSON.stringify({ ...this.state, ...value }));\n        }\n        else {\n            this.state = {\n                contrast: 1,\n                blur: 0,\n                brightness: 1,\n                grayscale: 0,\n                invert: 0,\n                saturate: 1,\n                sepia: 0,\n            };\n        }\n    }\n    ngOnInit() { }\n    onChange() {\n        this.debounce(() => {\n            this.changeFilter.next(this.state);\n        }, 150);\n    }\n}\nBasicFiltersComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: BasicFiltersComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nBasicFiltersComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"15.0.4\", type: BasicFiltersComponent, selector: \"lib-basic-filters\", inputs: { color: \"color\", labels: \"labels\", filterState: \"filterState\" }, outputs: { changeFilter: \"changeFilter\" }, ngImport: i0, template: \"<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Contrast'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.contrast || 0.0).toFixed(2) }}</p>\\n</div>\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.contrast\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"5\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Brightness'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.brightness || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.brightness\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"5\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Grayscale'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.grayscale || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.grayscale\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Saturate'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.saturate || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.saturate\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"10\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Sepia'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.sepia || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.sepia\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<!-- <br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Invert'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.invert || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.invert\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div> -->\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Blur'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (state?.blur || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.blur\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"20\\\"\\n    step=\\\"1\\\"\\n  />\\n</div>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i1.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }, { kind: \"directive\", type: i2.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { kind: \"directive\", type: i2.RangeValueAccessor, selector: \"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]\" }, { kind: \"directive\", type: i2.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { kind: \"directive\", type: i2.NgModel, selector: \"[ngModel]:not([formControlName]):not([formControl])\", inputs: [\"name\", \"disabled\", \"ngModel\", \"ngModelOptions\"], outputs: [\"ngModelChange\"], exportAs: [\"ngModel\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: BasicFiltersComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'lib-basic-filters', template: \"<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Contrast'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.contrast || 0.0).toFixed(2) }}</p>\\n</div>\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.contrast\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"5\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Brightness'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.brightness || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.brightness\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"5\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Grayscale'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.grayscale || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.grayscale\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Saturate'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.saturate || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.saturate\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"10\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Sepia'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.sepia || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.sepia\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div>\\n\\n<!-- <br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Invert'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (this.state?.invert || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.invert\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"1\\\"\\n    step=\\\"0.01\\\"\\n  />\\n</div> -->\\n\\n<br />\\n<div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n  <p class=\\\"item-panel\\\">{{ labels['Blur'] }}</p>\\n  <p class=\\\"item-panel\\\">{{ (state?.blur || 0.0).toFixed(2) }}</p>\\n</div>\\n\\n<div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n  <input\\n    class=\\\"input-range\\\"\\n    (input)=\\\"onChange()\\\"\\n    [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n    [(ngModel)]=\\\"state.blur\\\"\\n    type=\\\"range\\\"\\n    min=\\\"0\\\"\\n    max=\\\"20\\\"\\n    step=\\\"1\\\"\\n  />\\n</div>\\n\" }]\n        }], ctorParameters: function () { return []; }, propDecorators: { color: [{\n                type: Input\n            }], labels: [{\n                type: Input\n            }], changeFilter: [{\n                type: Output\n            }], filterState: [{\n                type: Input\n            }] } });\n\n\"use strict\";\n/**\n * POLYFILLS\n */\n// Request Animation Frame polyfill\n(function () {\n    let lastTime = 0;\n    let vendors = ['ms', 'moz', 'webkit', 'o'];\n    for (let x = 0; x < vendors.length && !window.requestAnimationFrame; x++) {\n        window.requestAnimationFrame = window[(vendors[x] + 'RequestAnimationFrame')];\n        window.cancelAnimationFrame = (window[(vendors[x] + 'CancelAnimationFrame')] ||\n            window[(vendors[x] + 'CancelRequestAnimationFrame')]);\n    }\n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function (callback, element) {\n            let currTime = new Date().getTime();\n            let timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            let id = window.setTimeout(function () {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function (id) {\n            clearTimeout(id);\n        };\n})();\n// CustomEvents polyfill\n(function () {\n    if (typeof window.CustomEvent === 'function')\n        return false;\n    function CustomEvent(event, params) {\n        params = params || { bubbles: false, cancelable: false, detail: undefined };\n        let evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        return evt;\n    }\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent;\n})();\n// MouseEvents polyfill\n(function (window) {\n    try {\n        new CustomEvent('test');\n        return false; // No need to polyfill\n    }\n    catch (e) {\n        // Need to polyfill - fall through\n    }\n    // Polyfills DOM4 CustomEvent\n    function MouseEvent(eventType, params) {\n        params = params || { bubbles: false, cancelable: false };\n        let mouseEvent = document.createEvent('MouseEvent');\n        mouseEvent.initMouseEvent(eventType, params.bubbles, params.cancelable, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        return mouseEvent;\n    }\n    MouseEvent.prototype = Event.prototype;\n    window.MouseEvent = MouseEvent;\n})(window);\n\n/**\n * Handle component\n */\nclass Handle {\n    constructor(position, constraints, cursor, eventBus) {\n        var self = this;\n        this.position = position;\n        this.constraints = constraints;\n        this.cursor = cursor;\n        this.eventBus = eventBus;\n        // Create DOM element\n        this.el = document.createElement(\"div\");\n        this.el.className = \"croppr-handle\";\n        this.el.style.cursor = cursor;\n        // Attach initial listener\n        this.el.addEventListener(\"mousedown\", onMouseDown);\n        function onMouseDown(e) {\n            e.stopPropagation();\n            document.addEventListener(\"mouseup\", onMouseUp);\n            document.addEventListener(\"mousemove\", onMouseMove);\n            // Notify parent\n            self.eventBus.dispatchEvent(new CustomEvent(\"handlestart\", {\n                detail: { handle: self },\n            }));\n        }\n        function onMouseUp(e) {\n            e.stopPropagation();\n            document.removeEventListener(\"mouseup\", onMouseUp);\n            document.removeEventListener(\"mousemove\", onMouseMove);\n            // Notify parent\n            self.eventBus.dispatchEvent(new CustomEvent(\"handleend\", {\n                detail: { handle: self },\n            }));\n        }\n        function onMouseMove(e) {\n            e.stopPropagation();\n            // Notify parent\n            self.eventBus.dispatchEvent(new CustomEvent(\"handlemove\", {\n                detail: { mouseX: e.clientX, mouseY: e.clientY },\n            }));\n        }\n    }\n}\n\n/**\n * Box component\n */\nclass Box {\n    constructor(x1, y1, x2, y2) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n    }\n    /**\n     * Sets the new dimensions of the box.\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} x2\n     * @param {Number} y2\n     */\n    set(x1 = null, y1 = null, x2 = null, y2 = null) {\n        this.x1 = x1 == null ? this.x1 : x1;\n        this.y1 = y1 == null ? this.y1 : y1;\n        this.x2 = x2 == null ? this.x2 : x2;\n        this.y2 = y2 == null ? this.y2 : y2;\n        return this;\n    }\n    /**\n     * Calculates the width of the box.\n     * @returns {Number}\n     */\n    width() {\n        return Math.abs(this.x2 - this.x1);\n    }\n    /**\n     * Calculates the height of the box.\n     * @returns {Number}\n     */\n    height() {\n        return Math.abs(this.y2 - this.y1);\n    }\n    /**\n     * Resizes the box to a new size.\n     * @param {Number} newWidth\n     * @param {Number} newHeight\n     * @param {Array} [origin] The origin point to resize from.\n     *      Defaults to [0, 0] (top left).\n     */\n    resize(newWidth, newHeight, origin = [0, 0]) {\n        const fromX = this.x1 + this.width() * origin[0];\n        const fromY = this.y1 + this.height() * origin[1];\n        this.x1 = fromX - newWidth * origin[0];\n        this.y1 = fromY - newHeight * origin[1];\n        this.x2 = this.x1 + newWidth;\n        this.y2 = this.y1 + newHeight;\n        return this;\n    }\n    /**\n     * Scale the box by a factor.\n     * @param {Number} factor\n     * @param {Array} [origin] The origin point to resize from.\n     *      Defaults to [0, 0] (top left).\n     */\n    scale(factor, origin = [0, 0]) {\n        const newWidth = this.width() * factor;\n        const newHeight = this.height() * factor;\n        this.resize(newWidth, newHeight, origin);\n        return this;\n    }\n    /**\n     * Move the box to the specified coordinates.\n     */\n    move(x = null, y = null) {\n        let width = this.width();\n        let height = this.height();\n        x = x === null ? this.x1 : x;\n        y = y === null ? this.y1 : y;\n        this.x1 = x;\n        this.y1 = y;\n        this.x2 = x + width;\n        this.y2 = y + height;\n        return this;\n    }\n    /**\n     * Get relative x and y coordinates of a given point within the box.\n     * @param {Array} point The x and y ratio position within the box.\n     * @returns {Array} The x and y coordinates [x, y].\n     */\n    getRelativePoint(point = [0, 0]) {\n        const x = this.width() * point[0];\n        const y = this.height() * point[1];\n        return [x, y];\n    }\n    /**\n     * Get absolute x and y coordinates of a given point within the box.\n     * @param {Array} point The x and y ratio position within the box.\n     * @returns {Array} The x and y coordinates [x, y].\n     */\n    getAbsolutePoint(point = [0, 0]) {\n        const x = this.x1 + this.width() * point[0];\n        const y = this.y1 + this.height() * point[1];\n        return [x, y];\n    }\n    /**\n     * Constrain the box to a fixed ratio.\n     * @param {Number} ratio\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     * @param {String} [grow] The axis to grow to maintain the ratio.\n     *     Defaults to 'height'.\n     */\n    constrainToRatio(ratio, origin = [0, 0], grow = \"height\") {\n        if (ratio === null) {\n            return;\n        }\n        const width = this.width();\n        const height = this.height();\n        switch (grow) {\n            case \"height\": // Grow height only\n                this.resize(this.width(), this.width() * ratio, origin);\n                break;\n            case \"width\": // Grow width only\n                this.resize((this.height() * 1) / ratio, this.height(), origin);\n                break;\n            default: // Default: Grow height only\n                this.resize(this.width(), this.width() * ratio, origin);\n        }\n        return this;\n    }\n    /**\n     * Constrain the box within a boundary.\n     * @param {Number} boundaryWidth\n     * @param {Number} boundaryHeight\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     */\n    constrainToBoundary(boundaryWidth, boundaryHeight, origin = [0, 0]) {\n        // Calculate the maximum sizes for each direction of growth\n        const [originX, originY] = this.getAbsolutePoint(origin);\n        const maxIfLeft = originX;\n        const maxIfTop = originY;\n        const maxIfRight = boundaryWidth - originX;\n        const maxIfBottom = boundaryHeight - originY;\n        // Express the direction of growth in terms of left, both,\n        // and right as -1, 0, and 1 respectively. Ditto for top/both/down.\n        const directionX = -2 * origin[0] + 1;\n        const directionY = -2 * origin[1] + 1;\n        // Determine the max size to use according to the direction of growth.\n        let [maxWidth, maxHeight] = [null, null];\n        switch (directionX) {\n            case -1:\n                maxWidth = maxIfLeft;\n                break;\n            case 0:\n                maxWidth = (Math.min(maxIfLeft, maxIfRight) * 2);\n                break;\n            case +1:\n                maxWidth = maxIfRight;\n                break;\n        }\n        switch (directionY) {\n            case -1:\n                maxHeight = maxIfTop;\n                break;\n            case 0:\n                maxHeight = (Math.min(maxIfTop, maxIfBottom) * 2);\n                break;\n            case +1:\n                maxHeight = maxIfBottom;\n                break;\n        }\n        // Resize if the box exceeds the calculated max width/height.\n        if (this.width() > maxWidth) {\n            const factor = maxWidth / this.width();\n            this.scale(factor, origin);\n        }\n        if (this.height() > maxHeight) {\n            const factor = maxHeight / this.height();\n            this.scale(factor, origin);\n        }\n        return this;\n    }\n    /**\n     * Constrain the box to a maximum/minimum size.\n     * @param {Number} [maxWidth]\n     * @param {Number} [maxHeight]\n     * @param {Number} [minWidth]\n     * @param {Number} [minHeight]\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     * @param {Number} [ratio] Ratio to maintain.\n     */\n    constrainToSize(maxWidth = null, maxHeight = null, minWidth = null, minHeight = null, origin = [0, 0], ratio = null) {\n        // Calculate new max/min widths & heights that constrains to the ratio\n        if (ratio) {\n            if (ratio > 1) {\n                maxWidth = (maxHeight * 1) / ratio;\n                minHeight = minHeight * ratio;\n            }\n            else if (ratio < 1) {\n                maxHeight = maxWidth * ratio;\n                minWidth = (minHeight * 1) / ratio;\n            }\n        }\n        if (maxWidth && this.width() > maxWidth) {\n            const newWidth = maxWidth, newHeight = ratio === null ? this.height() : maxHeight;\n            this.resize(newWidth, newHeight, origin);\n        }\n        if (maxHeight && this.height() > maxHeight) {\n            const newWidth = ratio === null ? this.width() : maxWidth, newHeight = maxHeight;\n            this.resize(newWidth, newHeight, origin);\n        }\n        if (minWidth && this.width() < minWidth) {\n            const newWidth = minWidth, newHeight = ratio === null ? this.height() : minHeight;\n            this.resize(newWidth, newHeight, origin);\n        }\n        if (minHeight && this.height() < minHeight) {\n            const newWidth = ratio === null ? this.width() : minWidth, newHeight = minHeight;\n            this.resize(newWidth, newHeight, origin);\n        }\n        return this;\n    }\n}\n\n/**\n * Croppr Touch\n * Enables support for touch devices by translating touch events to\n * mouse events.\n */\n/**\n * Binds an element's touch events to be simulated as mouse events.\n * @param {Element} element\n */\nfunction enableTouch(element) {\n    element.addEventListener('touchstart', simulateMouseEvent);\n    element.addEventListener('touchend', simulateMouseEvent);\n    element.addEventListener('touchmove', simulateMouseEvent);\n}\n/**\n * Translates a touch event to a mouse event.\n * @param {Event} e\n */\nfunction simulateMouseEvent(e) {\n    e.preventDefault();\n    const touch = e.changedTouches[0];\n    const eventMap = {\n        touchstart: 'mousedown',\n        touchmove: 'mousemove',\n        touchend: 'mouseup',\n    };\n    touch.target.dispatchEvent(new MouseEvent(eventMap[e.type], {\n        bubbles: true,\n        cancelable: true,\n        view: window,\n        clientX: touch.clientX,\n        clientY: touch.clientY,\n        screenX: touch.screenX,\n        screenY: touch.screenY,\n    }));\n}\n\n/**\n * CropprCore\n * Here lies the main logic.\n */\n/**\n * Define a list of handles to create.\n *\n * @property {Array} position - The x and y ratio position of the handle within\n *      the crop region. Accepts a value between 0 to 1 in the order of [X, Y].\n * @property {Array} constraints - Define the side of the crop region that is to\n *      be affected by this handle. Accepts a value of 0 or 1 in the order of\n *      [TOP, RIGHT, BOTTOM, LEFT].\n * @property {String} cursor - The CSS cursor of this handle.\n */\nconst HANDLES = [\n    { position: [0.0, 0.0], constraints: [1, 0, 0, 1], cursor: 'nw-resize' },\n    { position: [0.5, 0.0], constraints: [1, 0, 0, 0], cursor: 'n-resize' },\n    { position: [1.0, 0.0], constraints: [1, 1, 0, 0], cursor: 'ne-resize' },\n    { position: [1.0, 0.5], constraints: [0, 1, 0, 0], cursor: 'e-resize' },\n    { position: [1.0, 1.0], constraints: [0, 1, 1, 0], cursor: 'se-resize' },\n    { position: [0.5, 1.0], constraints: [0, 0, 1, 0], cursor: 's-resize' },\n    { position: [0.0, 1.0], constraints: [0, 0, 1, 1], cursor: 'sw-resize' },\n    { position: [0.0, 0.5], constraints: [0, 0, 0, 1], cursor: 'w-resize' },\n];\n/**\n * Core class for Croppr containing most of its functional logic.\n */\nclass CropprCore {\n    constructor(element, options, deferred = false) {\n        this.regionEl = null;\n        // console.log(\"🚀 ~ file: core.ts ~ line 51 ~ CropprCore ~ constructor ~ element\", element)\n        // Parse options\n        this.options = CropprCore.parseOptions(options || {});\n        // Get target img element\n        if (!element.nodeName) {\n            element = document.querySelector(element);\n            // console.log(\"🚀 ~ file: core.ts ~ line 58 ~ CropprCore ~ constructor ~ element\", element)\n            if (element == null) {\n                throw 'Unable to find element.';\n            }\n        }\n        if (!element.getAttribute('src')) {\n            throw 'Image src not provided.';\n        }\n        // Define internal props\n        this._initialized = false;\n        this._restore = {\n            parent: element.parentNode,\n            element: element,\n        };\n        // Wait until image is loaded before proceeding\n        if (!deferred) {\n            if (element.width === 0 || element.height === 0) {\n                element.onload = () => {\n                    this.initialize(element);\n                };\n            }\n            else {\n                this.initialize(element);\n            }\n        }\n    }\n    /**\n     * Initialize the Croppr instance\n     */\n    initialize(element) {\n        // Create DOM elements\n        this.createDOM(element);\n        // Process option values\n        this.options.convertToPixels(this.cropperEl);\n        // Listen for events from children\n        this.attachHandlerEvents();\n        this.attachRegionEvents();\n        this.attachOverlayEvents();\n        // Bootstrap this cropper instance\n        this.box = this.initializeBox(this.options);\n        this.redraw();\n        // Set the initalized flag to true and call the callback\n        this._initialized = true;\n        if (this.options.onInitialize !== null) {\n            this.options.onInitialize(this);\n        }\n    }\n    /**\n     * Create Croppr's DOM elements\n     */\n    createDOM(targetEl) {\n        // Create main container and use it as the main event listeners\n        this.containerEl = document.createElement('div');\n        this.containerEl.className = 'croppr-container';\n        this.eventBus = this.containerEl;\n        enableTouch(this.containerEl);\n        // Create cropper element\n        this.cropperEl = document.createElement('div');\n        this.cropperEl.className = 'croppr';\n        // Create image element\n        this.imageEl = document.createElement('img');\n        this.imageEl.setAttribute('src', targetEl.getAttribute('src'));\n        this.imageEl.setAttribute('alt', targetEl.getAttribute('alt'));\n        this.imageEl.className = 'croppr-image';\n        // Create clipped image element\n        this.imageClippedEl = this.imageEl.cloneNode();\n        this.imageClippedEl.className = 'croppr-imageClipped';\n        // Create region box element\n        this.regionEl = document.createElement('div');\n        this.regionEl.innerHTML = new Array(9)\n            .fill(1)\n            .map(() => `<div style=\"border: 1px dashed #fafafa\"></div>`)\n            .join('');\n        this.regionEl.className = 'croppr-region';\n        // Create overlay element\n        this.overlayEl = document.createElement('div');\n        this.overlayEl.className = 'croppr-overlay';\n        // Create handles element\n        let handleContainerEl = document.createElement('div');\n        handleContainerEl.className = 'croppr-handleContainer';\n        this.handles = [];\n        for (let i = 0; i < HANDLES.length; i++) {\n            const handle = new Handle(HANDLES[i].position, HANDLES[i].constraints, HANDLES[i].cursor, this.eventBus);\n            this.handles.push(handle);\n            handleContainerEl.appendChild(handle.el);\n        }\n        // And then we piece it all together!\n        this.cropperEl.appendChild(this.imageEl);\n        this.cropperEl.appendChild(this.imageClippedEl);\n        this.cropperEl.appendChild(this.regionEl);\n        this.cropperEl.appendChild(this.overlayEl);\n        this.cropperEl.appendChild(handleContainerEl);\n        this.containerEl.appendChild(this.cropperEl);\n        // And then finally insert it into the document\n        targetEl.parentElement.replaceChild(this.containerEl, targetEl);\n    }\n    /**\n     * Changes the image src.\n     * @param {String} src\n     */\n    setImage(src) {\n        // Add onload listener to reinitialize box\n        this.imageEl.onload = () => {\n            this.box = this.initializeBox(this.options);\n            this.redraw();\n        };\n        // Change image source\n        this.imageEl.src = src;\n        this.imageClippedEl.src = src;\n        return this;\n    }\n    /**\n     * Destroy the Croppr instance and replace with the original element.\n     */\n    destroy() {\n        this._restore.parent.replaceChild(this._restore.element, this.containerEl);\n    }\n    /**\n     * Create a new box region with a set of options.\n     * @param {Object} opts The options.\n     * @returns {Box}\n     */\n    initializeBox(opts) {\n        // Create initial box\n        const width = opts.startSize.width;\n        const height = opts.startSize.height;\n        let box = new Box(0, 0, width, height);\n        // console.log(\"🚀 ~ file: core.ts ~ line 202 ~ CropprCore ~ initializeBox ~ box\", box)\n        // Maintain ratio\n        box.constrainToRatio(opts.aspectRatio, [0.5, 0.5]);\n        // Maintain minimum/maximum size\n        const min = opts.minSize;\n        const max = opts.maxSize;\n        box.constrainToSize(max.width, max.height, min.width, min.height, [0.5, 0.5], opts.aspectRatio);\n        // Constrain to boundary\n        const parentWidth = this.cropperEl.offsetWidth;\n        const parentHeight = this.cropperEl.offsetHeight;\n        box.constrainToBoundary(parentWidth, parentHeight, [0.5, 0.5]);\n        // // Move to center\n        const x = this.cropperEl.offsetWidth / 2 - box.width() / 2;\n        const y = this.cropperEl.offsetHeight / 2 - box.height() / 2;\n        // console.log(\"🚀 ~ file: core.ts ~ line 219 ~ CropprCore ~ initializeBox ~ this.cropperEl\", this.cropperEl.offsetWidth)\n        // console.log(\"🚀 ~ file: core.ts ~ line 223 ~ CropprCore ~ initializeBox ~ x, y\", x, y)\n        box.move(x, y);\n        return box;\n    }\n    /**\n     * Draw visuals (border, handles, etc) for the current box.\n     */\n    redraw() {\n        // Round positional values to prevent subpixel coordinates, which can\n        // result in element that is rendered blurly\n        const width = Math.round(this.box.width()), height = Math.round(this.box.height()), x1 = Math.round(this.box.x1), y1 = Math.round(this.box.y1), x2 = Math.round(this.box.x2), y2 = Math.round(this.box.y2);\n        window.requestAnimationFrame(() => {\n            // Update region element\n            if (!this.regionEl)\n                return;\n            this.regionEl.style.transform = `translate(${x1}px, ${y1}px)`;\n            this.regionEl.style.width = width + 'px';\n            this.regionEl.style.height = height + 'px';\n            // Update clipped image element\n            this.imageClippedEl.style.clip = `rect(${y1}px, ${x2}px, ${y2}px, ${x1}px)`;\n            // Determine which handle to bring forward. The following code\n            // calculates the quadrant the box is in using bitwise operators.\n            // Reference: https://stackoverflow.com/questions/9718059\n            const center = this.box.getAbsolutePoint([0.5, 0.5]);\n            const xSign = (center[0] - this.cropperEl.offsetWidth / 2) >> 31;\n            const ySign = (center[1] - this.cropperEl.offsetHeight / 2) >> 31;\n            const quadrant = (xSign ^ ySign) + ySign + ySign + 4;\n            // The following equation calculates which handle index to bring\n            // forward. The equation is derived using algebra (if youre curious)\n            const foregroundHandleIndex = -2 * quadrant + 8;\n            // Update handle positions\n            for (let i = 0; i < this.handles.length; i++) {\n                let handle = this.handles[i];\n                // Calculate handle position\n                const handleWidth = handle.el.offsetWidth;\n                const handleHeight = handle.el.offsetHeight;\n                const left = x1 + width * handle.position[0] - handleWidth / 2;\n                const top = y1 + height * handle.position[1] - handleHeight / 2;\n                // Apply new position. The positional values are rounded to\n                // prevent subpixel positions which can result in a blurry element\n                handle.el.style.transform = `translate(${Math.round(left)}px, ${Math.round(top)}px)`;\n                handle.el.style.zIndex = foregroundHandleIndex == i ? 5 : 4;\n            }\n        });\n    }\n    /**\n     * Attach listeners for events emitted by the handles.\n     * Enables resizing of the region element.\n     */\n    attachHandlerEvents() {\n        const eventBus = this.eventBus;\n        eventBus.addEventListener('handlestart', this.onHandleMoveStart.bind(this));\n        eventBus.addEventListener('handlemove', this.onHandleMoveMoving.bind(this));\n        eventBus.addEventListener('handleend', this.onHandleMoveEnd.bind(this));\n    }\n    /**\n     * Attach event listeners for the crop region element.\n     * Enables dragging/moving of the region element.\n     */\n    attachRegionEvents() {\n        const eventBus = this.eventBus;\n        const self = this;\n        if (!this.regionEl)\n            return;\n        this.regionEl.addEventListener('mousedown', onMouseDown);\n        eventBus.addEventListener('regionstart', this.onRegionMoveStart.bind(this));\n        eventBus.addEventListener('regionmove', this.onRegionMoveMoving.bind(this));\n        eventBus.addEventListener('regionend', this.onRegionMoveEnd.bind(this));\n        function onMouseDown(e) {\n            e.stopPropagation();\n            document.addEventListener('mouseup', onMouseUp);\n            document.addEventListener('mousemove', onMouseMove);\n            // Notify parent\n            eventBus.dispatchEvent(new CustomEvent('regionstart', {\n                detail: { mouseX: e.clientX, mouseY: e.clientY },\n            }));\n        }\n        function onMouseMove(e) {\n            e.stopPropagation();\n            // Notify parent\n            eventBus.dispatchEvent(new CustomEvent('regionmove', {\n                detail: { mouseX: e.clientX, mouseY: e.clientY },\n            }));\n        }\n        function onMouseUp(e) {\n            e.stopPropagation();\n            document.removeEventListener('mouseup', onMouseUp);\n            document.removeEventListener('mousemove', onMouseMove);\n            // Notify parent\n            eventBus.dispatchEvent(new CustomEvent('regionend', {\n                detail: { mouseX: e.clientX, mouseY: e.clientY },\n            }));\n        }\n    }\n    /**\n     * Attach event listeners for the overlay element.\n     * Enables the creation of a new selection by dragging an empty area.\n     */\n    attachOverlayEvents() {\n        const SOUTHEAST_HANDLE_IDX = 4;\n        const self = this;\n        let tmpBox = null;\n        this.overlayEl.addEventListener('mousedown', onMouseDown);\n        function onMouseDown(e) {\n            e.stopPropagation();\n            document.addEventListener('mouseup', onMouseUp);\n            document.addEventListener('mousemove', onMouseMove);\n            // Calculate mouse's position in relative to the container\n            const container = self.cropperEl.getBoundingClientRect();\n            const mouseX = e.clientX - container.left;\n            const mouseY = e.clientY - container.top;\n            // Create new box at mouse position\n            tmpBox = self.box;\n            self.box = new Box(mouseX, mouseY, mouseX + 1, mouseY + 1);\n            // Activate the bottom right handle\n            self.eventBus.dispatchEvent(new CustomEvent('handlestart', {\n                detail: { handle: self.handles[SOUTHEAST_HANDLE_IDX] },\n            }));\n        }\n        function onMouseMove(e) {\n            e.stopPropagation();\n            self.eventBus.dispatchEvent(new CustomEvent('handlemove', {\n                detail: { mouseX: e.clientX, mouseY: e.clientY },\n            }));\n        }\n        function onMouseUp(e) {\n            e.stopPropagation();\n            document.removeEventListener('mouseup', onMouseUp);\n            document.removeEventListener('mousemove', onMouseMove);\n            // If the new box has no width and height, it suggests that\n            // the user had just clicked on an empty area and did not drag\n            // a new box (ie. an accidental click). In this scenario, we\n            // simply replace it with the previous box.\n            if (self.box.width() === 1 && self.box.height() === 1) {\n                self.box = tmpBox;\n                return;\n            }\n            self.eventBus.dispatchEvent(new CustomEvent('handleend', {\n                detail: { mouseX: e.clientX, mouseY: e.clientY },\n            }));\n        }\n    }\n    /**\n     * EVENT HANDLER\n     * Executes when user begins dragging a handle.\n     */\n    onHandleMoveStart(e) {\n        let handle = e.detail.handle;\n        // The origin point is the point where the box is scaled from.\n        // This is usually the opposite side/corner of the active handle.\n        const originPoint = [1 - handle.position[0], 1 - handle.position[1]];\n        let [originX, originY] = this.box.getAbsolutePoint(originPoint);\n        this.activeHandle = { handle, originPoint, originX, originY };\n        // Trigger callback\n        if (this.options.onCropStart !== null) {\n            this.options.onCropStart(this.getValue());\n        }\n    }\n    /**\n     * EVENT HANDLER\n     * Executes on handle move. Main logic to manage the movement of handles.\n     */\n    onHandleMoveMoving(e) {\n        let { mouseX, mouseY } = e.detail;\n        // Calculate mouse's position in relative to the container\n        let container = this.cropperEl.getBoundingClientRect();\n        mouseX = mouseX - container.left;\n        mouseY = mouseY - container.top;\n        // Ensure mouse is within the boundaries\n        if (mouseX < 0) {\n            mouseX = 0;\n        }\n        else if (mouseX > container.width) {\n            mouseX = container.width;\n        }\n        if (mouseY < 0) {\n            mouseY = 0;\n        }\n        else if (mouseY > container.height) {\n            mouseY = container.height;\n        }\n        // Bootstrap helper variables\n        let origin = this.activeHandle.originPoint.slice();\n        const originX = this.activeHandle.originX;\n        const originY = this.activeHandle.originY;\n        const handle = this.activeHandle.handle;\n        const TOP_MOVABLE = handle.constraints[0] === 1;\n        const RIGHT_MOVABLE = handle.constraints[1] === 1;\n        const BOTTOM_MOVABLE = handle.constraints[2] === 1;\n        const LEFT_MOVABLE = handle.constraints[3] === 1;\n        const MULTI_AXIS = (LEFT_MOVABLE || RIGHT_MOVABLE) && (TOP_MOVABLE || BOTTOM_MOVABLE);\n        // Apply movement to respective sides according to the handle's\n        // constraint values.\n        let x1 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x1;\n        let x2 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x2;\n        let y1 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y1;\n        let y2 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y2;\n        x1 = LEFT_MOVABLE ? mouseX : x1;\n        x2 = RIGHT_MOVABLE ? mouseX : x2;\n        y1 = TOP_MOVABLE ? mouseY : y1;\n        y2 = BOTTOM_MOVABLE ? mouseY : y2;\n        // Check if the user dragged past the origin point. If it did,\n        // we set the flipped flag to true.\n        let [isFlippedX, isFlippedY] = [false, false];\n        if (LEFT_MOVABLE || RIGHT_MOVABLE) {\n            isFlippedX = LEFT_MOVABLE ? mouseX > originX : mouseX < originX;\n        }\n        if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n            isFlippedY = TOP_MOVABLE ? mouseY > originY : mouseY < originY;\n        }\n        // If it is flipped, we swap the coordinates and flip the origin point.\n        if (isFlippedX) {\n            const tmp = x1;\n            x1 = x2;\n            x2 = tmp; // Swap x1 and x2\n            origin[0] = 1 - origin[0]; // Flip origin x point\n        }\n        if (isFlippedY) {\n            const tmp = y1;\n            y1 = y2;\n            y2 = tmp; // Swap y1 and y2\n            origin[1] = 1 - origin[1]; // Flip origin y point\n        }\n        // Create new box object\n        let box = new Box(x1, y1, x2, y2);\n        // Maintain aspect ratio\n        if (this.options.aspectRatio) {\n            const ratio = this.options.aspectRatio;\n            let isVerticalMovement = false;\n            if (MULTI_AXIS) {\n                isVerticalMovement = mouseY > box.y1 + ratio * box.width() || mouseY < box.y2 - ratio * box.width();\n            }\n            else if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n                isVerticalMovement = true;\n            }\n            const ratioMode = isVerticalMovement ? 'width' : 'height';\n            box.constrainToRatio(ratio, origin, ratioMode);\n        }\n        // Maintain minimum/maximum size\n        const min = this.options.minSize;\n        const max = this.options.maxSize;\n        box.constrainToSize(max.width, max.height, min.width, min.height, origin, this.options.aspectRatio);\n        // Constrain to boundary\n        const parentWidth = this.cropperEl.offsetWidth;\n        const parentHeight = this.cropperEl.offsetHeight;\n        box.constrainToBoundary(parentWidth, parentHeight, origin);\n        // Finally, update the visuals (border, handles, clipped image, etc)\n        this.box = box;\n        this.redraw();\n        // Trigger callback\n        if (this.options.onCropMove !== null) {\n            this.options.onCropMove(this.getValue());\n        }\n    }\n    /**\n     * EVENT HANDLER\n     * Executes on handle move end.\n     */\n    onHandleMoveEnd(e) {\n        // Trigger callback\n        if (this.options.onCropEnd !== null) {\n            this.options.onCropEnd(this.getValue());\n        }\n    }\n    /**\n     * EVENT HANDLER\n     * Executes when user starts moving the crop region.\n     */\n    onRegionMoveStart(e) {\n        let { mouseX, mouseY } = e.detail;\n        // Calculate mouse's position in relative to the container\n        let container = this.cropperEl.getBoundingClientRect();\n        mouseX = mouseX - container.left;\n        mouseY = mouseY - container.top;\n        this.currentMove = {\n            offsetX: mouseX - this.box.x1,\n            offsetY: mouseY - this.box.y1,\n        };\n        // Trigger callback\n        if (this.options.onCropStart !== null) {\n            this.options.onCropStart(this.getValue());\n        }\n    }\n    /**\n     * EVENT HANDLER\n     * Executes when user moves the crop region.\n     */\n    onRegionMoveMoving(e) {\n        let { mouseX, mouseY } = e.detail;\n        let { offsetX, offsetY } = this.currentMove;\n        // Calculate mouse's position in relative to the container\n        let container = this.cropperEl.getBoundingClientRect();\n        mouseX = mouseX - container.left;\n        mouseY = mouseY - container.top;\n        this.box.move(mouseX - offsetX, mouseY - offsetY);\n        // Ensure box is within the boundaries\n        if (this.box.x1 < 0) {\n            this.box.move(0, null);\n        }\n        if (this.box.x2 > container.width) {\n            this.box.move(container.width - this.box.width(), null);\n        }\n        if (this.box.y1 < 0) {\n            this.box.move(null, 0);\n        }\n        if (this.box.y2 > container.height) {\n            this.box.move(null, container.height - this.box.height());\n        }\n        // Update visuals\n        this.redraw();\n        // Trigger callback\n        if (this.options.onCropMove !== null) {\n            this.options.onCropMove(this.getValue());\n        }\n    }\n    /**\n     * EVENT HANDLER\n     * Executes when user stops moving the crop region (mouse up).\n     */\n    onRegionMoveEnd(e) {\n        // Trigger callback\n        if (this.options.onCropEnd !== null) {\n            this.options.onCropEnd(this.getValue());\n        }\n    }\n    /**\n     * Calculate the value of the crop region.\n     */\n    getValue(mode = null) {\n        if (mode === null) {\n            mode = this.options.returnMode;\n        }\n        if (mode == 'real') {\n            const actualWidth = this.imageEl.naturalWidth;\n            const actualHeight = this.imageEl.naturalHeight;\n            const { width: elementWidth, height: elementHeight } = this.imageEl.getBoundingClientRect();\n            const factorX = actualWidth / elementWidth;\n            const factorY = actualHeight / elementHeight;\n            return {\n                x: Math.round(this.box.x1 * factorX),\n                y: Math.round(this.box.y1 * factorY),\n                width: Math.round(this.box.width() * factorX),\n                height: Math.round(this.box.height() * factorY),\n            };\n        }\n        else if (mode == 'ratio') {\n            const { width: elementWidth, height: elementHeight } = this.imageEl.getBoundingClientRect();\n            return {\n                x: round(this.box.x1 / elementWidth, 3),\n                y: round(this.box.y1 / elementHeight, 3),\n                width: round(this.box.width() / elementWidth, 3),\n                height: round(this.box.height() / elementHeight, 3),\n            };\n        }\n        else if (mode == 'raw') {\n            return {\n                x: Math.round(this.box.x1),\n                y: Math.round(this.box.y1),\n                width: Math.round(this.box.width()),\n                height: Math.round(this.box.height()),\n            };\n        }\n    }\n    /**\n     * Parse user options and set default values.\n     */\n    static parseOptions(opts) {\n        const defaults = {\n            aspectRatio: null,\n            maxSize: { width: null, height: null },\n            minSize: { width: null, height: null },\n            startSize: { width: 100, height: 100, unit: '%' },\n            returnMode: 'real',\n            onInitialize: null,\n            onCropStart: null,\n            onCropMove: null,\n            onCropEnd: null,\n        };\n        // Parse aspect ratio\n        let aspectRatio = null;\n        if (opts.aspectRatio !== undefined) {\n            if (typeof opts.aspectRatio === 'number') {\n                aspectRatio = opts.aspectRatio;\n            }\n            else if (opts.aspectRatio instanceof Array) {\n                aspectRatio = opts.aspectRatio[1] / opts.aspectRatio[0];\n            }\n        }\n        // Parse max width/height\n        let maxSize = null;\n        if (opts.maxSize !== undefined && opts.maxSize !== null) {\n            maxSize = {\n                width: opts.maxSize[0] || null,\n                height: opts.maxSize[1] || null,\n                unit: opts.maxSize[2] || 'px',\n            };\n        }\n        // Parse min width/height\n        let minSize = null;\n        if (opts.minSize !== undefined && opts.minSize !== null) {\n            minSize = {\n                width: opts.minSize[0] || null,\n                height: opts.minSize[1] || null,\n                unit: opts.minSize[2] || 'px',\n            };\n        }\n        // Parse start size\n        let startSize = null;\n        if (opts.startSize !== undefined && opts.startSize !== null) {\n            startSize = {\n                width: opts.startSize[0] || null,\n                height: opts.startSize[1] || null,\n                unit: opts.startSize[2] || '%',\n            };\n        }\n        // Parse callbacks\n        let onInitialize = null;\n        if (typeof opts.onInitialize === 'function') {\n            onInitialize = opts.onInitialize;\n        }\n        let onCropStart = null;\n        if (typeof opts.onCropStart === 'function') {\n            onCropStart = opts.onCropStart;\n        }\n        let onCropEnd = null;\n        if (typeof opts.onCropEnd === 'function') {\n            onCropEnd = opts.onCropEnd;\n        }\n        let onCropMove = null;\n        if (typeof opts.onUpdate === 'function') {\n            // DEPRECATED: onUpdate is deprecated to create a more uniform\n            // callback API, such as: onCropStart, onCropMove, onCropEnd\n            console.warn('Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead.');\n            onCropMove = opts.onUpdate;\n        }\n        if (typeof opts.onCropMove === 'function') {\n            onCropMove = opts.onCropMove;\n        }\n        // Parse returnMode value\n        let returnMode = null;\n        if (opts.returnMode !== undefined) {\n            const s = opts.returnMode.toLowerCase();\n            if (['real', 'ratio', 'raw'].indexOf(s) === -1) {\n                throw 'Invalid return mode.';\n            }\n            returnMode = s;\n        }\n        // Create function to convert % values to pixels\n        const convertToPixels = function (container) {\n            const width = container.offsetWidth;\n            const height = container.offsetHeight;\n            // Convert sizes\n            const sizeKeys = ['maxSize', 'minSize', 'startSize'];\n            for (let i = 0; i < sizeKeys.length; i++) {\n                const key = sizeKeys[i];\n                if (this[key] !== null) {\n                    if (this[key].unit == '%') {\n                        if (this[key].width !== null) {\n                            this[key].width = (this[key].width / 100) * width;\n                        }\n                        if (this[key].height !== null) {\n                            this[key].height = (this[key].height / 100) * height;\n                        }\n                    }\n                    delete this[key].unit;\n                }\n            }\n        };\n        const defaultValue = (v, d) => (v !== null ? v : d);\n        return {\n            aspectRatio: defaultValue(aspectRatio, defaults.aspectRatio),\n            maxSize: defaultValue(maxSize, defaults.maxSize),\n            minSize: defaultValue(minSize, defaults.minSize),\n            startSize: defaultValue(startSize, defaults.startSize),\n            returnMode: defaultValue(returnMode, defaults.returnMode),\n            onInitialize: defaultValue(onInitialize, defaults.onInitialize),\n            onCropStart: defaultValue(onCropStart, defaults.onCropStart),\n            onCropMove: defaultValue(onCropMove, defaults.onCropMove),\n            onCropEnd: defaultValue(onCropEnd, defaults.onCropEnd),\n            convertToPixels: convertToPixels,\n        };\n    }\n}\n/**\n * HELPER FUNCTIONS\n */\nfunction round(value, decimals) {\n    return Number(Math.round((value + 'e' + decimals)) + 'e-' + decimals);\n}\n\n/**\n * Croppr.js\n * https://github.com/jamesssooi/Croppr.js\n *\n * A JavaScript image cropper that's lightweight, awesome, and has\n * zero dependencies.\n *\n * (C) 2017 James Ooi. Released under the MIT License.\n */\n/**\n * This class is a wrapper for CropprCore that merely implements the main\n * interfaces for the Croppr instance. Look into CropprCore for all the\n * main logic.\n */\nclass Croppr extends CropprCore {\n    /**\n     * @constructor\n     * Calls the CropprCore's constructor.\n     */\n    constructor(element, options, _deferred = false) {\n        super(element, options, _deferred);\n    }\n    /**\n     * Gets the value of the crop region.\n     * @param {String} [mode] Which mode of calculation to use: 'real', 'ratio' or\n     *      'raw'.\n     */\n    getValue(mode) {\n        return super.getValue(mode);\n    }\n    /**\n     * Changes the image src.\n     * @param {String} src\n     */\n    setImage(src) {\n        return super.setImage(src);\n    }\n    /**\n     * Destroys the Croppr instance\n     */\n    destroy() {\n        return super.destroy();\n    }\n    /**\n     * Moves the crop region to a specified coordinate.\n     * @param {Number} x\n     * @param {Number} y\n     */\n    moveTo(x, y) {\n        this.box.move(x, y);\n        this.redraw();\n        // Call the callback\n        if (this.options.onCropEnd !== null) {\n            this.options.onCropEnd(this.getValue());\n        }\n        return this;\n    }\n    /**\n     * Resizes the crop region to a specified width and height.\n     * @param {Number} width\n     * @param {Number} height\n     * @param {Array} origin The origin point to resize from.\n     *      Defaults to [0.5, 0.5] (center).\n     */\n    resizeTo(width, height, origin = [0.5, 0.5]) {\n        this.box.resize(width, height, origin);\n        //////////////////////////////////////////////////////////////////\n        const parentWidth = this.cropperEl.offsetWidth;\n        const parentHeight = this.cropperEl.offsetHeight;\n        this.box.constrainToBoundary(parentWidth, parentHeight, [0.5, 0.5]);\n        ///////////////////////////////////////////////////////////////////\n        this.redraw();\n        // Call the callback\n        if (this.options.onCropEnd !== null) {\n            this.options.onCropEnd(this.getValue());\n        }\n        return this;\n    }\n    /**\n     * Scale the crop region by a factor.\n     * @param {Number} factor\n     * @param {Array} origin The origin point to resize from.\n     *      Defaults to [0.5, 0.5] (center).\n     */\n    scaleBy(factor, origin = [0.5, 0.5]) {\n        this.box.scale(factor, origin);\n        this.redraw();\n        // Call the callback\n        if (this.options.onCropEnd !== null) {\n            this.options.onCropEnd(this.getValue());\n        }\n        return this;\n    }\n    /**\n     * Resets the crop region to the initial settings.\n     */\n    reset(newOptions) {\n        if (newOptions) {\n            this.options = { ...this.options, newOptions };\n        }\n        this.box = this.initializeBox(this.options);\n        // console.log('🚀 ~ file: croppr.ts ~ line 110 ~ Croppr ~ reset ~ this.box', this.box);\n        this.redraw();\n        // Call the callback\n        if (this.options.onCropEnd !== null) {\n            this.options.onCropEnd(this.getValue());\n        }\n        return this;\n    }\n    enableVisibility(state) {\n        let croppContainer = document.querySelector(\".croppr-container\");\n        if (!croppContainer)\n            throw new Error(\"THere is not any croppr\");\n        if (state) {\n            croppContainer.style.display = \"block\";\n        }\n        else {\n            croppContainer.style.display = \"none\";\n        }\n    }\n}\n\nclass CropperWrapperComponent {\n    constructor() {\n        this.imageSrc = '';\n        this.croppr = null;\n        this.croppSize = { width: 150, height: 150 };\n        this.croppUpdate = new EventEmitter();\n    }\n    onKeyDown() {\n        if (!this.croppr)\n            return;\n        this.croppr.options.aspectRatio = 1.0;\n    }\n    onKeyUp() {\n        if (!this.croppr)\n            return;\n        this.croppr.options.aspectRatio = null;\n    }\n    set _imageSrc(value) {\n        this.imageSrc = value;\n    }\n    set setSize(value) {\n        this.croppSize = value;\n        if (this.croppr)\n            this.croppr.resizeTo(this.croppSize.width, this.croppSize.height);\n    }\n    ngOnInit() { }\n    ngAfterViewInit() {\n        this.croppr = new Croppr('#croppr', {\n            minSize: [32, 32, 'px'],\n            startSize: [this.croppSize.width, this.croppSize.height, 'px'],\n            onInitialize: (data) => {\n                this.croppUpdate.emit(data.getValue());\n            },\n            onCropEnd: (data) => {\n                this.croppUpdate.emit(data);\n            },\n        });\n    }\n    ngOnDestroy() {\n        if (!this.croppr)\n            return;\n        this.croppr.destroy();\n    }\n}\nCropperWrapperComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: CropperWrapperComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nCropperWrapperComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"15.0.4\", type: CropperWrapperComponent, selector: \"lib-cropper-wrapper\", inputs: { _imageSrc: \"_imageSrc\", setSize: \"setSize\" }, outputs: { croppUpdate: \"croppUpdate\" }, host: { listeners: { \"document:keydown.Control\": \"onKeyDown($event)\", \"document:keyup.Control\": \"onKeyUp($event)\" } }, ngImport: i0, template: \"<img id=\\\"image-full\\\" [src]=\\\"this.imageSrc\\\" id=\\\"croppr\\\" />\\n\", styles: [\"\"] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: CropperWrapperComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'lib-cropper-wrapper', template: \"<img id=\\\"image-full\\\" [src]=\\\"this.imageSrc\\\" id=\\\"croppr\\\" />\\n\" }]\n        }], ctorParameters: function () { return []; }, propDecorators: { onKeyDown: [{\n                type: HostListener,\n                args: ['document:keydown.Control', ['$event']]\n            }], onKeyUp: [{\n                type: HostListener,\n                args: ['document:keyup.Control', ['$event']]\n            }], _imageSrc: [{\n                type: Input\n            }], setSize: [{\n                type: Input\n            }], croppUpdate: [{\n                type: Output\n            }] } });\n\n// const Croppr = require('../../services/croppr-service')\nclass EditImageComponent {\n    constructor(chRef) {\n        this.chRef = chRef;\n        this.imageSrc = '';\n        this.color = '';\n        this.controlPanelIndex = 0;\n        this.showCrop = false;\n        this.observer = null;\n        this.allFormats = ['webp', 'jpeg', 'png'];\n        this.initialState = {};\n        this.state = {\n            quality: 92,\n            maxHeight: 1000,\n            maxWidth: 1000,\n            cropHeight: 150,\n            cropWidth: 150,\n            maintainAspectRatio: true,\n            format: 'jpeg',\n            arrayCopiedImages: [],\n            originImageSrc: '',\n        };\n        this.croppSize = { width: 150, height: 150 };\n        this.isMobile = false;\n        this.closeModal = new EventEmitter();\n    }\n    ngOnInit() {\n        this.state = JSON.parse(JSON.stringify({ ...this.state, ...this.initialState }));\n        this.isMobile = window.innerWidth < 800;\n    }\n    onCloseEditPanel(saveChanges = false) {\n        if (this.observer instanceof ResizeObserver) {\n            let imageCroperElRef = document.getElementById('image-croper');\n            let imageFullElRef = document.getElementById('image-full');\n            this.observer.unobserve(imageCroperElRef);\n            this.observer.unobserve(imageFullElRef);\n        }\n        this.showCrop = false;\n        if (saveChanges)\n            this.closeModal.next({ state: this.state, imageSrc: this.imageSrc });\n        else\n            this.closeModal.next(null);\n    }\n    onControlPanelIndexChange(idex) {\n        this.controlPanelIndex = idex;\n    }\n    calculateSize() {\n        if (this.imageSrc && this.imageSrc.length) {\n            return Math.ceil(((3 / 4) * this.imageSrc.length) / 1024);\n        }\n        else {\n            return \"\";\n        }\n    }\n    async onChangeSize(changeHeight = false) {\n        try {\n            this.imageSrc = await convertImageUsingCanvas(this.state.originImageSrc, changeHeight, this.state);\n            this.chRef.markForCheck();\n        }\n        catch (error) {\n            console.error('🚀 ~ file: edit-image.component.ts ~ line 76 ~ EditImageComponent ~ onChangeSize ~ error', error);\n            this.chRef.markForCheck();\n        }\n    }\n    async onChangeQuality() {\n        try {\n            this.imageSrc = await convertImageUsingCanvas(this.state.originImageSrc, false, this.state);\n            this.chRef.markForCheck();\n        }\n        catch (error) {\n            console.error('🚀 ~ file: edit-image.component.ts ~ line 86 ~ EditImageComponent ~ onChangeQuality ~ error', error);\n            this.chRef.markForCheck();\n        }\n    }\n    async onChangeFormat() {\n        try {\n            this.imageSrc = await convertImageUsingCanvas(this.state.originImageSrc, false, this.state);\n            this.chRef.markForCheck();\n        }\n        catch (error) {\n            console.error('🚀 ~ file: edit-image.component.ts ~ line 98 ~ EditImageComponent ~ onChangeFormat ~ error', error);\n            this.chRef.markForCheck();\n        }\n    }\n    async onRestore() {\n        try {\n            if (this.state.arrayCopiedImages.length > 1) {\n                this.state.arrayCopiedImages.pop();\n                let newValue = this.state.arrayCopiedImages[this.state.arrayCopiedImages.length - 1];\n                this.state = {\n                    ...this.state,\n                    maxHeight: newValue.height,\n                    maxWidth: newValue.width,\n                    quality: newValue.quality,\n                    format: newValue.format,\n                    originImageSrc: newValue.originImageSrc,\n                    basicFilters: newValue.basicFilters,\n                };\n                this.imageSrc = newValue.lastImage;\n                this.chRef.markForCheck();\n            }\n        }\n        catch (e) {\n            console.error('🚀 ~ file: edit-image.component.ts ~ line 126 ~ EditImageComponent ~ onRestore ~ e', e);\n        }\n    }\n    onCroppUpdate(data) {\n        this.croppState = data;\n        this.state.cropHeight = data.height;\n        this.state.cropWidth = data.width;\n    }\n    onChangeCrop() {\n        this.croppSize = { width: this.state.cropWidth, height: this.state.cropHeight };\n    }\n    onCrop() {\n        // const dataHolderRect = document.querySelector('.croppr-container').getBoundingClientRect();\n        const canvas = document.createElement('canvas');\n        return new Promise((resolve, reject) => {\n            let ctx = canvas.getContext('2d');\n            let image = new Image();\n            image.src = this.imageSrc;\n            image.onload = () => {\n                // let ratio = image.height / dataHolderRect.height;\n                let newWidth = this.croppState?.width;\n                let newHeight = this.croppState?.height;\n                canvas.height = newHeight;\n                canvas.width = newWidth;\n                ctx.drawImage(image, Math.abs(this.croppState?.x || 0), Math.abs(this.croppState?.y || 0), this.croppState?.width || 0, this.croppState?.height || 0, 0, 0, this.croppState?.width || 0, this.croppState?.height || 0);\n                return resolve(canvas.toDataURL(`image/${this.state.format}`, this.state.quality));\n            };\n            image.onerror = (e) => {\n                reject(e);\n            };\n        })\n            .then((dataUri) => {\n            this.imageSrc = dataUri;\n            this.showCrop = false;\n            this.state.maxWidth = canvas.width;\n            this.state.maxHeight = canvas.height;\n            this.state.originImageSrc = dataUri;\n            this.state.cropHeight = 150;\n            this.state.cropWidth = 150;\n            saveState(this.state, dataUri);\n            this.croppSize = { width: 150, height: 150 };\n            this.chRef.markForCheck();\n        })\n            .catch((e) => {\n            console.error(e);\n        });\n    }\n    async onChangeFilters(data) {\n        try {\n            if (!this.state.basicFilters) {\n                this.state.basicFilters = data;\n            }\n            else {\n                this.state.basicFilters = { ...this.state.basicFilters, ...data };\n            }\n            this.imageSrc = await convertImageUsingCanvas(this.state.originImageSrc, false, this.state);\n            this.chRef.markForCheck();\n        }\n        catch (e) {\n            console.error('🚀 ~ file: edit-image.component.ts ~ line 250 ~ EditImageComponent ~ onChangeFilters ~ e', e);\n        }\n    }\n}\nEditImageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: EditImageComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });\nEditImageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"15.0.4\", type: EditImageComponent, selector: \"lib-edit-image\", inputs: { labels: \"labels\", imageSrc: \"imageSrc\", color: \"color\", initialState: \"initialState\" }, outputs: { closeModal: \"closeModal\" }, ngImport: i0, template: \"<div id=\\\"popup\\\" class=\\\"popup\\\">\\n  <div\\n    style=\\\"\\n      flex-direction: row;\\n      box-sizing: border-box;\\n      display: flex;\\n      place-content: center flex-end;\\n      align-items: center;\\n      padding: 0px 16px;\\n    \\\"\\n  >\\n    <button class=\\\"icon-btn\\\" (click)=\\\"onCloseEditPanel(false)\\\">\\n      <span class=\\\"material-icons\\\">clear</span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"image-container\\\">\\n    <div class=\\\"image-holder-full\\\">\\n      <img id=\\\"image-full\\\" [src]=\\\"this.imageSrc\\\" [style.display]=\\\"showCrop ? 'none' : ''\\\" />\\n\\n      <lib-cropper-wrapper\\n        [setSize]=\\\"this.croppSize\\\"\\n        (croppUpdate)=\\\"onCroppUpdate($event)\\\"\\n        [_imageSrc]=\\\"this.imageSrc\\\"\\n        *ngIf=\\\"showCrop\\\"\\n      ></lib-cropper-wrapper>\\n    </div>\\n\\n    <div class=\\\"control-panel\\\">\\n      <lib-tabs [color]=\\\"this.color\\\" [_labels]=\\\"['Basic', 'Filters']\\\" (indexActivatedChange)=\\\"onControlPanelIndexChange($event)\\\">\\n        <ng-container *ngIf=\\\"controlPanelIndex == 0\\\">\\n          <ng-container *ngIf=\\\"!isMobile || (isMobile && !showCrop)\\\">\\n            <div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n              <p class=\\\"item-panel\\\">{{ labels['Quality'] }}</p>\\n              <p class=\\\"item-panel\\\">{{ this.state.quality + '%' }}</p>\\n            </div>\\n\\n            <div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n              <input\\n                [readonly]=\\\"showCrop\\\"\\n                [disabled]=\\\"showCrop\\\"\\n                class=\\\"input-range\\\"\\n                (change)=\\\"onChangeQuality()\\\"\\n                [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n                [(ngModel)]=\\\"this.state.quality\\\"\\n                type=\\\"range\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                value=\\\"50\\\"\\n              />\\n            </div>\\n\\n            <div class=\\\"item-panel\\\" style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n              {{ labels['Max dimensions'] }}\\n              <div style=\\\"display: flex; align-items: center\\\">\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  type=\\\"checkbox\\\"\\n                  [(ngModel)]=\\\"this.state.maintainAspectRatio\\\"\\n                  [style.color]=\\\"color\\\"\\n                />\\n                <span class=\\\"caption\\\">{{ labels['aspect-ratio'] }}</span>\\n              </div>\\n            </div>\\n\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-flow: row wrap;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start space-between;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%\\\">\\n                <label>{{ labels['max-width(px)'] }}</label>\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  (change)=\\\"onChangeSize(false)\\\"\\n                  placeholder=\\\"{{ labels['max-width(px)'] }}\\\"\\n                  [(ngModel)]=\\\"this.state.maxWidth\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%\\\">\\n                <label>{{ labels['max-height(px)'] }}</label>\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  (change)=\\\"onChangeSize(true)\\\"\\n                  placeholder=\\\"{{ labels['max-height(px)'] }}\\\"\\n                  [(ngModel)]=\\\"this.state.maxHeight\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n            </div>\\n\\n            <p class=\\\"item-panel\\\">{{ labels['Format'] }}</p>\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-direction: row;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"width: 100%\\\">\\n                <select [disabled]=\\\"showCrop\\\" [(ngModel)]=\\\"this.state.format\\\" (change)=\\\"onChangeFormat()\\\">\\n                  <option *ngFor=\\\"let formatItem of allFormats\\\" [value]=\\\"formatItem\\\">{{ formatItem }}</option>\\n                </select>\\n              </div>\\n            </div>\\n          </ng-container>\\n          <!-- <p class=\\\"item-panel\\\">{{ labels['Rotate'] }}</p>\\n\\n          <div\\n            style=\\\"\\n              margin-top: 8px !important;\\n              flex-direction: row;\\n              box-sizing: border-box;\\n              display: flex;\\n              place-content: flex-start;\\n              align-items: flex-start;\\n            \\\"\\n          >\\n            <button [disabled]=\\\"showCrop\\\" class=\\\"icon-btn\\\" style=\\\"padding-left: 0px\\\" (click)=\\\"onRotate(90)\\\">\\n              <span class=\\\"material-icons\\\"> rotate_left </span>\\n            </button>\\n            <button [disabled]=\\\"showCrop\\\" class=\\\"icon-btn\\\" (click)=\\\"onRestore()\\\" (click)=\\\"onRotate(-90)\\\">\\n              <span class=\\\"material-icons\\\"> rotate_right </span>\\n            </button>\\n          </div>\\n\\n          <hr />\\n          <br /> -->\\n\\n          <div style=\\\"display: flex; justify-content: space-between; margin-bottom: 8px\\\">\\n            <span style=\\\"display: flex; align-items: center\\\">\\n              <input type=\\\"checkbox\\\" [(ngModel)]=\\\"showCrop\\\" [style.color]=\\\"color\\\" style=\\\"margin-bottom: 3px\\\" />\\n              <span class=\\\"item-panel\\\" style=\\\"margin-left: 4px\\\">{{ labels['Crop'] }}</span>\\n            </span>\\n          </div>\\n\\n          <ng-container *ngIf=\\\"showCrop\\\">\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-flow: row wrap;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start space-between;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%; margin-bottom: 8px\\\">\\n                <label>{{ labels['width(px)'] }}</label>\\n                <input\\n                  (change)=\\\"onChangeCrop()\\\"\\n                  placeholder=\\\"{{ labels['width(px)'] }}\\\"\\n                  [(ngModel)]=\\\"state.cropWidth\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%; margin-bottom: 8px\\\">\\n                <label>{{ labels['height(px)'] }}</label>\\n                <input\\n                  (change)=\\\"onChangeCrop()\\\"\\n                  placeholder=\\\"{{ labels['height(px)'] }}\\\"\\n                  [(ngModel)]=\\\"state.cropHeight\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n            </div>\\n\\n            <p style=\\\"margin-bottom: 4px !important\\\">\\n              <button title=\\\"Cut the image\\\" class=\\\"icon-btn\\\" (click)=\\\"onCrop()\\\">\\n                <span class=\\\"material-icons\\\"> crop </span>\\n              </button>\\n            </p>\\n          </ng-container>\\n        </ng-container>\\n        <ng-container *ngIf=\\\"controlPanelIndex == 1\\\">\\n          <lib-basic-filters\\n            [filterState]=\\\"this.state.basicFilters\\\"\\n            (changeFilter)=\\\"onChangeFilters($event)\\\"\\n            [labels]=\\\"this.labels\\\"\\n            [color]=\\\"this.color\\\"\\n          ></lib-basic-filters>\\n        </ng-container>\\n      </lib-tabs>\\n\\n      <button\\n        title=\\\"{{ labels['Undo'] }}\\\"\\n        [disabled]=\\\"this.state.arrayCopiedImages.length <= 1\\\"\\n        style=\\\"position: absolute; right: 10px; top: 30px\\\"\\n        class=\\\"icon-btn\\\"\\n        (click)=\\\"onRestore()\\\"\\n      >\\n        <span class=\\\"material-icons\\\"> refresh </span>\\n      </button>\\n      <div\\n        style=\\\"\\n          flex-direction: row;\\n          box-sizing: border-box;\\n          display: flex;\\n          place-content: center space-between;\\n          align-items: center;\\n          margin-top: 8px;\\n        \\\"\\n      >\\n        <button class=\\\"save-btn\\\" (click)=\\\"onCloseEditPanel(true)\\\">{{ labels['Save'] }}</button>\\n\\n        <p\\n          *ngIf=\\\"this.calculateSize()\\\"\\n          class=\\\"caption image-caption\\\"\\n          [ngStyle]=\\\"{\\n            color: this.calculateSize() > 120 ? '#f44336' : 'unset',\\n            fontWeight: this.calculateSize() > 120 ? '500' : 'unset'\\n          }\\\"\\n        >\\n          size: {{ this.calculateSize() }}Kb &nbsp; {{ this.state.format }}\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\", styles: [\".popup{width:100vw;max-height:100%;height:100%;overflow:auto;position:fixed;top:0;left:0;background-color:#000c;z-index:1000;padding:24px 16px;color:#fff;box-sizing:border-box;animation-name:show;animation-duration:.4s}.popup .image-container{margin-top:50px;margin-bottom:50px;width:100%;flex-flow:row wrap;box-sizing:border-box;display:flex;place-content:flex-start center;align-items:flex-start}.popup .image-container .image-holder-full{height:auto;width:auto;position:relative;display:contents}.popup .material-icons{color:#fff}.popup img{vertical-align:middle;max-height:650px;max-width:100%;object-fit:cover;object-position:center}@media (max-width: 1024px){.popup{background-color:#000000d9;padding:8px}.popup img{max-height:100%;max-width:100%}}@media (max-width: 599px){.popup img{margin:0}}.popup .control-panel{color:#fff;background-color:#000000eb;margin:0 16px;padding:16px;width:18rem;border-radius:8px;flex-direction:column;box-sizing:border-box;display:flex;place-content:stretch flex-start;align-items:stretch;max-width:100%;position:relative}@media (max-width: 599px){.popup .control-panel{margin:8px 0;width:100%}}.popup .control-panel .title-panel{padding:0 4px;font-size:17px;font-weight:500;margin-bottom:16px!important}.popup .control-panel .item-panel{padding:0;font-size:14px;font-weight:500}.image-croper{position:absolute;width:180px;height:180px;min-height:64px;min-width:64px;border:2.5px solid #fafafa;box-sizing:border-box;resize:both;overflow:auto;opacity:0;border-radius:4px;overflow:hidden;z-index:10}.image-croper #image-croper-header{padding:0;cursor:move;z-index:9;background-color:transparent;color:#fff;height:100%;display:grid;gap:0px;grid-template-columns:repeat(3,1fr);width:100%;box-sizing:border-box;position:absolute;top:50%;transform:translateY(-50%);opacity:.8}.image-croper #image-croper-header .material-icons{color:#fff}.input-range{margin-bottom:16px;margin-top:4px}input[type=checkbox]{cursor:pointer}.form-field{margin-bottom:16px}.form-field label{font-size:12px;opacity:.92;margin-bottom:4px;display:block}.form-field input{height:34px;width:100%;box-sizing:border-box;border-radius:4px;border:none;padding:2px 8px;outline:none}.form-field select{height:34px;width:100%;box-sizing:border-box;border-radius:4px;border:none;padding:2px 8px;outline:none;background-color:#fff}.save-btn{padding:0 8px;height:34px;box-sizing:border-box;background-color:#fff;color:#000;border:none;border-radius:4px;cursor:pointer}.save-btn:active{transform:scale(.95)}\\n\"], dependencies: [{ kind: \"directive\", type: i1.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i1.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i1.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }, { kind: \"directive\", type: i2.NgSelectOption, selector: \"option\", inputs: [\"ngValue\", \"value\"] }, { kind: \"directive\", type: i2.ɵNgSelectMultipleOption, selector: \"option\", inputs: [\"ngValue\", \"value\"] }, { kind: \"directive\", type: i2.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { kind: \"directive\", type: i2.NumberValueAccessor, selector: \"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]\" }, { kind: \"directive\", type: i2.RangeValueAccessor, selector: \"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]\" }, { kind: \"directive\", type: i2.CheckboxControlValueAccessor, selector: \"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]\" }, { kind: \"directive\", type: i2.SelectControlValueAccessor, selector: \"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]\", inputs: [\"compareWith\"] }, { kind: \"directive\", type: i2.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { kind: \"directive\", type: i2.MinValidator, selector: \"input[type=number][min][formControlName],input[type=number][min][formControl],input[type=number][min][ngModel]\", inputs: [\"min\"] }, { kind: \"directive\", type: i2.MaxValidator, selector: \"input[type=number][max][formControlName],input[type=number][max][formControl],input[type=number][max][ngModel]\", inputs: [\"max\"] }, { kind: \"directive\", type: i2.NgModel, selector: \"[ngModel]:not([formControlName]):not([formControl])\", inputs: [\"name\", \"disabled\", \"ngModel\", \"ngModelOptions\"], outputs: [\"ngModelChange\"], exportAs: [\"ngModel\"] }, { kind: \"component\", type: TabsComponent, selector: \"lib-tabs\", inputs: [\"color\", \"_labels\", \"_indexActivated\"], outputs: [\"indexActivatedChange\"] }, { kind: \"component\", type: BasicFiltersComponent, selector: \"lib-basic-filters\", inputs: [\"color\", \"labels\", \"filterState\"], outputs: [\"changeFilter\"] }, { kind: \"component\", type: CropperWrapperComponent, selector: \"lib-cropper-wrapper\", inputs: [\"_imageSrc\", \"setSize\"], outputs: [\"croppUpdate\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: EditImageComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'lib-edit-image', template: \"<div id=\\\"popup\\\" class=\\\"popup\\\">\\n  <div\\n    style=\\\"\\n      flex-direction: row;\\n      box-sizing: border-box;\\n      display: flex;\\n      place-content: center flex-end;\\n      align-items: center;\\n      padding: 0px 16px;\\n    \\\"\\n  >\\n    <button class=\\\"icon-btn\\\" (click)=\\\"onCloseEditPanel(false)\\\">\\n      <span class=\\\"material-icons\\\">clear</span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"image-container\\\">\\n    <div class=\\\"image-holder-full\\\">\\n      <img id=\\\"image-full\\\" [src]=\\\"this.imageSrc\\\" [style.display]=\\\"showCrop ? 'none' : ''\\\" />\\n\\n      <lib-cropper-wrapper\\n        [setSize]=\\\"this.croppSize\\\"\\n        (croppUpdate)=\\\"onCroppUpdate($event)\\\"\\n        [_imageSrc]=\\\"this.imageSrc\\\"\\n        *ngIf=\\\"showCrop\\\"\\n      ></lib-cropper-wrapper>\\n    </div>\\n\\n    <div class=\\\"control-panel\\\">\\n      <lib-tabs [color]=\\\"this.color\\\" [_labels]=\\\"['Basic', 'Filters']\\\" (indexActivatedChange)=\\\"onControlPanelIndexChange($event)\\\">\\n        <ng-container *ngIf=\\\"controlPanelIndex == 0\\\">\\n          <ng-container *ngIf=\\\"!isMobile || (isMobile && !showCrop)\\\">\\n            <div style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n              <p class=\\\"item-panel\\\">{{ labels['Quality'] }}</p>\\n              <p class=\\\"item-panel\\\">{{ this.state.quality + '%' }}</p>\\n            </div>\\n\\n            <div style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\">\\n              <input\\n                [readonly]=\\\"showCrop\\\"\\n                [disabled]=\\\"showCrop\\\"\\n                class=\\\"input-range\\\"\\n                (change)=\\\"onChangeQuality()\\\"\\n                [ngStyle]=\\\"{ maxWidth: '100%', width: '100%', color: color }\\\"\\n                [(ngModel)]=\\\"this.state.quality\\\"\\n                type=\\\"range\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                value=\\\"50\\\"\\n              />\\n            </div>\\n\\n            <div class=\\\"item-panel\\\" style=\\\"display: flex; width: 100%; justify-content: space-between\\\">\\n              {{ labels['Max dimensions'] }}\\n              <div style=\\\"display: flex; align-items: center\\\">\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  type=\\\"checkbox\\\"\\n                  [(ngModel)]=\\\"this.state.maintainAspectRatio\\\"\\n                  [style.color]=\\\"color\\\"\\n                />\\n                <span class=\\\"caption\\\">{{ labels['aspect-ratio'] }}</span>\\n              </div>\\n            </div>\\n\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-flow: row wrap;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start space-between;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%\\\">\\n                <label>{{ labels['max-width(px)'] }}</label>\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  (change)=\\\"onChangeSize(false)\\\"\\n                  placeholder=\\\"{{ labels['max-width(px)'] }}\\\"\\n                  [(ngModel)]=\\\"this.state.maxWidth\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%\\\">\\n                <label>{{ labels['max-height(px)'] }}</label>\\n                <input\\n                  [readonly]=\\\"showCrop\\\"\\n                  [disabled]=\\\"showCrop\\\"\\n                  (change)=\\\"onChangeSize(true)\\\"\\n                  placeholder=\\\"{{ labels['max-height(px)'] }}\\\"\\n                  [(ngModel)]=\\\"this.state.maxHeight\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n            </div>\\n\\n            <p class=\\\"item-panel\\\">{{ labels['Format'] }}</p>\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-direction: row;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"width: 100%\\\">\\n                <select [disabled]=\\\"showCrop\\\" [(ngModel)]=\\\"this.state.format\\\" (change)=\\\"onChangeFormat()\\\">\\n                  <option *ngFor=\\\"let formatItem of allFormats\\\" [value]=\\\"formatItem\\\">{{ formatItem }}</option>\\n                </select>\\n              </div>\\n            </div>\\n          </ng-container>\\n          <!-- <p class=\\\"item-panel\\\">{{ labels['Rotate'] }}</p>\\n\\n          <div\\n            style=\\\"\\n              margin-top: 8px !important;\\n              flex-direction: row;\\n              box-sizing: border-box;\\n              display: flex;\\n              place-content: flex-start;\\n              align-items: flex-start;\\n            \\\"\\n          >\\n            <button [disabled]=\\\"showCrop\\\" class=\\\"icon-btn\\\" style=\\\"padding-left: 0px\\\" (click)=\\\"onRotate(90)\\\">\\n              <span class=\\\"material-icons\\\"> rotate_left </span>\\n            </button>\\n            <button [disabled]=\\\"showCrop\\\" class=\\\"icon-btn\\\" (click)=\\\"onRestore()\\\" (click)=\\\"onRotate(-90)\\\">\\n              <span class=\\\"material-icons\\\"> rotate_right </span>\\n            </button>\\n          </div>\\n\\n          <hr />\\n          <br /> -->\\n\\n          <div style=\\\"display: flex; justify-content: space-between; margin-bottom: 8px\\\">\\n            <span style=\\\"display: flex; align-items: center\\\">\\n              <input type=\\\"checkbox\\\" [(ngModel)]=\\\"showCrop\\\" [style.color]=\\\"color\\\" style=\\\"margin-bottom: 3px\\\" />\\n              <span class=\\\"item-panel\\\" style=\\\"margin-left: 4px\\\">{{ labels['Crop'] }}</span>\\n            </span>\\n          </div>\\n\\n          <ng-container *ngIf=\\\"showCrop\\\">\\n            <div\\n              style=\\\"\\n                margin-top: 8px !important;\\n                flex-flow: row wrap;\\n                box-sizing: border-box;\\n                display: flex;\\n                place-content: flex-start space-between;\\n                align-items: flex-start;\\n              \\\"\\n            >\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%; margin-bottom: 8px\\\">\\n                <label>{{ labels['width(px)'] }}</label>\\n                <input\\n                  (change)=\\\"onChangeCrop()\\\"\\n                  placeholder=\\\"{{ labels['width(px)'] }}\\\"\\n                  [(ngModel)]=\\\"state.cropWidth\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n              <div class=\\\"form-field\\\" style=\\\"max-width: 48%; width: 48%; margin-bottom: 8px\\\">\\n                <label>{{ labels['height(px)'] }}</label>\\n                <input\\n                  (change)=\\\"onChangeCrop()\\\"\\n                  placeholder=\\\"{{ labels['height(px)'] }}\\\"\\n                  [(ngModel)]=\\\"state.cropHeight\\\"\\n                  type=\\\"number\\\"\\n                  [min]=\\\"0\\\"\\n                  [max]=\\\"2000\\\"\\n                />\\n              </div>\\n            </div>\\n\\n            <p style=\\\"margin-bottom: 4px !important\\\">\\n              <button title=\\\"Cut the image\\\" class=\\\"icon-btn\\\" (click)=\\\"onCrop()\\\">\\n                <span class=\\\"material-icons\\\"> crop </span>\\n              </button>\\n            </p>\\n          </ng-container>\\n        </ng-container>\\n        <ng-container *ngIf=\\\"controlPanelIndex == 1\\\">\\n          <lib-basic-filters\\n            [filterState]=\\\"this.state.basicFilters\\\"\\n            (changeFilter)=\\\"onChangeFilters($event)\\\"\\n            [labels]=\\\"this.labels\\\"\\n            [color]=\\\"this.color\\\"\\n          ></lib-basic-filters>\\n        </ng-container>\\n      </lib-tabs>\\n\\n      <button\\n        title=\\\"{{ labels['Undo'] }}\\\"\\n        [disabled]=\\\"this.state.arrayCopiedImages.length <= 1\\\"\\n        style=\\\"position: absolute; right: 10px; top: 30px\\\"\\n        class=\\\"icon-btn\\\"\\n        (click)=\\\"onRestore()\\\"\\n      >\\n        <span class=\\\"material-icons\\\"> refresh </span>\\n      </button>\\n      <div\\n        style=\\\"\\n          flex-direction: row;\\n          box-sizing: border-box;\\n          display: flex;\\n          place-content: center space-between;\\n          align-items: center;\\n          margin-top: 8px;\\n        \\\"\\n      >\\n        <button class=\\\"save-btn\\\" (click)=\\\"onCloseEditPanel(true)\\\">{{ labels['Save'] }}</button>\\n\\n        <p\\n          *ngIf=\\\"this.calculateSize()\\\"\\n          class=\\\"caption image-caption\\\"\\n          [ngStyle]=\\\"{\\n            color: this.calculateSize() > 120 ? '#f44336' : 'unset',\\n            fontWeight: this.calculateSize() > 120 ? '500' : 'unset'\\n          }\\\"\\n        >\\n          size: {{ this.calculateSize() }}Kb &nbsp; {{ this.state.format }}\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\", styles: [\".popup{width:100vw;max-height:100%;height:100%;overflow:auto;position:fixed;top:0;left:0;background-color:#000c;z-index:1000;padding:24px 16px;color:#fff;box-sizing:border-box;animation-name:show;animation-duration:.4s}.popup .image-container{margin-top:50px;margin-bottom:50px;width:100%;flex-flow:row wrap;box-sizing:border-box;display:flex;place-content:flex-start center;align-items:flex-start}.popup .image-container .image-holder-full{height:auto;width:auto;position:relative;display:contents}.popup .material-icons{color:#fff}.popup img{vertical-align:middle;max-height:650px;max-width:100%;object-fit:cover;object-position:center}@media (max-width: 1024px){.popup{background-color:#000000d9;padding:8px}.popup img{max-height:100%;max-width:100%}}@media (max-width: 599px){.popup img{margin:0}}.popup .control-panel{color:#fff;background-color:#000000eb;margin:0 16px;padding:16px;width:18rem;border-radius:8px;flex-direction:column;box-sizing:border-box;display:flex;place-content:stretch flex-start;align-items:stretch;max-width:100%;position:relative}@media (max-width: 599px){.popup .control-panel{margin:8px 0;width:100%}}.popup .control-panel .title-panel{padding:0 4px;font-size:17px;font-weight:500;margin-bottom:16px!important}.popup .control-panel .item-panel{padding:0;font-size:14px;font-weight:500}.image-croper{position:absolute;width:180px;height:180px;min-height:64px;min-width:64px;border:2.5px solid #fafafa;box-sizing:border-box;resize:both;overflow:auto;opacity:0;border-radius:4px;overflow:hidden;z-index:10}.image-croper #image-croper-header{padding:0;cursor:move;z-index:9;background-color:transparent;color:#fff;height:100%;display:grid;gap:0px;grid-template-columns:repeat(3,1fr);width:100%;box-sizing:border-box;position:absolute;top:50%;transform:translateY(-50%);opacity:.8}.image-croper #image-croper-header .material-icons{color:#fff}.input-range{margin-bottom:16px;margin-top:4px}input[type=checkbox]{cursor:pointer}.form-field{margin-bottom:16px}.form-field label{font-size:12px;opacity:.92;margin-bottom:4px;display:block}.form-field input{height:34px;width:100%;box-sizing:border-box;border-radius:4px;border:none;padding:2px 8px;outline:none}.form-field select{height:34px;width:100%;box-sizing:border-box;border-radius:4px;border:none;padding:2px 8px;outline:none;background-color:#fff}.save-btn{padding:0 8px;height:34px;box-sizing:border-box;background-color:#fff;color:#000;border:none;border-radius:4px;cursor:pointer}.save-btn:active{transform:scale(.95)}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }]; }, propDecorators: { labels: [{\n                type: Input\n            }], imageSrc: [{\n                type: Input\n            }], color: [{\n                type: Input\n            }], initialState: [{\n                type: Input\n            }], closeModal: [{\n                type: Output\n            }] } });\n\nclass NgpImagePickerComponent {\n    constructor(chRef) {\n        this.chRef = chRef;\n        this.config = {\n            language: 'en',\n            objectFit: 'cover',\n            hideDeleteBtn: false,\n            hideDownloadBtn: false,\n            hideEditBtn: false,\n            hideAddBtn: false,\n        };\n        this.state = {\n            quality: 92,\n            maxHeight: 1000,\n            maxWidth: 1000,\n            cropHeight: 150,\n            cropWidth: 150,\n            maintainAspectRatio: true,\n            format: 'jpeg',\n            arrayCopiedImages: [],\n            originImageSrc: '',\n        };\n        this.loadImage = false;\n        this.fileType = '';\n        this.urlImage = '';\n        this.uuidFilePicker = Date.now().toString(20);\n        this.showEditPanel = false;\n        this.imageName = 'download';\n        this.labels = labelEn;\n        this.arrayCopiedImages = [];\n        this.color = '#1e88e5';\n        this.imagePicker = null;\n        this.$imageChanged = new EventEmitter();\n        this.$imageOriginal = new EventEmitter();\n    }\n    set _imageSrc(value) {\n        if (value) {\n            this.parseToBase64(value)\n                .then((dataUri) => {\n                this.imageSrc = dataUri;\n                this.state.originImageSrc = value;\n                this.state.arrayCopiedImages.push({\n                    lastImage: dataUri,\n                    width: this.state.maxWidth,\n                    height: this.state.maxHeight,\n                    quality: this.state.quality,\n                    format: this.state.format,\n                    originImageSrc: value,\n                });\n                this.$imageOriginal.next(this.state.originImageSrc);\n                this.loadImage = true;\n                this.chRef.markForCheck();\n            })\n                .catch((e) => {\n                console.error('!!!!ERROR: ', e);\n            });\n        }\n        else {\n            this.imageSrc = null;\n            this.state.originImageSrc = null;\n            this.loadImage = false;\n            this.state.arrayCopiedImages = [];\n            this.$imageOriginal.next(null);\n            this.state = {\n                ...this.state,\n                format: 'jpeg',\n                maxHeight: 1000,\n                maxWidth: 1000,\n                cropHeight: 150,\n                cropWidth: 150,\n                maintainAspectRatio: true,\n            };\n            this.showEditPanel = false;\n            this.chRef.markForCheck();\n        }\n    }\n    set _config(value) {\n        this.processConfig(value);\n    }\n    ngOnInit() {\n        this.appendLinkIconsToHead();\n    }\n    appendLinkIconsToHead() {\n        let head = document.head;\n        let linkIcons = head.querySelector('#ngp-image-picker-icons-id');\n        if (linkIcons)\n            return;\n        let link = document.createElement('link');\n        link.href = 'https://fonts.googleapis.com/icon?family=Material+Icons';\n        link.rel = 'stylesheet';\n        link.id = 'ngp-image-picker-icons-id';\n        head.appendChild(link);\n    }\n    onUpload(event) {\n        event.preventDefault();\n        this.imagePicker?.nativeElement.click();\n    }\n    handleFileSelect(evt) {\n        const files = evt.target?.files;\n        if (files) {\n            const file = files[0];\n            this.imageName = file.name.split('.')[0];\n            this.fileType = file.type;\n            if (!this.fileType.includes('image'))\n                return;\n            this.urlImage = `data:${file.type};base64,`;\n            if (file) {\n                this.state.format = this.fileType.split('image/')[1];\n                const reader = new FileReader();\n                reader.onload = this.handleReaderLoaded.bind(this);\n                reader.readAsBinaryString(file);\n            }\n        }\n    }\n    async handleReaderLoaded(readerEvt) {\n        const binaryString = readerEvt.target.result;\n        const base64textString = btoa(binaryString);\n        this.state.originImageSrc = this.urlImage + base64textString;\n        if (this.config.compressInitial) {\n            this.state = {\n                ...this.state,\n                quality: Math.min(this.config.compressInitial || 92, 100),\n                maintainAspectRatio: true,\n                format: 'jpeg',\n            };\n            this.imageSrc = await convertImageUsingCanvas(this.urlImage + base64textString, false, this.state, { getDimFromImage: true });\n        }\n        else {\n            this.imageSrc = this.urlImage + base64textString;\n            let img = document.createElement('img');\n            img.src = this.imageSrc;\n            img.onload = () => {\n                this.state.arrayCopiedImages = [];\n                this.state.maxHeight = img.height;\n                this.state.maxWidth = img.width;\n                this.state.arrayCopiedImages.push({\n                    lastImage: this.imageSrc,\n                    width: img.width,\n                    height: img.height,\n                    quality: this.state.quality,\n                    format: this.state.format,\n                    originImageSrc: this.state.originImageSrc,\n                });\n            };\n        }\n        this.$imageChanged.next(this.imageSrc);\n        this.loadImage = true;\n        this.chRef.markForCheck();\n    }\n    onOpenEditPanel() {\n        this.showEditPanel = true;\n    }\n    onCloseEditPanel(data) {\n        if (data) {\n            this.state = data.state;\n            this.imageSrc = data.imageSrc;\n            this.$imageChanged.next(this.imageSrc);\n        }\n        this.showEditPanel = false;\n    }\n    parseToBase64(imageUrl) {\n        let types = imageUrl.split('.');\n        let type = types[types.length - 1];\n        if (type && (type == 'png' || type == 'jpeg' || type == 'webp')) {\n            type = type;\n        }\n        else {\n            type = 'jpeg';\n        }\n        this.state = {\n            ...this.state,\n            format: type,\n        };\n        return new Promise((resolve, reject) => {\n            let img = new window.Image();\n            img.crossOrigin = \"Anonymous\";\n            this.state = {\n                ...this.state,\n                maxHeight: img.height,\n                maxWidth: img.width,\n            };\n            img.onload = (e) => {\n                let canvas = document.createElement('canvas');\n                let ctx = canvas.getContext('2d');\n                if (!ctx)\n                    return;\n                let ratio = 1.0;\n                canvas.width = img.width * ratio;\n                canvas.height = img.height * ratio;\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n                let dataURI = canvas.toDataURL(`image/${type}`, this.state.quality);\n                return resolve({\n                    dataUri: dataURI,\n                    width: canvas.width,\n                    height: canvas.height,\n                });\n            };\n            img.onerror = (e) => {\n                return reject(e.message || `Error loading the src = ${imageUrl}`);\n            };\n            img.src = imageUrl;\n        }).then((data) => {\n            this.state = {\n                ...this.state,\n                maxHeight: data.height,\n                maxWidth: data.width,\n            };\n            return data.dataUri;\n        });\n    }\n    processConfig(value) {\n        if (value && value.constructor == Object) {\n            this.config = { ...this.config, ...value };\n            if (value.language != undefined) {\n                if (value.language == 'en') {\n                    this.labels = { ...labelEn };\n                }\n                if (value.language == 'es') {\n                    this.labels = { ...labelEs };\n                }\n                if (value.language == 'fr') {\n                    this.labels = { ...labelFr };\n                }\n                if (value.language == 'de') {\n                    this.labels = { ...labelDe };\n                }\n            }\n        }\n    }\n    calculateSize() {\n        if (this.imageSrc && this.imageSrc.length) {\n            return Math.ceil(((3 / 4) * this.imageSrc.length) / 1024);\n        }\n        else {\n            return 0;\n        }\n    }\n    ////////////////////////////////////////////////\n    onRemove() {\n        this.imageSrc = null;\n        this.loadImage = false;\n        this.$imageOriginal.next(null);\n        this.$imageChanged.next(null);\n        this.state = {\n            ...this.state,\n            originImageSrc: '',\n            format: 'jpeg',\n            maxHeight: 1000,\n            maxWidth: 1000,\n            cropHeight: 150,\n            cropWidth: 150,\n            maintainAspectRatio: true,\n            arrayCopiedImages: [],\n            basicFilters: undefined,\n            quality: 92,\n        };\n        this.showEditPanel = false;\n    }\n}\nNgpImagePickerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: NgpImagePickerComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });\nNgpImagePickerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"15.0.4\", type: NgpImagePickerComponent, selector: \"ngp-image-picker\", inputs: { color: \"color\", _imageSrc: \"_imageSrc\", _config: \"_config\" }, outputs: { $imageChanged: \"$imageChanged\", $imageOriginal: \"$imageOriginal\" }, viewQueries: [{ propertyName: \"imagePicker\", first: true, predicate: [\"imagePicker\"], descendants: true }], ngImport: i0, template: \"<div *ngIf=\\\"!loadImage\\\" class=\\\"place-image\\\">\\n  <div\\n    class=\\\"image-holder\\\"\\n    [ngStyle]=\\\"{\\n      width: this.config.width,\\n      height: this.config.height,\\n      borderRadius: this.config.borderRadius,\\n      aspectRatio: this.config.aspectRatio\\n    }\\\"\\n  >\\n    <button title=\\\"{{ labels['Upload a image'] }}\\\" class=\\\"icon-btn image-upload-btn\\\" (click)=\\\"onUpload($event)\\\">\\n      <!--  <span class=\\\"material-icons\\\">add_a_photo</mat-icon> -->\\n      <span class=\\\"material-icons\\\">add_a_photo</span>\\n    </button>\\n\\n    <input #imagePicker type=\\\"file\\\" style=\\\"display: none\\\" [id]=\\\"'filePicker-' + this.uuidFilePicker\\\" (change)=\\\"handleFileSelect($event)\\\" />\\n  </div>\\n</div>\\n<div *ngIf=\\\"loadImage\\\" class=\\\"place-image\\\">\\n  <div\\n    class=\\\"image-holder-loaded\\\"\\n    [ngStyle]=\\\"{\\n      width: this.config.width,\\n      height: this.config.height,\\n      borderRadius: this.config.borderRadius,\\n      aspectRatio: this.config.aspectRatio\\n    }\\\"\\n  >\\n    <img\\n      [src]=\\\"this.imageSrc\\\"\\n      alt=\\\"image-loaded\\\"\\n      [ngStyle]=\\\"{ borderRadius: this.config.borderRadius, objectFit: this.config.objectFit }\\\"\\n    />\\n    <input #imagePicker type=\\\"file\\\" style=\\\"display: none\\\" [id]=\\\"'filePicker-' + this.uuidFilePicker\\\" (change)=\\\"handleFileSelect($event)\\\" />\\n  </div>\\n  <p\\n    *ngIf=\\\"this.calculateSize()\\\"\\n    class=\\\"caption image-caption\\\"\\n    [ngStyle]=\\\"{\\n      color: this.calculateSize() > 120 ? '#f44336' : 'unset',\\n      fontWeight: this.calculateSize() > 120 ? '500' : 'unset'\\n    }\\\"\\n  >\\n    size: {{ this.calculateSize() }}Kb &nbsp; {{ this.state.format }}\\n  </p>\\n\\n  <div\\n    style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\"\\n    class=\\\"editing-bar-btn\\\"\\n  >\\n    <button\\n      class=\\\"icon-btn\\\"\\n      id=\\\"upload-img\\\"\\n      *ngIf=\\\"!this.config.hideAddBtn\\\"\\n      title=\\\"{{ labels['Upload a image'] }}\\\"\\n      (click)=\\\"onUpload($event)\\\"\\n    >\\n      <span class=\\\"material-icons\\\">add_a_photo</span>\\n    </button>\\n    <button\\n      class=\\\"icon-btn\\\"\\n      id=\\\"edit-img\\\"\\n      *ngIf=\\\"!this.config.hideEditBtn\\\"\\n      title=\\\"{{ labels['Open the editor panel'] }}\\\"\\n      (click)=\\\"onOpenEditPanel()\\\"\\n    >\\n      <span class=\\\"material-icons\\\">edit</span>\\n    </button>\\n    <a\\n      id=\\\"download-img\\\"\\n      *ngIf=\\\"!this.config.hideDownloadBtn\\\"\\n      title=\\\"{{ labels['Download the image'] }}\\\"\\n      [href]=\\\"this.imageSrc\\\"\\n      download=\\\"{{ imageName }}\\\"\\n    >\\n      <span class=\\\"material-icons\\\">cloud_download</span>\\n    </a>\\n    <button class=\\\"icon-btn\\\" id=\\\"delete-img\\\" *ngIf=\\\"!this.config.hideDeleteBtn\\\" title=\\\"{{ labels['Remove'] }}\\\" (click)=\\\"onRemove()\\\">\\n      <span class=\\\"material-icons\\\">delete</span>\\n    </button>\\n  </div>\\n</div>\\n\\n<lib-edit-image\\n  *ngIf=\\\"showEditPanel\\\"\\n  [imageSrc]=\\\"this.imageSrc\\\"\\n  [initialState]=\\\"this.state\\\"\\n  [labels]=\\\"this.labels\\\"\\n  [color]=\\\"this.color\\\"\\n  (closeModal)=\\\"this.onCloseEditPanel($event)\\\"\\n></lib-edit-image>\\n\", styles: [\"ngp-image-picker p{margin:0!important;padding:0!important}ngp-image-picker .place-image{flex-direction:column;box-sizing:border-box;display:flex;place-content:flex-start;align-items:flex-start}ngp-image-picker .place-image .image-holder{flex-direction:column;display:flex;place-content:center;align-items:center;position:relative;border-radius:16px;max-width:100%!important;box-sizing:border-box;border:2px rgba(0,0,0,.3) solid;background-color:#fcfcfc}@media (max-width: 599px){ngp-image-picker .place-image .image-holder{max-width:100%!important;max-height:250px!important}}ngp-image-picker .place-image .image-holder .image-upload-btn{transition:all .5s ease;position:relative;opacity:.85;width:50px;height:50px;color:#424242}ngp-image-picker .place-image .image-holder .image-upload-btn .material-icons{font-size:50px;width:50px;height:50px;line-height:50px;color:#424242}@media (max-width: 599px){ngp-image-picker .place-image .image-holder .image-upload-btn{opacity:1;width:30px;height:30px}ngp-image-picker .place-image .image-holder .image-upload-btn .material-icons{font-size:30px;width:30px;height:30px;line-height:30px}}ngp-image-picker .place-image .image-holder:hover .image-upload-btn{opacity:1;transition:all .5s ease}ngp-image-picker .place-image .image-holder-loaded{flex-direction:column;display:flex;place-content:center;align-items:center;position:relative;max-width:100%!important;border-radius:4px;box-sizing:border-box;padding:2px}ngp-image-picker .place-image .image-holder-loaded .image-caption{position:absolute;right:0;bottom:-22px}ngp-image-picker .place-image .image-holder-loaded img{height:100%;max-height:100%;width:100%;max-width:100%;object-position:center;background:black}@media (max-width: 599px){ngp-image-picker .place-image .image-holder-loaded{max-height:195px!important}}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn{transition:all .5s ease;position:relative;opacity:.85;width:50px;height:50px;color:#424242}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn .material-icons{font-size:50px;width:50px;height:50px;line-height:50px;color:#424242}@media (max-width: 599px){ngp-image-picker .place-image .image-holder-loaded .image-upload-btn{opacity:1;width:30px;height:30px}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn .material-icons{font-size:30px;width:30px;height:30px;line-height:30px}}ngp-image-picker .place-image .image-holder-loaded:hover .image-upload-btn{opacity:1;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn{margin-top:2px}ngp-image-picker .place-image .editing-bar-btn .material-icons-button{height:20px;line-height:20px;width:24px}ngp-image-picker .place-image .editing-bar-btn .material-icons{line-height:20px!important;font-size:20px!important;width:20px!important;height:20px!important}ngp-image-picker .place-image .editing-bar-btn button{margin:4px;color:#424242;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn button:hover{transition:all .25s ease-in}ngp-image-picker .place-image .editing-bar-btn a{margin:4px;color:#424242;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn a:hover{transition:all .25s ease-in}@keyframes show{0%{top:-100vh;opacity:0}to{top:0;opacity:1}}ngp-image-picker .btn{padding:4px 8px;border-radius:4px;cursor:pointer}ngp-image-picker .btn .material-icons{color:#000000d1}ngp-image-picker .icon-btn{display:flex;justify-content:center;align-items:center;border:none;background-color:inherit;border-radius:50%;cursor:pointer}ngp-image-picker .icon-btn :active{transform:scale(.95)}ngp-image-picker .caption{font-size:11px;margin-top:2px!important;margin-bottom:0!important}ngp-image-picker button[disabled]{filter:brightness(.5);cursor:not-allowed}ngp-image-picker .croppr-container *{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}ngp-image-picker .croppr-container img{vertical-align:middle;max-width:100%;max-height:650px;object-fit:cover;object-position:center}ngp-image-picker .croppr{position:relative;display:inline-block}ngp-image-picker .croppr-overlay{background:rgba(0,0,0,.5);position:absolute;inset:0;z-index:1;cursor:crosshair}ngp-image-picker .croppr-region{border:1px dashed rgba(0,0,0,.5);position:absolute;z-index:3;cursor:move;top:0;display:grid;gap:0px;grid-template-columns:repeat(3,1fr)}ngp-image-picker .croppr-imageClipped{position:absolute;inset:0;z-index:2;pointer-events:none}ngp-image-picker .croppr-handle{border:1px solid #ccc;background-color:#fafafa;width:14px;height:14px;position:absolute;z-index:4;top:0;border-radius:50%}\\n\"], dependencies: [{ kind: \"directive\", type: i1.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i1.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }, { kind: \"component\", type: EditImageComponent, selector: \"lib-edit-image\", inputs: [\"labels\", \"imageSrc\", \"color\", \"initialState\"], outputs: [\"closeModal\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: NgpImagePickerComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngp-image-picker', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, template: \"<div *ngIf=\\\"!loadImage\\\" class=\\\"place-image\\\">\\n  <div\\n    class=\\\"image-holder\\\"\\n    [ngStyle]=\\\"{\\n      width: this.config.width,\\n      height: this.config.height,\\n      borderRadius: this.config.borderRadius,\\n      aspectRatio: this.config.aspectRatio\\n    }\\\"\\n  >\\n    <button title=\\\"{{ labels['Upload a image'] }}\\\" class=\\\"icon-btn image-upload-btn\\\" (click)=\\\"onUpload($event)\\\">\\n      <!--  <span class=\\\"material-icons\\\">add_a_photo</mat-icon> -->\\n      <span class=\\\"material-icons\\\">add_a_photo</span>\\n    </button>\\n\\n    <input #imagePicker type=\\\"file\\\" style=\\\"display: none\\\" [id]=\\\"'filePicker-' + this.uuidFilePicker\\\" (change)=\\\"handleFileSelect($event)\\\" />\\n  </div>\\n</div>\\n<div *ngIf=\\\"loadImage\\\" class=\\\"place-image\\\">\\n  <div\\n    class=\\\"image-holder-loaded\\\"\\n    [ngStyle]=\\\"{\\n      width: this.config.width,\\n      height: this.config.height,\\n      borderRadius: this.config.borderRadius,\\n      aspectRatio: this.config.aspectRatio\\n    }\\\"\\n  >\\n    <img\\n      [src]=\\\"this.imageSrc\\\"\\n      alt=\\\"image-loaded\\\"\\n      [ngStyle]=\\\"{ borderRadius: this.config.borderRadius, objectFit: this.config.objectFit }\\\"\\n    />\\n    <input #imagePicker type=\\\"file\\\" style=\\\"display: none\\\" [id]=\\\"'filePicker-' + this.uuidFilePicker\\\" (change)=\\\"handleFileSelect($event)\\\" />\\n  </div>\\n  <p\\n    *ngIf=\\\"this.calculateSize()\\\"\\n    class=\\\"caption image-caption\\\"\\n    [ngStyle]=\\\"{\\n      color: this.calculateSize() > 120 ? '#f44336' : 'unset',\\n      fontWeight: this.calculateSize() > 120 ? '500' : 'unset'\\n    }\\\"\\n  >\\n    size: {{ this.calculateSize() }}Kb &nbsp; {{ this.state.format }}\\n  </p>\\n\\n  <div\\n    style=\\\"flex-direction: row; box-sizing: border-box; display: flex; place-content: flex-start; align-items: flex-start\\\"\\n    class=\\\"editing-bar-btn\\\"\\n  >\\n    <button\\n      class=\\\"icon-btn\\\"\\n      id=\\\"upload-img\\\"\\n      *ngIf=\\\"!this.config.hideAddBtn\\\"\\n      title=\\\"{{ labels['Upload a image'] }}\\\"\\n      (click)=\\\"onUpload($event)\\\"\\n    >\\n      <span class=\\\"material-icons\\\">add_a_photo</span>\\n    </button>\\n    <button\\n      class=\\\"icon-btn\\\"\\n      id=\\\"edit-img\\\"\\n      *ngIf=\\\"!this.config.hideEditBtn\\\"\\n      title=\\\"{{ labels['Open the editor panel'] }}\\\"\\n      (click)=\\\"onOpenEditPanel()\\\"\\n    >\\n      <span class=\\\"material-icons\\\">edit</span>\\n    </button>\\n    <a\\n      id=\\\"download-img\\\"\\n      *ngIf=\\\"!this.config.hideDownloadBtn\\\"\\n      title=\\\"{{ labels['Download the image'] }}\\\"\\n      [href]=\\\"this.imageSrc\\\"\\n      download=\\\"{{ imageName }}\\\"\\n    >\\n      <span class=\\\"material-icons\\\">cloud_download</span>\\n    </a>\\n    <button class=\\\"icon-btn\\\" id=\\\"delete-img\\\" *ngIf=\\\"!this.config.hideDeleteBtn\\\" title=\\\"{{ labels['Remove'] }}\\\" (click)=\\\"onRemove()\\\">\\n      <span class=\\\"material-icons\\\">delete</span>\\n    </button>\\n  </div>\\n</div>\\n\\n<lib-edit-image\\n  *ngIf=\\\"showEditPanel\\\"\\n  [imageSrc]=\\\"this.imageSrc\\\"\\n  [initialState]=\\\"this.state\\\"\\n  [labels]=\\\"this.labels\\\"\\n  [color]=\\\"this.color\\\"\\n  (closeModal)=\\\"this.onCloseEditPanel($event)\\\"\\n></lib-edit-image>\\n\", styles: [\"ngp-image-picker p{margin:0!important;padding:0!important}ngp-image-picker .place-image{flex-direction:column;box-sizing:border-box;display:flex;place-content:flex-start;align-items:flex-start}ngp-image-picker .place-image .image-holder{flex-direction:column;display:flex;place-content:center;align-items:center;position:relative;border-radius:16px;max-width:100%!important;box-sizing:border-box;border:2px rgba(0,0,0,.3) solid;background-color:#fcfcfc}@media (max-width: 599px){ngp-image-picker .place-image .image-holder{max-width:100%!important;max-height:250px!important}}ngp-image-picker .place-image .image-holder .image-upload-btn{transition:all .5s ease;position:relative;opacity:.85;width:50px;height:50px;color:#424242}ngp-image-picker .place-image .image-holder .image-upload-btn .material-icons{font-size:50px;width:50px;height:50px;line-height:50px;color:#424242}@media (max-width: 599px){ngp-image-picker .place-image .image-holder .image-upload-btn{opacity:1;width:30px;height:30px}ngp-image-picker .place-image .image-holder .image-upload-btn .material-icons{font-size:30px;width:30px;height:30px;line-height:30px}}ngp-image-picker .place-image .image-holder:hover .image-upload-btn{opacity:1;transition:all .5s ease}ngp-image-picker .place-image .image-holder-loaded{flex-direction:column;display:flex;place-content:center;align-items:center;position:relative;max-width:100%!important;border-radius:4px;box-sizing:border-box;padding:2px}ngp-image-picker .place-image .image-holder-loaded .image-caption{position:absolute;right:0;bottom:-22px}ngp-image-picker .place-image .image-holder-loaded img{height:100%;max-height:100%;width:100%;max-width:100%;object-position:center;background:black}@media (max-width: 599px){ngp-image-picker .place-image .image-holder-loaded{max-height:195px!important}}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn{transition:all .5s ease;position:relative;opacity:.85;width:50px;height:50px;color:#424242}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn .material-icons{font-size:50px;width:50px;height:50px;line-height:50px;color:#424242}@media (max-width: 599px){ngp-image-picker .place-image .image-holder-loaded .image-upload-btn{opacity:1;width:30px;height:30px}ngp-image-picker .place-image .image-holder-loaded .image-upload-btn .material-icons{font-size:30px;width:30px;height:30px;line-height:30px}}ngp-image-picker .place-image .image-holder-loaded:hover .image-upload-btn{opacity:1;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn{margin-top:2px}ngp-image-picker .place-image .editing-bar-btn .material-icons-button{height:20px;line-height:20px;width:24px}ngp-image-picker .place-image .editing-bar-btn .material-icons{line-height:20px!important;font-size:20px!important;width:20px!important;height:20px!important}ngp-image-picker .place-image .editing-bar-btn button{margin:4px;color:#424242;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn button:hover{transition:all .25s ease-in}ngp-image-picker .place-image .editing-bar-btn a{margin:4px;color:#424242;transition:all .5s ease}ngp-image-picker .place-image .editing-bar-btn a:hover{transition:all .25s ease-in}@keyframes show{0%{top:-100vh;opacity:0}to{top:0;opacity:1}}ngp-image-picker .btn{padding:4px 8px;border-radius:4px;cursor:pointer}ngp-image-picker .btn .material-icons{color:#000000d1}ngp-image-picker .icon-btn{display:flex;justify-content:center;align-items:center;border:none;background-color:inherit;border-radius:50%;cursor:pointer}ngp-image-picker .icon-btn :active{transform:scale(.95)}ngp-image-picker .caption{font-size:11px;margin-top:2px!important;margin-bottom:0!important}ngp-image-picker button[disabled]{filter:brightness(.5);cursor:not-allowed}ngp-image-picker .croppr-container *{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}ngp-image-picker .croppr-container img{vertical-align:middle;max-width:100%;max-height:650px;object-fit:cover;object-position:center}ngp-image-picker .croppr{position:relative;display:inline-block}ngp-image-picker .croppr-overlay{background:rgba(0,0,0,.5);position:absolute;inset:0;z-index:1;cursor:crosshair}ngp-image-picker .croppr-region{border:1px dashed rgba(0,0,0,.5);position:absolute;z-index:3;cursor:move;top:0;display:grid;gap:0px;grid-template-columns:repeat(3,1fr)}ngp-image-picker .croppr-imageClipped{position:absolute;inset:0;z-index:2;pointer-events:none}ngp-image-picker .croppr-handle{border:1px solid #ccc;background-color:#fafafa;width:14px;height:14px;position:absolute;z-index:4;top:0;border-radius:50%}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }]; }, propDecorators: { color: [{\n                type: Input\n            }], _imageSrc: [{\n                type: Input\n            }], _config: [{\n                type: Input\n            }], imagePicker: [{\n                type: ViewChild,\n                args: ['imagePicker', { static: false }]\n            }], $imageChanged: [{\n                type: Output\n            }], $imageOriginal: [{\n                type: Output\n            }] } });\n\nclass NgpImagePickerModule {\n}\nNgpImagePickerModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: NgpImagePickerModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nNgpImagePickerModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.0.4\", ngImport: i0, type: NgpImagePickerModule, declarations: [NgpImagePickerComponent, TabsComponent, EditImageComponent, BasicFiltersComponent, CropperWrapperComponent], imports: [CommonModule, FormsModule, ReactiveFormsModule], exports: [NgpImagePickerComponent] });\nNgpImagePickerModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: NgpImagePickerModule, imports: [CommonModule, FormsModule, ReactiveFormsModule] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.4\", ngImport: i0, type: NgpImagePickerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [NgpImagePickerComponent, TabsComponent, EditImageComponent, BasicFiltersComponent, CropperWrapperComponent],\n                    imports: [CommonModule, FormsModule, ReactiveFormsModule],\n                    exports: [NgpImagePickerComponent],\n                    providers: [],\n                }]\n        }] });\n\n/*\n * Public API Surface of ngp-image-picker\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NgpImagePickerComponent, NgpImagePickerModule };\n//# sourceMappingURL=ngp-image-picker.mjs.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}